"use strict";exports.id=288,exports.ids=[288],exports.modules={20544:function(t,e,o){var r=this&&this.__createBinding||(Object.create?function(t,e,o,r){void 0===r&&(r=o);var n=Object.getOwnPropertyDescriptor(e,o);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,r,n)}:function(t,e,o,r){void 0===r&&(r=o),t[r]=e[o]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.req=e.json=e.toBuffer=void 0;const i=s(o(58611)),c=s(o(65692));async function u(t){let e=0;const o=[];for await(const r of t)e+=r.length,o.push(r);return Buffer.concat(o,e)}e.toBuffer=u,e.json=async function(t){const e=(await u(t)).toString("utf8");try{return JSON.parse(e)}catch(t){const o=t;throw o.message+=` (input: ${e})`,o}},e.req=function(t,e={}){const o=(("string"==typeof t?t:t.href).startsWith("https:")?c:i).request(t,e),r=new Promise((t,e)=>{o.once("response",t).once("error",e).end()});return o.then=r.then.bind(r),o}},20917:function(t,e,o){var r=this&&this.__createBinding||(Object.create?function(t,e,o,r){void 0===r&&(r=o);var n=Object.getOwnPropertyDescriptor(e,o);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,r,n)}:function(t,e,o,r){void 0===r&&(r=o),t[r]=e[o]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return n(e,t),e},i=this&&this.__exportStar||function(t,e){for(var o in t)"default"===o||Object.prototype.hasOwnProperty.call(e,o)||r(e,t,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.Agent=void 0;const c=s(o(69278)),u=s(o(58611)),a=o(65692);i(o(20544),e);const p=Symbol("AgentBaseInternalState");class f extends u.Agent{constructor(t){super(t),this[p]={}}isSecureEndpoint(t){if(t){if("boolean"==typeof t.secureEndpoint)return t.secureEndpoint;if("string"==typeof t.protocol)return"https:"===t.protocol}const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some(t=>-1!==t.indexOf("(https.js:")||-1!==t.indexOf("node:https:"))}incrementSockets(t){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[t]||(this.sockets[t]=[]);const e=new c.Socket({writable:!1});return this.sockets[t].push(e),this.totalSocketCount++,e}decrementSockets(t,e){if(!this.sockets[t]||null===e)return;const o=this.sockets[t],r=o.indexOf(e);-1!==r&&(o.splice(r,1),this.totalSocketCount--,0===o.length&&delete this.sockets[t])}getName(t){return this.isSecureEndpoint(t)?a.Agent.prototype.getName.call(this,t):super.getName(t)}createSocket(t,e,o){const r={...e,secureEndpoint:this.isSecureEndpoint(e)},n=this.getName(r),s=this.incrementSockets(n);Promise.resolve().then(()=>this.connect(t,r)).then(i=>{if(this.decrementSockets(n,s),i instanceof u.Agent)try{return i.addRequest(t,r)}catch(t){return o(t)}this[p].currentSocket=i,super.createSocket(t,e,o)},t=>{this.decrementSockets(n,s),o(t)})}createConnection(){const t=this[p].currentSocket;if(this[p].currentSocket=void 0,!t)throw new Error("No socket was returned in the `connect()` function");return t}get defaultPort(){return this[p].defaultPort??("https:"===this.protocol?443:80)}set defaultPort(t){this[p]&&(this[p].defaultPort=t)}get protocol(){return this[p].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(t){this[p]&&(this[p].protocol=t)}}e.Agent=f},62288:function(t,e,o){var r=this&&this.__createBinding||(Object.create?function(t,e,o,r){void 0===r&&(r=o);var n=Object.getOwnPropertyDescriptor(e,o);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,r,n)}:function(t,e,o,r){void 0===r&&(r=o),t[r]=e[o]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return n(e,t),e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.HttpsProxyAgent=void 0;const c=s(o(69278)),u=s(o(64756)),a=i(o(42613)),p=i(o(45753)),f=o(20917),h=o(87016),l=o(63868),d=(0,p.default)("https-proxy-agent"),y=t=>void 0===t.servername&&t.host&&!c.isIP(t.host)?{...t,servername:t.host}:t;class g extends f.Agent{constructor(t,e){super(e),this.options={path:void 0},this.proxy="string"==typeof t?new h.URL(t):t,this.proxyHeaders=e?.headers??{},d("Creating new HttpsProxyAgent instance: %o",this.proxy.href);const o=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),r=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...e?b(e,"headers"):null,host:o,port:r}}async connect(t,e){const{proxy:o}=this;if(!e.host)throw new TypeError('No "host" provided');let r;"https:"===o.protocol?(d("Creating `tls.Socket`: %o",this.connectOpts),r=u.connect(y(this.connectOpts))):(d("Creating `net.Socket`: %o",this.connectOpts),r=c.connect(this.connectOpts));const n="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},s=c.isIPv6(e.host)?`[${e.host}]`:e.host;let i=`CONNECT ${s}:${e.port} HTTP/1.1\r\n`;if(o.username||o.password){const t=`${decodeURIComponent(o.username)}:${decodeURIComponent(o.password)}`;n["Proxy-Authorization"]=`Basic ${Buffer.from(t).toString("base64")}`}n.Host=`${s}:${e.port}`,n["Proxy-Connection"]||(n["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(const t of Object.keys(n))i+=`${t}: ${n[t]}\r\n`;const p=(0,l.parseProxyResponse)(r);r.write(`${i}\r\n`);const{connect:f,buffered:h}=await p;if(t.emit("proxyConnect",f),this.emit("proxyConnect",f,t),200===f.statusCode)return t.once("socket",v),e.secureEndpoint?(d("Upgrading socket connection to TLS"),u.connect({...b(y(e),"host","path","port"),socket:r})):r;r.destroy();const g=new c.Socket({writable:!1});return g.readable=!0,t.once("socket",t=>{d("Replaying proxy buffer for failed request"),(0,a.default)(t.listenerCount("data")>0),t.push(h),t.push(null)}),g}}function v(t){t.resume()}function b(t,...e){const o={};let r;for(r in t)e.includes(r)||(o[r]=t[r]);return o}g.protocols=["http","https"],e.HttpsProxyAgent=g},63868:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.parseProxyResponse=void 0;const n=(0,r(o(45753)).default)("https-proxy-agent:parse-proxy-response");e.parseProxyResponse=function(t){return new Promise((e,o)=>{let r=0;const s=[];function i(){const u=t.read();u?function(u){s.push(u),r+=u.length;const a=Buffer.concat(s,r),p=a.indexOf("\r\n\r\n");if(-1===p)return n("have not received end of HTTP headers yet..."),void i();const f=a.slice(0,p).toString("ascii").split("\r\n"),h=f.shift();if(!h)return t.destroy(),o(new Error("No header received from proxy CONNECT response"));const l=h.split(" "),d=+l[1],y=l.slice(2).join(" "),g={};for(const e of f){if(!e)continue;const r=e.indexOf(":");if(-1===r)return t.destroy(),o(new Error(`Invalid header from proxy CONNECT response: "${e}"`));const n=e.slice(0,r).toLowerCase(),s=e.slice(r+1).trimStart(),i=g[n];"string"==typeof i?g[n]=[i,s]:Array.isArray(i)?i.push(s):g[n]=s}n("got proxy server response: %o %o",h,g),c(),e({connect:{statusCode:d,statusText:y,headers:g},buffered:a})}(u):t.once("readable",i)}function c(){t.removeListener("end",u),t.removeListener("error",a),t.removeListener("readable",i)}function u(){c(),n("onend"),o(new Error("Proxy connection ended before receiving CONNECT response"))}function a(t){c(),n("onerror %o",t),o(t)}t.on("error",a),t.on("end",u),i()})}}};
//# sourceMappingURL=288.extension.js.map