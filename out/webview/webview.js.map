{"version":3,"file":"webview.js","mappings":"wNAWIA,EAAU,CAAC,EAEfA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKnB,QAAe,KAAW,IAAQM,OAAS,IAAQA,YAASC,C,sFCtB/DC,EAA0B,IAA4B,KAC1DA,EAAwBC,EAAE,KAE1BD,EAAwBE,KAAK,CAACC,EAAOC,GAAI,mKAMtC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,sCAAsC,MAAQ,GAAG,SAAW,2BAA2B,eAAiB,CAAC,wMAAwM,WAAa,MAE5V,S,mECZIJ,E,MAA0B,GAA4B,KAE1DA,EAAwBE,KAAK,CAACC,EAAOC,GAAI,6iMA0UtC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,+CAA+C,MAAQ,GAAG,SAAW,qgFAAqgF,eAAiB,CAAC,8iMAA8iM,WAAa,MAErrR,S,8KCtUIZ,EAAU,CAAC,EAEfA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKnB,QAAe,KAAW,IAAQM,OAAS,IAAQA,YAASC,C,+NCpBnE,gBAQA,MAAaM,EAKX,aAAOC,CAAOC,GACZ,MAAMC,EAAYC,SAASC,cAAc,OACzCF,EAAUG,UAAY,WAAWJ,EAAMK,QAAQC,OAC/CL,EAAUM,aAAa,kBAAmBP,EAAMK,QAAQR,IAExD,MAAMW,EAAYN,SAASC,cAAc,OAIzC,GAHAK,EAAUJ,UAAY,kBAGK,cAAvBJ,EAAMK,QAAQC,KAAsB,CACtC,MAAMG,EAAW,EAAAC,oBAAoBC,cAC/BC,EAAoBV,SAASC,cAAc,OACjDS,EAAkBR,UAAY,eAC9BQ,EAAkBC,UAAYJ,EAASK,OAAOd,EAAMK,QAAQU,SAC5DP,EAAUQ,YAAYJ,EACxB,MAEEJ,EAAUS,YAAcjB,EAAMK,QAAQU,QAGxC,MAAMG,EAASC,KAAKC,kBAAkBpB,EAAMK,SAK5C,OAHAJ,EAAUe,YAAYR,GACtBP,EAAUe,YAAYE,GAEfjB,CACT,CAKA,wBAAOmB,CAAkBf,GACvB,MAAMa,EAAShB,SAASC,cAAc,OACtCe,EAAOd,UAAY,eAGnB,MAAMiB,EAASnB,SAASC,cAAc,OACtCkB,EAAOjB,UAAY,eAGnB,MAAMkB,EAAc,IAAIC,KAAKlB,EAAQmB,WAC/BC,EAAM,IAAIF,KACVG,EAAUJ,EAAYK,iBAAmBF,EAAIE,eAC7CC,EAAc,IAAIL,KAAKE,EAAII,UAAY,OAAqBF,iBAAmBL,EAAYK,eAEjG,IAAIG,EACAC,EAAmB,GAGvB,MAAMC,EAAgBV,EAAYW,mBAAmB,GAAI,CACvDC,KAAM,UACNC,OAAQ,YAINT,EACFI,EAAWE,EACFJ,GACTE,EAAWE,EACXD,EAAW,cAEXD,EAAWE,EACXD,EAAWT,EAAYc,mBAAmB,GAAI,CAC5CC,MAAO,QACPC,IAAK,UACLC,KAAMjB,EAAYkB,gBAAkBf,EAAIe,cAAgB,eAAYhD,KAKxE,MAAMiD,EAASvC,SAASC,cAAc,QAOtC,GANAsC,EAAOrC,UAAY,eACnBqC,EAAOxB,YAAca,EACrBW,EAAOC,MAAQpB,EAAYqB,iBAC3BtB,EAAOL,YAAYyB,GAGfV,EAAU,CACZ,MAAMa,EAAS1C,SAASC,cAAc,QACtCyC,EAAOxC,UAAY,eACnBwC,EAAO3B,YAAcc,EACrBa,EAAOF,MAAQpB,EAAYc,qBAC3Bf,EAAOL,YAAY4B,EACrB,CAGA,GAAqB,cAAjBvC,EAAQC,KAAsB,CAEhC,GAAID,EAAQwC,SAAU,CACpB,MAAMC,EAAa5C,SAASC,cAAc,QAC1C2C,EAAW1C,UAAY,mBACvB0C,EAAW7B,YAAcZ,EAAQwC,SACjCxB,EAAOL,YAAY8B,EACrB,CAGA,GAAIzC,EAAQ0C,OAAQ,CAClB,MAAMC,EAAW9C,SAASC,cAAc,QACxC6C,EAAS5C,UAAY,iBACrB4C,EAAS/B,YAAc,GAAGZ,EAAQ0C,gBAClC1B,EAAOL,YAAYgC,EACrB,CAGA,GAAI3C,EAAQ4C,KAAM,CAChB,MAAMC,EAAShD,SAASC,cAAc,QACtC+C,EAAO9C,UAAY,eACnB8C,EAAOjC,YAAc,IAAIZ,EAAQ4C,KAAKE,QAAQ,KAC9C9B,EAAOL,YAAYkC,EACrB,CAGA,GAAI7C,EAAQ+C,MAAO,CACjB,MAAMC,EAAUnD,SAASC,cAAc,QACvCkD,EAAQjD,UAAY,gBACpBiD,EAAQpC,YAAcZ,EAAQ+C,MAC9BC,EAAQC,MAAMC,SAAW,MACzBF,EAAQC,MAAME,QAAU,MACxBnC,EAAOL,YAAYqC,EACrB,CACF,CAGA,MAAMI,EAAYvD,SAASC,cAAc,OACzCsD,EAAUrD,UAAY,kBAGtB,MAAMsD,EAAUxD,SAASC,cAAc,UAQvC,GAPAuD,EAAQtD,UAAY,0BACpBsD,EAAQzC,YAAc,UACtByC,EAAQhB,MAAQ,uBAChBgB,EAAQC,QAAU,IAAMxC,KAAKyC,mBAAmBvD,GAChDoD,EAAUzC,YAAY0C,GAGD,cAAjBrD,EAAQC,KAAsB,CAChC,MAAMuD,EAAgB3D,SAASC,cAAc,UAC7C0D,EAAczD,UAAY,gCAC1ByD,EAAc5C,YAAc,gBAC5B4C,EAAcnB,MAAQ,2BACtBmB,EAAcF,QAAU,IAAMxC,KAAK2C,kBAAkBzD,GACrDoD,EAAUzC,YAAY6C,EACxB,CAGA,MAAME,EAAY7D,SAASC,cAAc,UAUzC,OATA4D,EAAU3D,UAAY,4BACtB2D,EAAU9C,YAAc,aACxB8C,EAAUrB,MAAQ,sBAClBqB,EAAUJ,QAAU,IAAMxC,KAAK6C,cAAc3D,GAC7CoD,EAAUzC,YAAY+C,GAEtB7C,EAAOF,YAAYK,GACnBH,EAAOF,YAAYyC,GAEZvC,CACT,CAKQ,yBAAO0C,CAAmBvD,GAChC4D,UAAUC,UAAUC,UAAU9D,EAAQU,SAASqD,KAAK,KAElD,MAAMC,EAAenE,SAASC,cAAc,OAC5CkE,EAAapD,YAAc,wBAC3BoD,EAAaf,MAAMgB,QAAU,ySAY7BpE,SAASqE,KAAKvD,YAAYqD,GAC1BG,WAAW,IAAMH,EAAaI,SAAU,OACvCC,MAAMC,IACPC,QAAQC,MAAM,wBAAyBF,IAE3C,CAKQ,wBAAOb,CAAkBzD,IAGfyE,OAAeC,WAAcD,OAAeE,oBACrDC,YAAY,CACjB3E,KAAM,oBACN4E,UAAW7E,EAAQR,IAEvB,CAKQ,oBAAOmE,CAAc3D,IAEXyE,OAAeC,WAAcD,OAAeE,oBACrDC,YAAY,CACjB3E,KAAM,gBACN4E,UAAW7E,EAAQR,IAEvB,EArNF,qBA2NA,2BAEE,aAAOE,CAAOC,GACZ,MAAMmF,EAAcjF,SAASC,cAAc,OAC3CgF,EAAY/E,UAAY,aAExB,MAAMgF,EAAQlF,SAASC,cAAc,OAC/BkF,EAASnF,SAASC,cAAc,QAOtC,GANAkF,EAAOpE,YAAcjB,EAAMsF,KAC3BD,EAAOjF,UAAY,YAAYJ,EAAMuF,WAErCH,EAAMpE,YAAYqE,GAClBF,EAAYnE,YAAYoE,GAEpBpF,EAAMwF,SAAU,CAClB,MAAM9B,EAAUvC,KAAKsE,iBAAiBzF,EAAMsF,MAC5CH,EAAYnE,YAAY0C,EAC1B,CAEA,OAAOyB,CACT,CAEQ,uBAAOM,CAAiBH,GAC9B,MAAM5B,EAAUxD,SAASC,cAAc,UAcvC,OAbAuD,EAAQtD,UAAY,WACpBsD,EAAQzC,YAAc,KACtByC,EAAQhB,MAAQ,YAEhBgB,EAAQgC,iBAAiB,QAAS,KAChCzB,UAAUC,UAAUC,UAAUmB,GAAMlB,KAAK,KACvCV,EAAQzC,YAAc,IACtBuD,WAAW,KACTd,EAAQzC,YAAc,MACrB,SAIAyC,CACT,GAMF,kCAEE,aAAO3D,CACL4F,EACAC,EACAC,GAEA,MAAMC,EAAa5F,SAASC,cAAc,OAC1C2F,EAAW1F,UAAY,oBAEvB,MAAM2F,EAAU7F,SAASC,cAAc,SACvC4F,EAAQ9E,YAAc,eACtB8E,EAAQxF,aAAa,MAAO,kBAE5B,MAAMyF,EAAW9F,SAASC,cAAc,UACxC6F,EAASnG,GAAK,iBACdmG,EAAS5F,UAAY,oBAGrB6F,OAAOC,QAAQN,GAAWO,QAAQ,EAAEC,EAAYvD,MAC9C,MAAMwD,EAAWnG,SAASC,cAAc,UACxCkG,EAASC,MAAQF,EACjBC,EAASpF,YAAc4B,EAAS0D,KAC5BH,IAAeT,IACjBU,EAASG,UAAW,GAEtBR,EAAShF,YAAYqF,KAIvBL,EAASN,iBAAiB,SAAU,KAClCG,EAAiBG,EAASM,SAG5B,MAAMG,EAAWvG,SAASC,cAAc,OACxCsG,EAASrG,UAAY,kBACrBqG,EAAS5G,GAAK,iBAEd,MAAM6G,EAAcxG,SAASC,cAAc,QAC3CuG,EAAYtG,UAAY,mBACxBsG,EAAY7G,GAAK,kBACjB6G,EAAYzF,YAAc,IAE1B,MAAM0F,EAASzG,SAASC,cAAc,QAYtC,OAXAwG,EAAOvG,UAAY,cACnBuG,EAAO9G,GAAK,aACZ8G,EAAO1F,YAAc,QAErBwF,EAASzF,YAAY0F,GACrBD,EAASzF,YAAY2F,GAErBb,EAAW9E,YAAY+E,GACvBD,EAAW9E,YAAYgF,GACvBF,EAAW9E,YAAYyF,GAEhBX,CACT,GAMF,+BAEE,aAAO/F,CACL6G,EACAC,EACAC,GAEA,MAAMhB,EAAa5F,SAASC,cAAc,OAC1C2F,EAAW1F,UAAY,iBAEvB,MAAM2F,EAAU7F,SAASC,cAAc,SACvC4F,EAAQ9E,YAAc,YACtB8E,EAAQxF,aAAa,MAAO,eAE5B,MAAMyF,EAAW9F,SAASC,cAAc,UAuBxC,OAtBA6F,EAASnG,GAAK,cACdmG,EAAS5F,UAAY,iBAGrByG,EAAOV,QAAQ/C,IACb,MAAMiD,EAAWnG,SAASC,cAAc,UACxCkG,EAASC,MAAQlD,EACjBiD,EAASpF,YAAcE,KAAK4F,oBAAoB3D,GAC5CA,IAAUwD,IACZP,EAASG,UAAW,GAEtBR,EAAShF,YAAYqF,KAIvBL,EAASN,iBAAiB,SAAU,KAClCoB,EAAcd,EAASM,SAGzBR,EAAW9E,YAAY+E,GACvBD,EAAW9E,YAAYgF,GAEhBF,CACT,CAEQ,0BAAOiB,CAAoB3D,GAcjC,MAb2C,CACzC,6BAA8B,oBAC9B,2BAA4B,kBAC5B,4BAA6B,mBAC7B,0BAA2B,iBAC3B,QAAS,QACT,cAAe,cACf,gBAAiB,gBACjB,gBAAiB,gBACjB,iBAAkB,iBAClB,OAAU,SACV,YAAa,aAEGA,IAAUA,CAC9B,GAMF,mCAEE,aAAOrD,GACL,MAAMiH,EAAa9G,SAASC,cAAc,OAC1C6G,EAAW5G,UAAY,qBACvB4G,EAAWnH,GAAK,oBAChBmH,EAAW1D,MAAM2D,QAAU,OAE3B,MAAMzG,EAAYN,SAASC,cAAc,OACzCK,EAAUJ,UAAY,mBAEtB,MAAM8G,EAAQhH,SAASC,cAAc,QACrC+G,EAAM9G,UAAY,eAClB8G,EAAMjG,YAAc,KAEpB,MAAMkG,EAASjH,SAASC,cAAc,OACtCgH,EAAO/G,UAAY,gBACnB,IAAK,IAAIV,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,MAAM0H,EAAQlH,SAASC,cAAc,QACrCgH,EAAOnG,YAAYoG,EACrB,CAEA,MAAMT,EAASzG,SAASC,cAAc,QAStC,OARAwG,EAAOvG,UAAY,gBACnBuG,EAAO1F,YAAc,cAErBT,EAAUQ,YAAYkG,GACtB1G,EAAUQ,YAAYmG,GACtB3G,EAAUQ,YAAY2F,GACtBK,EAAWhG,YAAYR,GAEhBwG,CACT,GAMF,MAAMK,EAiBJ,WAAAC,CAAYpC,EAAmBqC,GAhBvB,KAAAC,OAAiB,GACjB,KAAAC,MAA+B,KAGhC,KAAAC,WAAqB,EAUpB,KAAAC,aAA2D,SAGjExG,KAAK+D,UAAYA,EACjB/D,KAAKoG,QAAUA,CACjB,CAKA,QAAAK,CAASC,GAEP,GAAI1G,KAAKuG,UAEP,YADA9C,QAAQkD,IAAI,mDAAmD3G,KAAK+D,aAItE/D,KAAKqG,QAAUK,EAEf,MAAME,EAASV,EAAgBW,cAAc7G,KAAKwG,cAG7B,IAAjBI,EAAOE,MAMP9G,KAAKqG,OAAOU,QAAUH,EAAOI,WAAahH,KAAKsG,MACjDtG,KAAKiH,cAAcL,EAAOE,OACjB9G,KAAKqG,OAAOU,QAAUH,EAAOM,UAEtClH,KAAKmH,cATLnH,KAAKmH,aAWT,CAKQ,aAAAF,CAAcH,GAEhB9G,KAAKuG,YAILvG,KAAKsG,OACPc,aAAapH,KAAKsG,OAGpBtG,KAAKsG,MAAQjD,WAAW,KAEjBrD,KAAKuG,WACRvG,KAAKmH,cAEPnH,KAAKsG,MAAQ,MACZQ,GACL,CAKQ,WAAAK,GACFnH,KAAKqG,OAAOgB,SACdrH,KAAKoG,QAAQpG,KAAKqG,QAClBrG,KAAKqG,OAAS,IAGZrG,KAAKsG,QACPc,aAAapH,KAAKsG,OAClBtG,KAAKsG,MAAQ,KAEjB,CAKA,QAAAgB,GACEtH,KAAKmH,aACP,CAKA,OAAAI,GACMvH,KAAKsG,QACPc,aAAapH,KAAKsG,OAClBtG,KAAKsG,MAAQ,MAEftG,KAAKqG,OAAS,EAChB,CAKA,QAAAmB,CAASC,GACPzH,KAAKwG,aAAeiB,CACtB,CAKA,IAAAC,GACEjE,QAAQkD,IAAI,mCAAmC3G,KAAK+D,aACpD/D,KAAKuG,WAAY,EAGbvG,KAAKsG,QACPc,aAAapH,KAAKsG,OAClBtG,KAAKsG,MAAQ,MAIXtG,KAAKqG,OAAOU,OAAS,GACvB/G,KAAKmH,aAET,CAKA,eAAAQ,GACE,OAAO3H,KAAKuG,SACd,EAjIwB,EAAAM,cAAgB,CACtCe,KAAM,CAAEd,MAAO,IAAKE,SAAU,EAAGE,SAAU,GAC3CW,OAAQ,CAAEf,MAAO,GAAIE,SAAU,EAAGE,SAAU,GAC5CY,KAAM,CAAEhB,MAAO,GAAIE,SAAU,EAAGE,SAAU,GAC1Ca,QAAS,CAAEjB,MAAO,EAAGE,SAAU,IAAKE,SAAU,MAoIlD,MAAac,EAYX,aAAOpJ,CAAOmF,GACZ,MAAMjF,EAAYC,SAASC,cAAc,OACzCF,EAAUG,UAAY,8BACtBH,EAAUM,aAAa,kBAAmB2E,GAC1CjF,EAAUM,aAAa,iBAAkB,QAGzC,MAAM6I,EAAWlJ,SAASC,cAAc,OACxCiJ,EAAShJ,UAAY,mBAErB,MAAMqG,EAAWvG,SAASC,cAAc,QACxCsG,EAASrG,UAAY,mBACrBqG,EAAS5F,UAAY,8DAErB,MAAMwI,EAAUnJ,SAASC,cAAc,UACvCkJ,EAAQjJ,UAAY,kBACpBiJ,EAAQxI,UAAY,UACpBwI,EAAQ3G,MAAQ,2BAChB2G,EAAQ1F,QAAU,IAAMxC,KAAKmI,cAAcpE,GAE3CkE,EAASpI,YAAYyF,GACrB2C,EAASpI,YAAYqI,GAGrB,MAAM7I,EAAYN,SAASC,cAAc,OACzCK,EAAUJ,UAAY,oCAEtB,MAAMuG,EAASzG,SAASC,cAAc,OACtCwG,EAAOvG,UAAY,8BACnBuG,EAAO1F,YAAc,GAErB,MAAMsI,EAAWrJ,SAASC,cAAc,QACxCoJ,EAASnJ,UAAY,mBACrBmJ,EAAStI,YAAc,IAEvBT,EAAUQ,YAAY2F,GACtBnG,EAAUQ,YAAYuI,GAGtB,MAAMC,EAAatJ,SAASC,cAAc,OAgB1C,OAfAqJ,EAAWpJ,UAAY,qBACvBoJ,EAAW3I,UAAY,8QAUvBZ,EAAUe,YAAYoI,GACtBnJ,EAAUe,YAAYR,GACtBP,EAAUe,YAAYwI,GAEfvJ,CACT,CAKA,oBAAOwJ,CAAcvE,EAAmB2C,EAAe9E,GACrD,MAAM9C,EAAYC,SAASwJ,cAAc,qBAAqBxE,OAC9D,IAAKjF,IAAcA,EAAU0J,aAAa,kBAAmB,OAG7D,IAAInC,EAASrG,KAAKyI,cAAcC,IAAI3E,GAC/BsC,IACHA,EAAS,IAAIH,EAAgBnC,EAAYnE,IACvCI,KAAK2I,sBAAsB5E,EAAWnE,KAExCyG,EAAOmB,SAASxH,KAAK4I,aACrB5I,KAAKyI,cAAcI,IAAI9E,EAAWsC,IAIhCA,EAAOE,UACT9C,QAAQkD,IAAI,sDAAsD5C,MAKpEsC,EAAOI,SAASC,GAGZ9E,GAAUkH,KAAKC,SAAW,IAC5B/I,KAAKgJ,eAAejF,EAAWnC,GAEnC,CAKQ,4BAAO+G,CAAsB5E,EAAmBnE,GACtD,MAAMd,EAAYC,SAASwJ,cAAc,qBAAqBxE,OAC9D,IAAKjF,IAAcA,EAAU0J,aAAa,kBAAmB,OAE7D,MAAMhD,EAAS1G,EAAUyJ,cAAc,mBAClC/C,IAILA,EAAO1F,aAAeF,EAMtBI,KAAKiJ,oBAAoBnK,EAA0B0G,GACrD,CAKQ,kCAAO0D,CAA4BnF,EAAmByB,GAI5D/B,QAAQkD,IAAI,8CACd,CAKQ,2BAAOwC,CAAqBpF,EAAmByB,GAErD/B,QAAQkD,IAAI,yCACd,CAKQ,qBAAOqC,CAAejF,EAAmBnC,GAC/C,MAAM9C,EAAYC,SAASwJ,cAAc,qBAAqBxE,OAC9D,IAAKjF,EAAW,OAEhB,MAAMsK,EAAUtK,EAAUyJ,cAAc,gBAClCc,EAAevK,EAAUyJ,cAAc,kBAO7C,GALIa,GAAWxH,IACbwH,EAAQtJ,YAAc,GAAG8B,YAIvByH,GAAgBzH,EAAQ,CAE1B,MAAM0H,EAAoBR,KAAKS,IAAK3H,EAAS,IAAQ,IAAK,IAC1DyH,EAAalH,MAAMqH,MAAQ,GAAGF,IAChC,CACF,CAKA,wBAAOG,CAAkB1F,EAAmB2F,GAC1C,MAAM5K,EAAYC,SAASwJ,cAAc,qBAAqBxE,OAC9D,IAAKjF,IAAcA,EAAU0J,aAAa,kBAAmB,OAG7D,MAAMnC,EAASrG,KAAKyI,cAAcC,IAAI3E,GAClCsC,IACFA,EAAOiB,WACPjB,EAAOkB,UACPvH,KAAKyI,cAAckB,OAAO5F,IAI5B,MAAMuC,EAAQtG,KAAK4J,qBAAqBlB,IAAI3E,GACxCuC,IACFc,aAAad,GACbtG,KAAK4J,qBAAqBD,OAAO5F,IAEnC/D,KAAK6J,mBAAmBF,OAAO5F,GAU/BN,QAAQkD,IAAI,4EAGZ7H,EAAUgL,gBAAgB,kBAC1BhL,EAAUiL,UAAUzG,OAAO,aAI3BtD,KAAKgK,mCAGLhK,KAAKiK,oBAAqB,EAG1B,MAAMhC,EAAWnJ,EAAUyJ,cAAc,qBACnCF,EAAavJ,EAAUyJ,cAAc,uBACrCH,EAAWtJ,EAAUyJ,cAAc,qBAErCN,GAAUA,EAAS3E,SACnB+E,GAAYA,EAAW/E,SACvB8E,GAAUA,EAAS9E,SAGvB,MAAMjE,EAAYP,EAAUyJ,cAAc,oBAC1C,GAAIlJ,EAAW,CACbA,EAAUJ,UAAY,kBAEtB,MAAMuG,EAASnG,EAAUkJ,cAAc,mBACvC,GAAI/C,EAAQ,CACVA,EAAOvG,UAAY,eAGnB,MAAMK,EAAW,EAAAC,oBAAoBC,cACrCgG,EAAO9F,UAAYJ,EAASK,OAAO+J,EAAa9J,QAClD,CACF,CAGA,MAAMG,EAASpB,EAAiBsB,kBAAkByJ,GAClD5K,EAAUe,YAAYE,GAGtBjB,EAAUM,aAAa,kBAAmBsK,EAAahL,IAGvDsB,KAAKkK,qBACP,CAKA,0BAAOC,CAAoBpG,GACzB,MAAMsC,EAASrG,KAAKyI,cAAcC,IAAI3E,GAClCsC,GACF5C,QAAQkD,IAAI,6CAA6C5C,KACzDsC,EAAOqB,QAEPjE,QAAQ2G,KAAK,0CAA0CrG,IAE3D,CAKQ,4BAAOsG,CAAsBtG,EAAmBuG,GACtD,MAAMxL,EAAYC,SAASwJ,cAAc,qBAAqBxE,OAC9D,IAAKjF,EAEH,YADA2E,QAAQ2G,KAAK,qCAAqCrG,KAIpD,MAAMmE,EAAUpJ,EAAUyJ,cAAc,0CAClCgC,EAAezL,EAAUyJ,cAAc,kBACvCH,EAAWtJ,EAAUyJ,cAAc,qBAEzC,GAAKL,EAOL,OAFAzE,QAAQkD,IAAI,gCAAgC2D,kBAAsBvG,KAE1DuG,GACN,IAAK,WACHpC,EAAQsC,UAAW,EACnBtC,EAAQxI,UAAY,iBACpBwI,EAAQ3G,MAAQ,yBACZgJ,IACFA,EAAazK,YAAc,6BAGzBsI,IACFA,EAASjG,MAAM2D,QAAU,QAG3B,MAAM2E,EAAoB3L,EAAUyJ,cAAc,uBAC9CkC,IACFA,EAAkBtI,MAAM2D,QAAU,QAEpC,MAEF,IAAK,UACHoC,EAAQsC,UAAW,EACnBtC,EAAQxI,UAAY,cACpBwI,EAAQ3G,MAAQ,+BAChB2G,EAAQjJ,UAAY,sBACpBiJ,EAAQ1F,QAAU,IAAMxC,KAAK0K,kBAAkB3G,GAC3CwG,IACFA,EAAazK,YAAc,oDAGzBsI,IACFA,EAASjG,MAAM2D,QAAU,QAE3B,MAEF,IAAK,aACHoC,EAAQsC,UAAW,EACnBtC,EAAQxI,UAAY,gBACpBwI,EAAQ3G,MAAQ,yBAChB2G,EAAQjJ,UAAY,kBAChBsL,IACFA,EAAazK,YAAc,4BAGzBsI,IACFA,EAASjG,MAAM2D,QAAU,eAlD7BrC,QAAQ2G,KAAK,iCAAiCrG,IAsDlD,CAKQ,oBAAOoE,CAAcpE,GAC3B,IACEN,QAAQkD,IAAI,sDAAsD5C,KAGlE/D,KAAKmK,oBAAoBpG,GAGzB/D,KAAKqK,sBAAsBtG,EAAW,YAEtC,MAAM4G,EAAUhH,OAAeC,WAAcD,OAAeE,mBAC5DJ,QAAQkD,IAAI,2DAA2D5C,KAEvE4G,EAAO7G,YAAY,CACjB3E,KAAM,aACN4E,UAAWA,IAGbN,QAAQkD,IAAI,6CAA6C5C,IAE3D,CAAE,MAAOL,GACPD,QAAQC,MAAM,yCAA0CA,EAC1D,CACF,CAKA,2BAAOkH,CAAqB7G,EAAmBL,GAC7C,MAAM5E,EAAYC,SAASwJ,cAAc,qBAAqBxE,OAC9D,IAAKjF,IAAcA,EAAU0J,aAAa,kBAAmB,OAG7D,MAAMnC,EAASrG,KAAKyI,cAAcC,IAAI3E,GAClCsC,IACFA,EAAOiB,WACPjB,EAAOkB,UACPvH,KAAKyI,cAAckB,OAAO5F,IAI5B,MAAMuC,EAAQtG,KAAK4J,qBAAqBlB,IAAI3E,GACxCuC,IACFc,aAAad,GACbtG,KAAK4J,qBAAqBD,OAAO5F,IAEnC/D,KAAK6J,mBAAmBF,OAAO5F,GAG/B,MAAMwG,EAAezL,EAAUyJ,cAAc,kBACvCL,EAAUpJ,EAAUyJ,cAAc,oBAEpCgC,IACFA,EAAa7K,UAAY,oCACzB6K,EAAapI,MAAM0I,MAAQ,WAGzB3C,IACFA,EAAQ/F,MAAM2D,QAAU,QAI1B,MAAMN,EAAS1G,EAAUyJ,cAAc,mBACnC/C,IACFA,EAAO9F,WAAa,kCAAkCgE,UAE1D,CAKA,0BAAOoH,CAAoB/G,EAAmBgH,GAC5C,MAAMjM,EAAYC,SAASwJ,cAAc,qBAAqBxE,OAC9D,IAAKjF,IAAcA,EAAU0J,aAAa,kBAAmB,OAE7D/E,QAAQkD,IAAI,0CAA2C5C,GAGvD/D,KAAKmK,oBAAoBpG,GAGzB,MAAMsC,EAASrG,KAAKyI,cAAcC,IAAI3E,GAClCsC,GACFA,EAAOiB,WAKTtH,KAAKqK,sBAAsBtG,EAAW,WAGtC,MAAMuB,EAAWxG,EAAUyJ,cAAc,qBACrCjD,IACFA,EAAS5F,UAAY,qEAIvBZ,EAAUM,aAAa,yBAA0B,QAEjDqE,QAAQkD,IAAI,4CAA6C5C,EAC3D,CAKQ,wBAAO2G,CAAkB3G,GAC/B,IACEN,QAAQkD,IAAI,gDAAgD5C,KAG5D/D,KAAKqK,sBAAsBtG,EAAW,cAGtC,MAAMjF,EAAYC,SAASwJ,cAAc,qBAAqBxE,OAC9D,GAAIjF,EAAW,CACb,MAAMwG,EAAWxG,EAAUyJ,cAAc,qBACrCjD,IACFA,EAAS5F,UAAY,+DAIvBZ,EAAUgL,gBAAgB,yBAC5B,CAGA,MAAMzD,EAASrG,KAAKyI,cAAcC,IAAI3E,GAClCsC,IACFA,EAAOE,WAAY,EACnB9C,QAAQkD,IAAI,sDAAsD5C,OAGpDJ,OAAeC,WAAcD,OAAeE,oBACrDC,YAAY,CACjB3E,KAAM,iBACN4E,UAAWA,GAGf,CAAE,MAAOL,GACPD,QAAQC,MAAM,gCAAiCA,EACjD,CACF,CAKQ,0BAAOuF,CAAoBnK,EAAwB0G,GAEzD1G,EAAUqD,MAAM6I,OAAS,OACzBxF,EAAOrD,MAAM6I,OAAS,MAIxB,CAKQ,uCAAOhB,GACb,MAAMiB,EAAoBlM,SAASmM,eAAe,qBAClD,IAAKD,EAAmB,OAExB,MAAME,EAAYF,EAAkBE,UAC9BC,EAAeH,EAAkBG,aAKhBD,EAJFF,EAAkBI,cAIcD,EAAe,MAE9CpL,KAAKsL,iBAEzBL,EAAkBE,UAAYF,EAAkBG,aAChD3H,QAAQkD,IAAI,oDAEZlD,QAAQkD,IAAI,yDAEhB,CAKQ,0BAAO4E,GACb,MAAMN,EAAoBlM,SAASmM,eAAe,qBAC9CD,IAAsBA,EAAkBzC,aAAa,0BACvDyC,EAAkB7L,aAAa,uBAAwB,QAEvD6L,EAAkB1G,iBAAiB,SAAU,KAC3CvE,KAAKsL,iBAAkB,EACvBtL,KAAKwL,eAAiBpL,KAAKE,QAGjC,CAMQ,2BAAOmL,CAAqB3M,EAAwB0G,GAE1D1G,EAAUqD,MAAM6I,OAAS,OAGzBxF,EAAOrD,MAAM6I,OAAS,OAGtBhL,KAAKuL,sBAGL,MAAMN,EAAoBlM,SAASmM,eAAe,qBAClD,GAAID,EAAmB,CACrB,MAAME,EAAYF,EAAkBE,UAC9BC,EAAeH,EAAkBG,aACjCC,EAAeJ,EAAkBI,aAGjCK,EAAmB1L,KAAKsL,iBAAoBlL,KAAKE,MAAQN,KAAKwL,eAAkB,IAGhFG,EAAmBR,EAAYE,GAAkBD,EAAe,EAGjEpL,KAAKiK,qBAAsB0B,GAAoBD,GAOlD1L,KAAK4L,sBAGDF,GAAqBN,EAAeD,EAAYE,EAAgB,MAClErL,KAAKiK,oBAAqB,EAC1BxG,QAAQkD,IAAI,0DAVdsE,EAAkBE,UAAYF,EAAkBG,aAChDpL,KAAKkK,sBAYT,CACF,CAKQ,0BAAO0B,GACb,IAAIC,EAAY9M,SAASmM,eAAe,yBACnCW,IACHA,EAAY9M,SAASC,cAAc,OACnC6M,EAAUnN,GAAK,wBACfmN,EAAU5M,UAAY,mBACtB4M,EAAUnM,UAAY,oBACtBmM,EAAUrJ,QAAU,IAAMxC,KAAK8L,iBAC/B/M,SAASqE,KAAKvD,YAAYgM,IAE5BA,EAAU9B,UAAUgC,IAAI,UAC1B,CAKQ,0BAAO7B,GACb,MAAM2B,EAAY9M,SAASmM,eAAe,yBACtCW,GACFA,EAAU9B,UAAUzG,OAAO,UAE/B,CAKQ,qBAAOwI,GACb,MAAMb,EAAoBlM,SAASmM,eAAe,qBAC9CD,IACFA,EAAkBE,UAAYF,EAAkBG,cAElDpL,KAAKkK,qBACP,CAKA,wBAAO8B,CAAkBvE,GACvBzH,KAAK4I,YAAcnB,EAGnBzH,KAAKyI,cAAczD,QAAQqB,IACzBA,EAAOmB,SAASC,KAGlBhE,QAAQkD,IAAI,8BAA8Bc,IAC5C,CAKA,wBAAOwE,GACL,OAAOjM,KAAK4I,WACd,CAKA,yBAAOsD,GACL,MAAO,CACL,CAAE/G,MAAO,OAAQgH,MAAO,OAAQC,YAAa,8CAC7C,CAAEjH,MAAO,SAAUgH,MAAO,SAAUC,YAAa,+BACjD,CAAEjH,MAAO,OAAQgH,MAAO,OAAQC,YAAa,2BAC7C,CAAEjH,MAAO,UAAWgH,MAAO,UAAWC,YAAa,8BAEvD,EA5nBF,8BACiB,EAAA3D,cAAgB,IAAI4D,IACpB,EAAAzD,YAA6D,SAC7D,EAAA0C,iBAAkB,EAClB,EAAAE,eAAiB,EACjB,EAAA5B,qBAAuB,IAAIyC,IAC3B,EAAAxC,mBAAqB,IAAIwC,IACzB,EAAApC,oBAAqB,C,mEC1kBlC3L,E,MAA0B,GAA4B,KAE1DA,EAAwBE,KAAK,CAACC,EAAOC,GAAI,sn6BAk7CtC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,iDAAiD,MAAQ,GAAG,SAAW,8pXAA8pX,eAAiB,CAAC,un6BAA6n6B,WAAa,MAE/5xC,S,kICn7CA,0BACA,0BAGA,gDACA,8CAiBA,uCAeA,MAAM4N,WAuBJ,WAAAnG,GApBQ,KAAAoG,WAAqB,EACrB,KAAAC,SAWJ,CAAC,EAGG,KAAAC,kBAAyB,KACzB,KAAAC,aAAuB,EACvB,KAAAC,iBAA2B,EAC3B,KAAAC,gBAAoD,UAG1D5M,KAAK2K,OAAS9G,mBAEbF,OAAeC,UAAY5D,KAAK2K,OACjC3K,KAAKsK,MAAQtK,KAAK6M,kBAClB7M,KAAK8M,YACP,CAEQ,eAAAD,GACN,MAAO,CACLE,YAAa,GACbC,aAAc,CACZC,YAAa,EACbC,UAAW,EACXC,aAAc,EACdC,WAAW,IAAIhN,MAAOiN,eAExB7I,gBAAiB,YACjBiB,aAAc,6BACd6H,gBAAgB,EAEpB,CAEQ,UAAAR,GAEN9M,KAAKuN,wBAGuB,YAAxBxO,SAASyO,WACXzO,SAASwF,iBAAiB,mBAAoB,KAC5CvE,KAAKyN,YAGPzN,KAAKyN,SAET,CAEQ,qBAAAF,GACN9J,QAAQkD,IAAI,oCACQ,gBAAA+G,eAAeC,cAGjClK,QAAQkD,IAAI,qDAEZlD,QAAQC,MAAM,kCAElB,CAEQ,OAAA+J,GAENzN,KAAKwM,SAASvB,kBAAoBlM,SAASmM,eAAe,qBAC1DlL,KAAKwM,SAASoB,aAAe7O,SAASmM,eAAe,gBACrDlL,KAAKwM,SAASqB,QAAU9O,SAASmM,eAAe,WAChDlL,KAAKwM,SAASsB,OAAS/O,SAASmM,eAAe,UAC/ClL,KAAKwM,SAASuB,WAAahP,SAASmM,eAAe,cACnDlL,KAAKwM,SAASwB,YAAcjP,SAASmM,eAAe,eACpDlL,KAAKwM,SAASyB,cAAgBlP,SAASmM,eAAe,iBACtDlL,KAAKwM,SAAS0B,gBAAkBnP,SAASmM,eAAe,mBAGxDlL,KAAKmO,+BAGL,sBAAAC,yBAGApO,KAAKqO,sBAGLrO,KAAKsO,uBAGLtO,KAAKuO,YAAY,CAAEpP,KAAM,UACzBa,KAAKuO,YAAY,CAAEpP,KAAM,kBAG3B,CAEQ,mBAAAkP,GAENrO,KAAKwM,SAASqB,SAAStJ,iBAAiB,QAAS,KAC/CvE,KAAKwO,oBAIPxO,KAAKwM,SAASsB,QAAQvJ,iBAAiB,QAAS,KAC9CvE,KAAKyO,yBAIPzO,KAAKwM,SAASoB,cAAcrJ,iBAAiB,UAAYmK,IACzC,UAAVA,EAAEC,KAAoBD,EAAEE,WAC1BF,EAAEG,iBACF7O,KAAKwO,qBAKTxO,KAAKwM,SAASoB,cAAcrJ,iBAAiB,QAAS,KACpDvE,KAAK8O,uBAIP,MAAMC,EAAiBhQ,SAASmM,eAAe,kBAC/C6D,GAAgBxK,iBAAiB,SAAWmK,IAC1C,MAAMM,EAASN,EAAEM,OACjBhP,KAAKuO,YAAY,CACfpP,KAAM,iBACNuC,SAAUsN,EAAO7J,UAKrB,MAAM8J,EAAclQ,SAASmM,eAAe,eAC5C+D,GAAa1K,iBAAiB,SAAWmK,IACvC,MAAMM,EAASN,EAAEM,OACjBhP,KAAKuO,YAAY,CACfpP,KAAM,cACN8C,MAAO+M,EAAO7J,UAKlBnF,KAAKkP,qBACP,CAEQ,mBAAAA,GAGNzL,QAAQkD,IAAI,yDACd,CAEQ,qBAAAwI,GACN1L,QAAQkD,IAAI,qCACZ,MAAMyI,EAAmBrQ,SAASmM,eAAe,oBAEjD,IAAKkE,EAEH,YADA3L,QAAQkD,IAAI,0CAId,MAAM0I,EAAcD,EAAiBrF,UAAUuF,SAAS,aACxD7L,QAAQkD,IAAI,8BAA+B0I,GAEvCA,GACFD,EAAiBrF,UAAUzG,OAAO,aAClCG,QAAQkD,IAAI,kCAEZyI,EAAiBrF,UAAUgC,IAAI,aAC/BtI,QAAQkD,IAAI,kCAId3G,KAAKuO,YAAY,CACfpP,KAAM,yBACNoQ,WAAYF,GAEhB,CAEQ,SAAAG,GAEN,MAAMvE,EAAoBlM,SAASmM,eAAe,qBAC9CD,IACFA,EAAkBvL,UAAY,oVAahCM,KAAKyP,oBAGLzP,KAAKuO,YAAY,CAAEpP,KAAM,aAC3B,CAEQ,oBAAAmP,GACN3K,OAAOY,iBAAiB,UAAYmL,IAClC1P,KAAK2P,uBAAuBD,EAAME,OAEtC,CAEQ,WAAArB,CAAYrP,GAClBc,KAAK2K,OAAO7G,YAAY5E,EAC1B,CAKQ,kBAAA2Q,CAAmB3Q,SACzB,IACEuE,QAAQkD,IAAI,0CAA2CzH,QAAQ4Q,OAAO1K,MAGtE2K,KAAK7Q,QAAQ8Q,QAEbvM,QAAQkD,IAAI,4CACZlD,QAAQkD,IAAI,oBAAqBzH,QAAQ4Q,OAAO1K,KAClD,CAAE,MAAO1B,GACPD,QAAQC,MAAM,wCAAyCA,EACzD,CACF,CAKQ,kBAAAuM,CAAmB/Q,GACzB,IAGE,GAFAuE,QAAQkD,IAAI,oBAAqBzH,EAAQ4Q,OAAO1K,MAE5ClG,EAAQ4Q,OAAOI,aAAc,CAE/B,MAAMC,EAAOpR,SAASqR,gBAChBC,EAAYnR,EAAQ4Q,MAAMI,aAGhCpL,OAAOC,QAAQsL,GAAWrL,QAAQ,EAAEsL,EAAUnL,MAC5CgL,EAAKhO,MAAMoO,YAAYD,EAAUnL,EAAiB,eAI7BpG,SAASyR,iBAAiB,8BAClCxL,QAAQyL,IACrB,MAAMC,EAAUD,EAChBC,EAAQvO,MAAMwO,UAAY,OAC1BD,EAAQE,aACRF,EAAQvO,MAAMwO,UAAY,KAG5BlN,QAAQkD,IAAI,wCAAyCzH,EAAQ4Q,MAAM1K,KACrE,CACF,CAAE,MAAO1B,GACPD,QAAQC,MAAM,0BAA2BA,EAC3C,CACF,CAEQ,eAAA8K,GACN,MAAMtP,EAAUc,KAAKwM,SAASoB,cAAczI,MAAMkC,OAElD,IAAKnI,GAAWc,KAAKsK,MAAMgD,eACzB,OAIF,MAAMuD,EAAqB7Q,KAAKwM,SAAS0B,iBAAiB4C,UAAW,EAErErN,QAAQkD,IAAI,sCAAsCkK,KAGlD,MAAME,EAAUF,EACZ,CAAE1R,KAAM,uBAAwBS,QAASV,GACzC,CAAEC,KAAM,cAAeS,QAASV,GAEpCc,KAAKuO,YAAYwC,GAGb/Q,KAAKwM,SAASoB,eAChB5N,KAAKwM,SAASoB,aAAazI,MAAQ,GACnCnF,KAAK8O,qBAET,CAEQ,kBAAAA,GACF9O,KAAKwM,SAASoB,eAChB5N,KAAKwM,SAASoB,aAAazL,MAAM6I,OAAS,OAC1ChL,KAAKwM,SAASoB,aAAazL,MAAM6I,OAC/BlC,KAAKS,IAAIvJ,KAAKwM,SAASoB,aAAaxC,aAAc,KAAO,KAE/D,CAEQ,sBAAAuE,CAAuBzQ,GAC7B,OAAQA,EAAQC,MACd,IAAK,cACHa,KAAKgR,WAAW9R,EAAQA,SACxB,MAEF,IAAK,YACHc,KAAKgR,WAAW9R,EAAQA,SACxBc,KAAKiR,mBAAmB/R,EAAQA,QAAQ0C,OAAQ1C,EAAQA,QAAQ4C,MAChE9B,KAAKsK,MAAMgD,gBAAiB,EAC5B,MAEF,IAAK,aACHtN,KAAKkR,aAAahS,EAAQiS,UAC1BnR,KAAKsK,MAAMgD,eAAiBpO,EAAQiS,SACpC,MAEF,IAAK,QACHnR,KAAKoR,UAAUlS,EAAQA,SACvBc,KAAKsK,MAAMgD,gBAAiB,EAC5B,MAEF,IAAK,gBACHtN,KAAKqR,gBACLrR,KAAKyP,oBACL,MAEF,IAAK,cACHzP,KAAKsR,YAAYpS,EAAQqS,SACzB,MAEF,IAAK,iBACHvR,KAAKwR,qBAAqBtS,GAC1B,MAEF,IAAK,iBACHc,KAAKyR,cAAcvS,EAAQ6E,WAC3B,MAEF,IAAK,qBACH/D,KAAK0R,eAAexS,EAAQyS,aAAczS,EAAQ0S,YAClD,MAEF,IAAK,wBACH5R,KAAKmP,wBACL,MAEF,IAAK,kBACHnP,KAAK6R,gBAAgB3S,EAAQ4S,MAC7B,MAEF,IAAK,sBACH9R,KAAK+R,oBAAoB7S,EAAQ8S,WACjC,MAEF,IAAK,sBACHhS,KAAKiS,sBACL,MAEF,IAAK,cACHjS,KAAKkS,kBAAkBhT,EAAQiT,QAC/B,MAEF,IAAK,gBACHnS,KAAKoS,oBAAoBlT,EAAQ6E,WACjC,MAGF,IAAK,cACH/D,KAAKqS,sBAAsBnT,EAAQ6E,WACnC,MAEF,IAAK,cACH/D,KAAKsS,uBAAuBpT,EAAQ6E,UAAW7E,EAAQwH,MAAOxH,EAAQ0C,QACtE,MAEF,IAAK,iBACH5B,KAAKuS,yBAAyBrT,EAAQ6E,UAAW7E,EAAQwK,cACzD,MAEF,IAAK,cACH1J,KAAK4K,qBAAqB1L,EAAQ6E,UAAW7E,EAAQwE,OACrD,MAEF,IAAK,gBACH1D,KAAK8K,oBAAoB5L,EAAQ6E,UAAW7E,EAAQ6L,gBACpD,MAEF,IAAK,YAEH/K,KAAK6P,mBAAmB3Q,GACxB,MAEF,IAAK,eAEHc,KAAKiQ,mBAAmB/Q,GACxB,MAEF,IAAK,qBACHc,KAAKwS,yBAAyBtT,GAC9B,MAEF,IAAK,oBACHc,KAAKyS,wBAAwBvT,GAC7B,MAEF,IAAK,kBAEHc,KAAKuM,UAAYrN,EAAQqN,UACzB9I,QAAQkD,IAAI,yBAA0B3G,KAAKuM,WAC3C,MAEF,QACE9I,QAAQ2G,KAAK,wBAAyBlL,EAAQC,MAEpD,CAKQ,uBAAAuT,GAEN1S,KAAKuO,YAAY,CACfpP,KAAM,uBAERsE,QAAQkD,IAAI,0CACd,CAKQ,eAAAkL,CAAgBC,GACtB,GAAI9R,KAAKwM,SAASoB,cAAgBkE,EAAM,CAEtC,MAAMa,EAAe3S,KAAKwM,SAASoB,aAAazI,MAC1CyN,EAAWD,EAAe,GAAGA,KAAgBb,IAASA,EAC5D9R,KAAKwM,SAASoB,aAAazI,MAAQyN,EAGnC5S,KAAK8O,qBAGL9O,KAAKwM,SAASoB,aAAaiF,QAG3B7S,KAAKwM,SAASoB,aAAakF,kBAAkBF,EAAS7L,OAAQ6L,EAAS7L,QAEvEtD,QAAQkD,IAAI,0BAA2BmL,EACzC,CACF,CAKQ,mBAAAC,CAAoBC,GAE1B,MAAMrB,EAAY5R,SAASmM,eAAe,2BACtCyF,IACFA,EAAUxO,MAAM2D,QAAU,QAI5B,MAAM8H,EAAe7O,SAASmM,eAAe,gBACzC0C,IACFA,EAAa7D,UAAUgC,IAAI,aAC3B6B,EAAamF,YAAc,gBAG7B/S,KAAK0M,YAAcsF,EACnBhS,KAAKgT,uBAELvP,QAAQkD,IAAI,sCACd,CAKQ,mBAAAsL,GAEN,MAAMtB,EAAY5R,SAASmM,eAAe,2BACtCyF,IACFA,EAAUxO,MAAM2D,QAAU,QAI5B,MAAM8H,EAAe7O,SAASmM,eAAe,gBACzC0C,IACFA,EAAa7D,UAAUzG,OAAO,aAC9BsK,EAAamF,YAAc,uCAG7B/S,KAAK0M,aAAc,EACnB1M,KAAKgT,uBAELvP,QAAQkD,IAAI,uCACd,CAKO,kBAAAsM,GACDjT,KAAK0M,cAEP1M,KAAKuO,YAAY,CACfpP,KAAM,uBAERsE,QAAQkD,IAAI,gDAEhB,CAKQ,aAAA8K,CAAc1N,GACpB,MAAMjF,EAAYC,SAASwJ,cAAc,qBAAqBxE,OAC1DjF,IACFA,EAAUwE,SAEVtD,KAAKsK,MAAMyC,YAAc/M,KAAKsK,MAAMyC,YAAYmG,OAAOC,GAAOA,EAAIzU,KAAOqF,GAE7E,CAKQ,cAAA2N,CAAeC,EAAsBC,GAC3C,MAAMwB,EAAerU,SAASwJ,cAAc,qBAAqBoJ,OACjE,GAAIyB,EAAc,CAChB,MAAMC,EAAe,aAAA1U,iBAAiBC,OAAO,CAAEM,QAAS0S,IACxDwB,EAAaE,YAAYC,aAAaF,EAAcD,GAGpD,MAAMI,EAAQxT,KAAKsK,MAAMyC,YAAY0G,UAAUN,GAAOA,EAAIzU,KAAOiT,IAClD,IAAX6B,IACFxT,KAAKsK,MAAMyC,YAAYyG,GAAS5B,EAEpC,CACF,CAKQ,iBAAAnC,GACNzP,KAAKsK,MAAM0C,aAAe,CACxBC,YAAa,EACbC,UAAW,EACXC,aAAc,EACdC,WAAW,IAAIhN,MAAOiN,eAGpBrN,KAAKwM,SAASyB,gBAChBjO,KAAKwM,SAASyB,cAAcnO,YAAc,KAGxCE,KAAKwM,SAASwB,cAChBhO,KAAKwM,SAASwB,YAAYlO,YAAc,SAI1C,MAAM4T,EAAY3U,SAASmM,eAAe,kBACtCwI,GACFA,EAAUpQ,QAEd,CAEQ,UAAA0N,CAAW9R,GACjB,IAAKc,KAAKwM,SAASvB,kBAAmB,OAEtC,MAAMnM,EAAY,aAAAH,iBAAiBC,OAAO,CAAEM,YAC5Cc,KAAKwM,SAASvB,kBAAkBpL,YAAYf,GAC5CkB,KAAK8L,iBAGL9L,KAAKsK,MAAMyC,YAAYvO,KAAKU,EAC9B,CAEQ,YAAAgS,CAAayC,GACd3T,KAAKwM,SAASoH,oBACjB5T,KAAKwM,SAASoH,kBAAoB,aAAAC,2BAA2BjV,SAC7DoB,KAAKwM,SAASvB,mBAAmBpL,YAAYG,KAAKwM,SAASoH,oBAG7D5T,KAAKwM,SAASoH,kBAAkBzR,MAAM2D,QAAU6N,EAAO,OAAS,OAC5DA,GACF3T,KAAK8L,gBAET,CAEQ,SAAAsF,CAAU1N,GAChB,IAAK1D,KAAKwM,SAASvB,kBAAmB,OAEtC,MAAM6I,EAAU/U,SAASC,cAAc,OACvC8U,EAAQ7U,UAAY,gBACpB6U,EAAQhU,YAAc4D,EAEtB1D,KAAKwM,SAASvB,kBAAkBpL,YAAYiU,GAC5C9T,KAAK8L,iBAGLzI,WAAW,KACLyQ,EAAQR,YACVQ,EAAQR,WAAWS,YAAYD,IAEhC,IACL,CAEQ,aAAAzC,GACN,IAAKrR,KAAKwM,SAASvB,kBAAmB,OAGtC,MAAM+I,EAAahU,KAAKwM,SAASvB,kBAAkB1C,cAAc,oBACjEvI,KAAKwM,SAASvB,kBAAkBvL,UAAY,GACxCsU,GACFhU,KAAKwM,SAASvB,kBAAkBpL,YAAYmU,GAG9ChU,KAAKsK,MAAMyC,YAAc,EAC3B,CAEQ,WAAAuE,CAAYC,GAClBvR,KAAKqR,gBACLE,EAAQvM,QAAQmO,GAAOnT,KAAKgR,WAAWmC,IACvCnT,KAAKsK,MAAMyC,YAAc,IAAIwE,EAC/B,CAEQ,oBAAAC,CAAqB5B,GAE3B,IAAKA,EAEH,YADAnM,QAAQ2G,KAAK,2CAIf,IAAKwF,EAAKpL,gBAGR,OAFAf,QAAQ2G,KAAK,sCAAuCwF,QACpDnM,QAAQ2G,KAAK,2BAA4BtF,OAAOmP,KAAKrE,IAIvD,IAAKA,EAAKnL,UAER,YADAhB,QAAQ2G,KAAK,gCAAiCwF,GAKhD5P,KAAKkU,yBAAyBtE,EAAKnL,UAAWmL,EAAKpL,iBAGnD,MAAM2P,EAAsBvE,EAAKnL,UAAUmL,EAAKpL,iBAChD,IAAK2P,EAEH,YADA1Q,QAAQ2G,KAAK,yCAA0CwF,EAAKpL,iBAK9DxE,KAAKoU,oBAAoBD,EAAqBvE,EAAKnK,cAGnD,MAAM4O,EAAkBtV,SAASmM,eAAe,mBAC1CoJ,EAAavV,SAASmM,eAAe,cAEvCmJ,GAAmBC,IACjBH,EAAoBI,WACtBF,EAAgBpV,UAAY,mBAC5BqV,EAAWxU,YAAc,UAEzBuU,EAAgBpV,UAAY,yBAC5BqV,EAAWxU,YAAc,cAG/B,CAEQ,wBAAAoU,CAAyBzP,EAAgBD,GAC/C,MAAMuK,EAAiBhQ,SAASmM,eAAe,kBAC1C6D,GAMLA,EAAerP,UAAY,GAG3BoF,OAAOC,QAAQN,GAAWO,QAAQ,EAAEC,EAAYuP,MAC9C,MAAMC,EAAS1V,SAASC,cAAc,UACtCyV,EAAOtP,MAAQF,EACfwP,EAAO3U,YAAc0U,EAAapP,MAAQH,EAEtCA,IAAeT,IACjBiQ,EAAOpP,UAAW,GAGpB0J,EAAelP,YAAY4U,MAjB3BhR,QAAQ2G,KAAK,uCAqBjB,CAEQ,mBAAAgK,CAAoB1S,EAAe+D,GACzC,MAAMwJ,EAAclQ,SAASmM,eAAe,eAC5C,GAAK+D,EAAL,CAGA,IAAKvN,IAAaA,EAASgE,SAAWgP,MAAMC,QAAQjT,EAASgE,QAG3D,OAFAjC,QAAQ2G,KAAK,+CAAgD1I,QAC7DuN,EAAYvP,UAAY,iDAK1BuP,EAAYvP,UAAY,GAGxBgC,EAASgE,OAAOV,QAAS/C,IACvB,MAAMwS,EAAS1V,SAASC,cAAc,UACtCyV,EAAOtP,MAAQlD,EACfwS,EAAO3U,YAAcE,KAAK4F,oBAAoB3D,GAC1CA,IAAUwD,IACZgP,EAAOpP,UAAW,GAEpB4J,EAAYpP,YAAY4U,IApBF,CAsB1B,CAEQ,mBAAA7O,CAAoB3D,GAc1B,MAb2C,CACzC,6BAA8B,oBAC9B,2BAA4B,kBAC5B,4BAA6B,mBAC7B,0BAA2B,iBAC3B,QAAS,QACT,cAAe,cACf,gBAAiB,gBACjB,gBAAiB,gBACjB,iBAAkB,iBAClB,OAAU,SACV,YAAa,aAEGA,IAAUA,CAC9B,CAEQ,kBAAAgP,CAAmBrP,EAAiB,EAAGE,EAAe,GAC5D9B,KAAKsK,MAAM0C,aAAaC,aAAerL,EACvC5B,KAAKsK,MAAM0C,aAAaE,WAAapL,EACrC9B,KAAKsK,MAAM0C,aAAaG,cAAgB,EAEpCnN,KAAKwM,SAASyB,gBAChBjO,KAAKwM,SAASyB,cAAcnO,YAAcE,KAAKsK,MAAM0C,aAAaC,YAAYzL,kBAG5ExB,KAAKwM,SAASwB,cAChBhO,KAAKwM,SAASwB,YAAYlO,YAAc,IAAME,KAAKsK,MAAM0C,aAAaE,UAAUlL,QAAQ,IAI1FhC,KAAK4U,sBACP,CAKQ,oBAAAA,GACN,IAAIlB,EAAY3U,SAASmM,eAAe,kBACxC,IAAKwI,EAAW,CAEdA,EAAY3U,SAASC,cAAc,OACnC0U,EAAUhV,GAAK,iBACfgV,EAAUzU,UAAY,kBAGtB,MAAM4V,EAAc9V,SAASmM,eAAe,eACxC2J,GAAeA,EAAYvB,YAC7BuB,EAAYvB,WAAWwB,aAAapB,EAAWmB,EAAYE,YAE/D,CAEA,MAAMC,EAAkBhV,KAAKiV,qBACvBC,EAAoBlV,KAAKsK,MAAM0C,aAAaG,aAAe,GAC5DnN,KAAKsK,MAAM0C,aAAaE,UAAYlN,KAAKsK,MAAM0C,aAAaG,cAAcnL,QAAQ,GACnF,SAEJ0R,EAAUhU,UAAY,0CACaM,KAAKsK,MAAM0C,aAAaG,mEAEjD6H,gDAECE,wBAEb,CAKQ,kBAAAD,GACN,MAAM7H,EAAY,IAAIhN,KAAKJ,KAAKsK,MAAM0C,aAAaI,WAE7C+H,GADM,IAAI/U,MACGM,UAAY0M,EAAU1M,UACnC0U,EAAWtM,KAAKuM,MAAMF,EAAS,KAErC,OAAIC,EAAW,GACN,GAAGA,KAIH,GAFOtM,KAAKuM,MAAMD,EAAW,QACvBA,EAAW,KAG5B,CAEQ,cAAAtJ,GACNzI,WAAW,KACLrD,KAAKwM,SAASvB,oBAChBjL,KAAKwM,SAASvB,kBAAkBE,UAAYnL,KAAKwM,SAASvB,kBAAkBG,eAE7E,IACL,CAKQ,2BAAA+C,GAEN,MAAMmH,EAAqB3R,OAAe2R,mBAAsB3R,OAAe4R,wBAE/E,IAAKD,EAQH,OAPA7R,QAAQkD,IAAI,uDACZ3G,KAAK2M,iBAAkB,EACnB3M,KAAKwM,SAASsB,SAChB9N,KAAKwM,SAASsB,OAAOtD,UAAW,EAChCxK,KAAKwM,SAASsB,OAAOvM,MAAQ,kDAE/BvB,KAAKwV,eAAe,4FAA4F,GAIlHxV,KAAK2M,iBAAkB,EACvB3M,KAAKyM,kBAAoB,IAAI6I,EAG7BtV,KAAKyM,kBAAkBgJ,YAAa,EACpCzV,KAAKyM,kBAAkBiJ,gBAAiB,EACxC1V,KAAKyM,kBAAkBkJ,KAAO,QAG9B3V,KAAKyM,kBAAkBmJ,QAAU,KAC/BnS,QAAQkD,IAAI,iCACZ3G,KAAK0M,aAAc,EACnB1M,KAAKgT,wBAGPhT,KAAKyM,kBAAkBoJ,SAAYnG,IACjC,IAAIoG,EAAkB,GAClBC,EAAoB,GAExB,IAAK,IAAIxX,EAAImR,EAAMsG,YAAazX,EAAImR,EAAMuG,QAAQlP,OAAQxI,IAAK,CAC7D,MAAM2X,EAAaxG,EAAMuG,QAAQ1X,GAAG,GAAG2X,WACnCxG,EAAMuG,QAAQ1X,GAAG4X,QACnBL,GAAmBI,EAEnBH,GAAqBG,CAEzB,CAGA,GAAIlW,KAAKwM,SAASoB,aAAc,CAC9B,MACMgF,EADe5S,KAAKwM,SAASoB,aAAazI,MAChB2Q,EAChC9V,KAAKwM,SAASoB,aAAazI,MAAQyN,EAG/BmD,IACF/V,KAAKwM,SAASoB,aAAamF,YAAc,eAAegD,MAG1D/V,KAAK8O,oBACP,GAGF9O,KAAKyM,kBAAkB2J,QAAW1G,IAChCjM,QAAQC,MAAM,+BAAgCgM,EAAMhM,OACpD1D,KAAK0M,aAAc,EACnB1M,KAAKgT,uBAEL,IAAIqD,EAAe,0BACfC,GAAuB,EAE3B,OAAQ5G,EAAMhM,OACZ,IAAK,YACH2S,EAAe,iEACf,MACF,IAAK,gBACHA,EAAe,sEACfC,GAAuB,EACvBtW,KAAK4M,gBAAkB,SACvB,MACF,IAAK,cACHyJ,EAAe,sFACfC,GAAuB,EACvBtW,KAAK4M,gBAAkB,SACvB,MACF,IAAK,UACHyJ,EAAe,wEACf,MACF,IAAK,sBACHA,EAAe,oEACf,MACF,QACEA,EAAe,6BAA6B3G,EAAMhM,2BAGtD1D,KAAKwV,eAAea,EAAcC,IAGpCtW,KAAKyM,kBAAkB8J,MAAQ,KAC7B9S,QAAQkD,IAAI,+BACZ3G,KAAK0M,aAAc,EACnB1M,KAAKgT,uBAGDhT,KAAKwM,SAASoB,eAChB5N,KAAKwM,SAASoB,aAAamF,YAAc,wCAI7CtP,QAAQkD,IAAI,kDAGoB,oBAArB9C,kBACTJ,QAAQkD,IAAI,mEAEhB,CAKQ,0BAAM8H,GAEZzO,KAAKwW,iBAEDxW,KAAK0M,aAEP1M,KAAKuO,YAAY,CACfpP,KAAM,uBAERsE,QAAQkD,IAAI,6DAGZ3G,KAAKyW,2BAET,CAKQ,oBAAAzD,GACDhT,KAAKwM,SAASsB,QAGnB9N,KAAKuO,YAAY,CAAEpP,KAAM,kBAC3B,CAKQ,iBAAA+S,CAAkBC,GACxB,IAAKA,EAAQ,OAGb,MAAMuE,EAAiBvE,EAAOwE,QAAQC,MAAQzE,EAAOwE,QAAQE,QAAU1E,EAAOwE,QAAQG,OAGtF9W,KAAK+W,4BAA4B5E,EAAO6E,QAASN,EACnD,CAKQ,2BAAAK,CAA4BE,EAAuBP,GACzD,GAAK1W,KAAKwM,SAASsB,OAAnB,CAEA,IAAKmJ,EAKH,OAHAjX,KAAKwM,SAASsB,OAAOtD,UAAW,EAChCxK,KAAKwM,SAASsB,OAAO/D,UAAUzG,OAAO,kBACtCtD,KAAKwM,SAASsB,OAAOvM,MAAQ,uDAI/B,IAAKmV,EAKH,OAHA1W,KAAKwM,SAASsB,OAAOtD,UAAW,EAChCxK,KAAKwM,SAASsB,OAAO/D,UAAUzG,OAAO,kBACtCtD,KAAKwM,SAASsB,OAAOvM,MAAQ,gEAK/BvB,KAAKwM,SAASsB,OAAOtD,UAAW,EAE5BxK,KAAK0M,aAEP1M,KAAKwM,SAASsB,OAAO/D,UAAUgC,IAAI,aACnC/L,KAAKwM,SAASsB,OAAOvM,MAAQ,mCAG7BvB,KAAKwM,SAASsB,OAAO/D,UAAUzG,OAAO,aACT,WAAzBtD,KAAK4M,gBACP5M,KAAKwM,SAASsB,OAAOvM,MAAQ,iDAE7BvB,KAAKwM,SAASsB,OAAOvM,MAAQ,yCA/BA,CAkCnC,CAKQ,cAAAiU,CAAetW,EAAiBoX,GAAgC,GAGtE,GAFA7S,QAAQC,MAAM,kBAAmBxE,IAE5Bc,KAAKwM,SAASuB,WAAY,OAE/B,MAAMmJ,EAAYlX,KAAKwM,SAASuB,WAAWxF,cAAc,eACnD4O,EAAcnX,KAAKwM,SAASuB,WAAWxF,cAAc,iBAEvD2O,IACFA,EAAUpX,YAAcZ,GAGtBiY,IACEb,GACFa,EAAYhV,MAAM2D,QAAU,QAC5BqR,EAAYrX,YAAc,oBAC1BqX,EAAY3U,QAAU,IAAMxC,KAAKoX,+BAEjCD,EAAYhV,MAAM2D,QAAU,QAIhC9F,KAAKwM,SAASuB,WAAW5L,MAAM2D,QAAU,QAGpCwQ,GACHjT,WAAW,KACTrD,KAAKwW,kBACJ,IAEP,CAKQ,cAAAA,GACFxW,KAAKwM,SAASuB,aAChB/N,KAAKwM,SAASuB,WAAW5L,MAAM2D,QAAU,OAE7C,CAKQ,iCAAMsR,GACZ,IAOE,GANA3T,QAAQkD,IAAI,0CAGZ3G,KAAKwV,eAAe,gDAAgD,GAGhE1S,UAAUuU,cAAgBvU,UAAUuU,aAAaC,aACnD,IAwBE,OAvBA7T,QAAQkD,IAAI,6DAGS7D,UAAUuU,aAAaC,aAAa,CACvDC,MAAO,CACLC,kBAAkB,EAClBC,kBAAkB,EAClBC,iBAAiB,MAKdC,YAAY3S,QAAQ4S,GAASA,EAAMlQ,QAE1C1H,KAAK4M,gBAAkB,UACvB5M,KAAKwW,iBACLxW,KAAKgT,uBAELvP,QAAQkD,IAAI,qDACZ3G,KAAKwV,eAAe,kFAAkF,QAGtGnS,WAAW,IAAMrD,KAAKwW,iBAAkB,IAG1C,CAAE,MAAOqB,GAGP,GAFApU,QAAQkD,IAAI,0BAA2BkR,EAAezS,KAAMyS,EAAe3Y,SAE/C,oBAAxB2Y,EAAezS,KAIjB,OAFApF,KAAKwV,eAAe,gFAAgF,QACpGxV,KAAKyW,2BAGT,CAIF,GAAIzW,KAAKyM,kBACP,IACEhJ,QAAQkD,IAAI,+CAGZ,MAAMmR,EAAiB,IAAIC,QAAQ,CAACC,EAASC,KAC3C,MAAMC,EAAU7U,WAAW,KACzB4U,EAAO,IAAIE,MAAM,6BAChB,KAEHnY,KAAKyM,kBAAkBmJ,QAAU,KAC/BxO,aAAa8Q,GACblY,KAAKyM,kBAAkB/E,OACvBsQ,EAAQ,YAGVhY,KAAKyM,kBAAkB2J,QAAW1G,IAChCtI,aAAa8Q,GACbD,EAAOvI,IAGT1P,KAAKyM,kBAAkB2L,UAczB,aAXMN,EAEN9X,KAAK4M,gBAAkB,UACvB5M,KAAKwW,iBACLxW,KAAKgT,uBAELvP,QAAQkD,IAAI,gDACZ3G,KAAKwV,eAAe,sEAAsE,QAG1FnS,WAAW,IAAMrD,KAAKwW,iBAAkB,IAG1C,CAAE,MAAO6B,GACP5U,QAAQkD,IAAI,gDAAiD0R,EAC/D,CAIFrY,KAAKwV,eAAe,gFAAgF,GACpGxV,KAAKyW,2BAEP,CAAE,MAAO/S,GACPD,QAAQC,MAAM,gCAAiCA,GAC/C1D,KAAKwV,eAAe,gFAAgF,GACpGxV,KAAKyW,2BACP,CACF,CAKQ,yBAAAA,GAENzW,KAAKuO,YAAY,CACfpP,KAAM,wBAERsE,QAAQkD,IAAI,mDACd,CAKQ,mBAAAyL,CAAoBrO,GAE1B,MAAMjF,EAAYC,SAASwJ,cAAc,qBAAqBxE,OAC9D,IAAKjF,EAAW,OAGhB,MAAM8D,EAAY9D,EAAUyJ,cAAc,8BAC1C,IAAK3F,EAAW,OAGhB,MAAM0V,EAAe1V,EAAU9C,YAC/B8C,EAAU9C,YAAc,eACxB8C,EAAUT,MAAMoW,WAAa,2BAC7B3V,EAAUT,MAAMqW,YAAc,qBAG9B,MAAMC,EAAY1Z,SAASC,cAAc,UACzCyZ,EAAUxZ,UAAY,qBACtBwZ,EAAU3Y,YAAc,WACxB2Y,EAAUtW,MAAM0I,MAAQ,qBACxB4N,EAAUtW,MAAMqW,YAAc,0BAC9BC,EAAUtW,MAAMoW,WAAa,0BAG7B3V,EAAU0Q,YAAYwB,aAAa2D,EAAW7V,EAAUmS,aAwBxDnS,EAAUJ,QArBa,KACrBxC,KAAKuO,YAAY,CACfpP,KAAM,gBACN4E,UAAWA,IAEbnB,EAAU9C,YAAcwY,EACxB1V,EAAUT,MAAMoW,WAAa,GAC7B3V,EAAUT,MAAMqW,YAAc,GAC9B5V,EAAUJ,QAAU,IAAMxC,KAAKoS,oBAAoBrO,GACnD0U,EAAUnV,UAaZmV,EAAUjW,QATY,KACpBI,EAAU9C,YAAcwY,EACxB1V,EAAUT,MAAMoW,WAAa,GAC7B3V,EAAUT,MAAMqW,YAAc,GAC9B5V,EAAUJ,QAAU,IAAMxC,KAAKoS,oBAAoBrO,GACnD0U,EAAUnV,SAKd,CAKQ,qBAAA+O,CAAsBtO,GAC5B,IAAK/D,KAAKwM,SAASvB,kBAAmB,OAGtCjL,KAAKkR,cAAa,GAGlB,MAAMwH,EAAc,aAAA1Q,0BAA0BpJ,OAAOmF,GACrD/D,KAAKwM,SAASvB,kBAAkBpL,YAAY6Y,GAG5C1Y,KAAKsK,MAAMgD,gBAAiB,EAG5BtN,KAAK8L,iBAELrI,QAAQkD,IAAI,gCAAiC5C,EAC/C,CAKQ,sBAAAuO,CAAuBvO,EAAmB2C,EAAe9E,GAC/D,aAAAoG,0BAA0BM,cAAcvE,EAAW2C,EAAO9E,GAMtD5B,KAAKuM,WACP9I,QAAQkD,IAAI,gCAAiC5C,EAAW,gBAAiB2C,EAAMK,OAAQ,UAAWnF,EAEtG,CAKQ,wBAAA2Q,CAAyBxO,EAAmB2F,GAElD,aAAA1B,0BAA0ByB,kBAAkB1F,EAAW2F,GAGvD1J,KAAKiR,mBAAmBvH,EAAa9H,OAAQ8H,EAAa5H,MAG1D9B,KAAKsK,MAAMgD,gBAAiB,EAC5BtN,KAAKsK,MAAMyC,YAAYvO,KAAKkL,GAG5B1J,KAAK8L,iBAELrI,QAAQkD,IAAI,kCAAmC5C,EAAW,gBAAiB2F,EAAa9H,OAC1F,CAKQ,oBAAAgJ,CAAqB7G,EAAmBL,GAC9C,aAAAsE,0BAA0B4C,qBAAqB7G,EAAWL,GAG1D1D,KAAKsK,MAAMgD,gBAAiB,EAE5B7J,QAAQC,MAAM,kCAAmCK,EAAWL,EAC9D,CAKQ,mBAAAoH,CAAoB/G,EAAmBgH,GAC7C,aAAA/C,0BAA0B8C,oBAAoB/G,EAAWgH,GAGzD/K,KAAKsK,MAAMgD,gBAAiB,EAE5B7J,QAAQkD,IAAI,iCAAkC5C,EAChD,CAKQ,wBAAAyO,CAAyBtT,GAC/BuE,QAAQkD,IAAI,2BAA4BzH,GAGxC,MAAMyZ,EAA0B,CAC9Bja,GAAI,OAAO0B,KAAKE,QAChBnB,KAAM,YACNS,QAASI,KAAK4Y,gBAAgB1Z,EAAQ2Z,UAAW3Z,EAAQ4Z,QACzDzY,WAAW,IAAID,MAAOiN,cACtBzL,OAAQ,EACRE,KAAM,GAGR9B,KAAKgR,WAAW2H,GAChB3Y,KAAK8L,gBACP,CAKQ,uBAAA2G,CAAwBvT,GAC9BuE,QAAQC,MAAM,0BAA2BxE,GAGzC,MAAMmX,EAA4B,CAChC3X,GAAI,aAAa0B,KAAKE,QACtBnB,KAAM,YACNS,QAAS,gDAAgDV,EAAQ2Z,UAAUzM,6BAA6BlN,EAAQwE,QAChHrD,WAAW,IAAID,MAAOiN,cACtBzL,OAAQ,EACRE,KAAM,GAGR9B,KAAKgR,WAAWqF,GAChBrW,KAAK8L,gBACP,CAKQ,eAAA8M,CAAgBC,EAAgBC,GACtC,OAAQD,EAAU1Z,MAChB,IAAK,aACH,OAAOa,KAAK+Y,gBAAgBD,GAC9B,IAAK,aACH,OAAO9Y,KAAKgZ,gBAAgBF,GAC9B,IAAK,WACH,OAAO9Y,KAAKiZ,cAAcH,GAC5B,QACE,MAAO,OAAOD,EAAUzM,gCAAgC8M,KAAKC,UAAUL,EAAQ,KAAM,aAE3F,CAKQ,eAAAC,CAAgBD,GACtB,IAAKA,EAAOM,QACV,MAAO,8BAA8BN,EAAO5Z,SAAW4Z,EAAOpV,QAGhE,MAAMyO,EAAS2G,EAAOA,OACtB,IAAIlZ,EAAU,mCAEd,IAAKuS,EAAOkH,OAEV,OADAzZ,GAAW,yBACJA,EAMT,GAHAA,GAAW,kBAAkBuS,EAAOmH,WACpC1Z,GAAW,mBAAmBuS,EAAOoH,QAAQxS,qBAEzCoL,EAAOoH,QAAQxS,OAAS,EAAG,CAC7BnH,GAAW,wBACX,IAAK,MAAM4Z,KAAUrH,EAAOoH,QAE1B3Z,GAAW,GADoB,MAAlB4Z,EAAOrH,OAAiB,KAAyB,MAAlBqH,EAAOrH,OAAiB,IAAwB,MAAlBqH,EAAOrH,OAAiB,IAAM,OAClFqH,EAAOC,SAASD,EAAOrH,WAEjD,MACEvS,GAAW,4BAGb,OAAOA,CACT,CAKQ,eAAAoZ,CAAgBF,GACtB,OAAKA,EAAOM,QAIL,0CAA0CN,EAAOA,OAAOY,wBAAwBZ,EAAOA,OAAO5Z,uBAAuB4Z,EAAOA,OAAOa,MAAM5S,iBAHvI,8BAA8B+R,EAAO5Z,SAAW4Z,EAAOpV,OAIlE,CAKQ,aAAAuV,CAAcH,GACpB,OAAKA,EAAOM,QAIL,wCAAwCN,EAAOA,OAAOQ,uBAAuBR,EAAOA,OAAOc,SAHzF,4BAA4Bd,EAAO5Z,SAAW4Z,EAAOpV,OAIhE,EAIF,IAAI4I,WAIJ,MAAMhN,SAAW,oBAAAC,oBAAoBC,cAC/Bqa,aAAe,skBA4BfC,SAAWxa,SAASK,OAAOka,a,oLCj9CjC,gBACA,aACA,aAKA,uBAKE,wBAAOE,GACL,IACE,MAAMF,EAAe,kJAYfG,GAAO,IAAAC,QAAOJ,GAGpB,OAFApW,QAAQkD,IAAI,iCACZlD,QAAQkD,IAAI,kBAAmBqT,IACxB,CACT,CAAE,MAAOtW,GAEP,OADAD,QAAQC,MAAM,2BAA4BA,IACnC,CACT,CACF,CAKA,6BAAOwW,GACL,IACE,MAAM/V,EAAO,mHAOPgW,EAAc,UAAKC,UAAUjW,EAAM,CAAEC,SAAU,eAGrD,OAFAX,QAAQkD,IAAI,8BACZlD,QAAQkD,IAAI,oBAAqBwT,EAAYhV,QACtC,CACT,CAAE,MAAOzB,GAEP,OADAD,QAAQC,MAAM,8BAA+BA,IACtC,CACT,CACF,CAKA,wBAAO2W,GACL,IACE,MAAMC,EAAgB,4IAMhBC,EAAY,UAAUC,SAASF,GACrC7W,QAAQkD,IAAI,2BACZlD,QAAQkD,IAAI,kBAAmB4T,GAG/B,MAAME,EAAYF,EAAUG,SAAS,YAC/BC,EAAaJ,EAAUG,SAAS,WAEtC,OAAID,IAAaE,IACflX,QAAQC,MAAM,qDACP,EAIX,CAAE,MAAOA,GAEP,OADAD,QAAQC,MAAM,2BAA4BA,IACnC,CACT,CACF,CAKA,kBAAOiK,GACLlK,QAAQkD,IAAI,4CAEZ,MAMMiU,EANU,CACd5a,KAAK+Z,oBACL/Z,KAAKka,yBACLla,KAAKqa,qBAGmBQ,MAAM/B,GAAUA,GAQ1C,OANI8B,EACFnX,QAAQkD,IAAI,yCAEZlD,QAAQC,MAAM,wCAGTkX,CACT,E,yLCiHF,mCAEE7b,SAASwF,iBAAiB,QAAUmL,IAClC,MACMoL,EADSpL,EAAMV,OACK+L,QAAQ,iBAE9BD,IACFpL,EAAMb,iBASZ,SAA6BmM,GAC3B,MAAMC,EAAYD,EAAOD,QAAQ,mBAC3BG,EAAcD,GAAW1S,cAAc,QAE7C,GAAI2S,EAAa,CACf,MAAM/W,EAAO+W,EAAYpb,aAAe,GAGpCgD,UAAUC,WAAaD,UAAUC,UAAUC,UAC7CF,UAAUC,UAAUC,UAAUmB,GAAMlB,KAAK,KACvCkY,EAAgBH,KACfzX,MAAMC,IACPC,QAAQC,MAAM,0CAA2CF,GACzD4X,EAAwBjX,EAAM6W,KAIhCI,EAAwBjX,EAAM6W,EAElC,CACF,CA5BMK,CAAoBP,KAG1B,EA1OA,gBACA,aACA,aAKA,MAAavb,EAIX,cACES,KAAKV,SAAW,IAAI,EAAAgc,SACpBtb,KAAKub,uBACLvb,KAAKwb,iBACP,CAKA,kBAAOhc,GAIL,OAHKD,EAAoBkc,WACvBlc,EAAoBkc,SAAW,IAAIlc,GAE9BA,EAAoBkc,QAC7B,CAKQ,oBAAAF,GAENvb,KAAKV,SAASoc,QAAU,CAAC5J,EAAc6J,KACrC,MASM9Q,EATS,CACb,EAAG,qBACH,EAAG,uBACH,EAAG,qBACH,EAAG,sBACH,EAAG,qBACH,EAAG,wBAGgB8Q,IAAiC,qBAGtD,MAAO,eACDA,SAHK7J,EAAK8J,cAAcC,QAAQ,UAAW,iCAGCF,oBAAwB9Q,mBACpEiH,iBACC6J,cAKT3b,KAAKV,SAAS6E,KAAO,CAACA,EAAcC,KAClC,MAAM0X,EAAgB1X,GAAY,UAAK2X,YAAY3X,GAAYA,EAAW,YACpE+V,EAAc,UAAKC,UAAUjW,EAAM,CAAEC,SAAU0X,IAErD,MAAO,wDACwCA,6FAEP9b,KAAKgc,uBAAuBF,gQAKLA,MAAkB3B,EAAYhV,8CAM/FnF,KAAKV,SAAS2c,SAAY9X,GACjB,iCAAiCA,WAI1CnE,KAAKV,SAAS4c,KAAO,CAAC9Y,EAAc+Y,KAClC,MAAMC,EAAMD,EAAU,KAAO,KAE7B,MAAO,IAAIC,YADOD,EAAU,mBAAqB,yBACV/Y,MAASgZ,MAIlDpc,KAAKV,SAAS+c,SAAYvK,GACjB,6BAA6BA,SAItC9R,KAAKV,SAASgd,WAAcC,GACnB,sCAAsCA,iBAI/Cvc,KAAKV,SAASkd,MAAQ,CAACC,EAAgBrZ,IAC9B,iIAGiCqZ,wDACFrZ,wDAOxCpD,KAAKV,SAASod,KAAO,CAACC,EAAcpb,EAAsBuQ,KACxD,MAAM8K,EAAW,UAAUpC,SAASmC,GAC9BE,EAAYtb,EAAQ,UAAUiZ,SAASjZ,GAAS,GAGtD,MAAO,YAAYqb,gEAFDC,EAAY,WAAWA,KAAe,MAE+C/K,SAIzG9R,KAAKV,SAASwd,UAAahL,GAClB,4BAA4BA,QAIrC9R,KAAKV,SAASyd,OAAUjL,GACf,8BAA8BA,aAIvC9R,KAAKV,SAAS0d,GAAMlL,GACX,4BAA4BA,QAEvC,CAKQ,eAAA0J,GACN,EAAAvB,OAAOgD,WAAW,CAChB3d,SAAUU,KAAKV,SACf4d,KAAK,EACLC,QAAQ,GAEZ,CAKA,MAAAxd,CAAOyd,GACL,IAEE,MAAMpD,GAAO,IAAAC,QAAOmD,GAkBpB,OAfkB,UAAU5C,SAASR,EAAM,CACzCqD,aAAc,CACZ,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,IAAK,KAAM,SAAU,KAAM,OAAQ,MACnC,KAAM,KAAM,KAAM,aAClB,QAAS,QAAS,QAAS,KAAM,KAAM,KACvC,IAAK,MAAO,OAAQ,UAEtBC,aAAc,CACZ,QAAS,KAAM,QAAS,gBACxB,OAAQ,SAAU,MAAO,QAAS,WAEpCC,mBAAoB,yFAIxB,CAAE,MAAO7Z,GAGP,OAFAD,QAAQC,MAAM,+BAAgCA,GAEvC,kDAAkD1D,KAAKwd,WAAWJ,QAC3E,CACF,CAKQ,sBAAApB,CAAuBrG,GA+B7B,MA9B8C,CAC5C,WAAc,aACd,WAAc,aACd,OAAU,SACV,KAAQ,OACR,OAAU,KACV,IAAO,MACP,EAAK,IACL,KAAQ,OACR,GAAM,KACN,IAAO,MACP,KAAQ,OACR,MAAS,QACT,OAAU,SACV,MAAS,QACT,KAAQ,OACR,IAAO,MACP,KAAQ,OACR,KAAQ,OACR,IAAO,MACP,KAAQ,OACR,SAAY,WACZ,KAAQ,OACR,MAAS,QACT,WAAc,aACd,IAAO,MACP,WAAc,aACd,UAAa,QAGMA,IAASA,EAAK8H,OAAO,GAAGC,cAAgB/H,EAAKgI,MAAM,EAC1E,CAKQ,UAAAH,CAAW1L,GACjB,MAAM8L,EAAM7e,SAASC,cAAc,OAEnC,OADA4e,EAAI9d,YAAcgS,EACX8L,EAAIle,SACb,EAgDF,SAAS0b,EAAwBtJ,EAAckJ,GAC7C,MAAM6C,EAAW9e,SAASC,cAAc,YACxC6e,EAAS1Y,MAAQ2M,EACjB+L,EAAS1b,MAAM2b,SAAW,QAC1BD,EAAS1b,MAAM4b,KAAO,YACtBF,EAAS1b,MAAM6b,IAAM,YACrBjf,SAASqE,KAAKvD,YAAYge,GAC1BA,EAAShL,QACTgL,EAASI,SAET,IACqBlf,SAASmf,YAAY,QAEtC/C,EAAgBH,GAEhBmD,EAAcnD,EAElB,CAAE,MAAOxX,GACPC,QAAQC,MAAM,wBAAyBF,GACvC2a,EAAcnD,EAChB,C,QACEjc,SAASqE,KAAK2Q,YAAY8J,EAC5B,CACF,CAKA,SAAS1C,EAAgBH,GACvB,MAAMoD,EAAOpD,EAAOzS,cAAc,cAClC,GAAI6V,EAAM,CACR,MAAM9F,EAAe8F,EAAKte,YAC1Bse,EAAKte,YAAc,IACnBuD,WAAW,KACT+a,EAAKte,YAAcwY,GAClB,IACL,CACF,CAKA,SAAS6F,EAAcnD,GACrB,MAAMoD,EAAOpD,EAAOzS,cAAc,cAClC,GAAI6V,EAAM,CACR,MAAM9F,EAAe8F,EAAKte,YAC1Bse,EAAKte,YAAc,IACnBuD,WAAW,KACT+a,EAAKte,YAAcwY,GAClB,IACL,CACF,CApTA,uB,GCXI+F,yBAA2B,CAAC,ECD5BC,SDIJ,SAASC,oBAAoBC,GAE5B,IAAIC,EAAeJ,yBAAyBG,GAC5C,QAAqBngB,IAAjBogB,EACH,OAAOA,EAAaC,QAGrB,IAAIjgB,EAAS4f,yBAAyBG,GAAY,CACjD9f,GAAI8f,EAEJE,QAAS,CAAC,GAOX,OAHAC,oBAAoBH,GAAUI,KAAKngB,EAAOigB,QAASjgB,EAAQA,EAAOigB,QAASH,qBAGpE9f,EAAOigB,OACf,CAGAH,oBAAoBM,EAAIF,oBCzBpBL,SAAW,GACfC,oBAAoBO,EAAI,CAAChG,EAAQiG,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAAS5gB,EAAI,EAAGA,EAAI+f,SAASvX,OAAQxI,IAAK,CAGzC,IAFA,IAAKwgB,EAAUC,EAAIC,GAAYX,SAAS/f,GACpC6gB,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAAShY,OAAQsY,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAana,OAAOmP,KAAKsK,oBAAoBO,GAAGjE,MAAOlM,GAAS4P,oBAAoBO,EAAEnQ,GAAKoQ,EAASM,KAC9IN,EAASO,OAAOD,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACbd,SAASgB,OAAO/gB,IAAK,GACrB,IAAIghB,EAAIP,SACE3gB,IAANkhB,IAAiBzG,EAASyG,EAC/B,CACD,CACA,OAAOzG,CAnBP,CAJCmG,EAAWA,GAAY,EACvB,IAAI,IAAI1gB,EAAI+f,SAASvX,OAAQxI,EAAI,GAAK+f,SAAS/f,EAAI,GAAG,GAAK0gB,EAAU1gB,IAAK+f,SAAS/f,GAAK+f,SAAS/f,EAAI,GACrG+f,SAAS/f,GAAK,CAACwgB,EAAUC,EAAIC,ICJ/BV,oBAAoBiB,EAAK/gB,IACxB,IAAIghB,EAAShhB,GAAUA,EAAOihB,WAC7B,IAAOjhB,EAAiB,QACxB,IAAM,EAEP,OADA8f,oBAAoBoB,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GCLRlB,oBAAoBoB,EAAI,CAACjB,EAASmB,KACjC,IAAI,IAAIlR,KAAOkR,EACXtB,oBAAoBuB,EAAED,EAAYlR,KAAS4P,oBAAoBuB,EAAEpB,EAAS/P,IAC5E7J,OAAOib,eAAerB,EAAS/P,EAAK,CAAEqR,YAAY,EAAMtX,IAAKmX,EAAWlR,MCJ3E4P,oBAAoBuB,EAAI,CAACG,EAAKC,IAAUpb,OAAOqb,UAAUC,eAAexB,KAAKqB,EAAKC,GCClF3B,oBAAoBgB,EAAKb,IACH,oBAAX2B,QAA0BA,OAAOC,aAC1Cxb,OAAOib,eAAerB,EAAS2B,OAAOC,YAAa,CAAEnb,MAAO,WAE7DL,OAAOib,eAAerB,EAAS,aAAc,CAAEvZ,OAAO,K,MCAvD,IAAIob,EAAkB,CACrB,IAAK,GAaNhC,oBAAoBO,EAAEO,EAAKmB,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4B9Q,KACvD,IAGI4O,EAAUgC,GAHTzB,EAAU4B,EAAaC,GAAWhR,EAGhBrR,EAAI,EAC3B,GAAGwgB,EAAS8B,KAAMniB,GAAgC,IAAxB6hB,EAAgB7hB,IAAa,CACtD,IAAI8f,KAAYmC,EACZpC,oBAAoBuB,EAAEa,EAAanC,KACrCD,oBAAoBM,EAAEL,GAAYmC,EAAYnC,IAGhD,GAAGoC,EAAS,IAAI9H,EAAS8H,EAAQrC,oBAClC,CAEA,IADGmC,GAA4BA,EAA2B9Q,GACrDrR,EAAIwgB,EAAShY,OAAQxI,IACzBiiB,EAAUzB,EAASxgB,GAChBggB,oBAAoBuB,EAAES,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOjC,oBAAoBO,EAAEhG,IAG1BgI,EAAqBC,KAA6B,uBAAIA,KAA6B,wBAAK,GAC5FD,EAAmB9b,QAAQyb,EAAqBO,KAAK,KAAM,IAC3DF,EAAmBtiB,KAAOiiB,EAAqBO,KAAK,KAAMF,EAAmBtiB,KAAKwiB,KAAKF,G,KChDvFvC,oBAAoB0C,QAAK5iB,ECGzB,IAAI6iB,oBAAsB3C,oBAAoBO,OAAEzgB,EAAW,CAAC,IAAK,IAAOkgB,oBAAoB,OAC5F2C,oBAAsB3C,oBAAoBO,EAAEoC,oB","sources":["webpack://nox-vscode/./src/webview/styles.css?a43b","webpack://nox-vscode/./src/webview/styles.css","webpack://nox-vscode/./src/webview/markdown-styles.css","webpack://nox-vscode/./src/webview/markdown-styles.css?7bbf","webpack://nox-vscode/./src/webview/components.ts","webpack://nox-vscode/./src/webview/enterprise-styles.css","webpack://nox-vscode/./src/webview/index.ts","webpack://nox-vscode/./src/webview/markdown-test.ts","webpack://nox-vscode/./src/webview/markdown-renderer.ts","webpack://nox-vscode/webpack/bootstrap","webpack://nox-vscode/webpack/runtime/chunk loaded","webpack://nox-vscode/webpack/runtime/compat get default export","webpack://nox-vscode/webpack/runtime/define property getters","webpack://nox-vscode/webpack/runtime/hasOwnProperty shorthand","webpack://nox-vscode/webpack/runtime/make namespace object","webpack://nox-vscode/webpack/runtime/jsonp chunk loading","webpack://nox-vscode/webpack/runtime/nonce","webpack://nox-vscode/webpack/startup"],"sourcesContent":["\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./styles.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./styles.css\";\n       export default content && content.locals ? content.locals : undefined;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../node_modules/css-loader/dist/cjs.js!./enterprise-styles.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/**\n * 🦊 Nox Enterprise Webview Styles\n * Main stylesheet entry point - imports all enterprise styles\n */\n\n/* Import enterprise chat interface styles */\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/webview/styles.css\"],\"names\":[],\"mappings\":\"AAAA;;;EAGE;;AAEF,4CAA4C\",\"sourcesContent\":[\"/**\\n * 🦊 Nox Enterprise Webview Styles\\n * Main stylesheet entry point - imports all enterprise styles\\n */\\n\\n/* Import enterprise chat interface styles */\\n@import './enterprise-styles.css';\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/**\n * 🦊 Nox Enterprise Markdown Styles\n * Aurora-themed styling for rendered markdown content\n */\n\n/* Markdown Container */\n.nox-markdown {\n  line-height: 1.6;\n  color: var(--text-primary);\n  font-family: var(--vscode-font-family);\n}\n\n/* Headings with Aurora Colors */\n.nox-heading {\n  margin: 16px 0 8px 0;\n  font-weight: 600;\n  line-height: 1.3;\n  border-bottom: 1px solid rgba(76, 154, 255, 0.2);\n  padding-bottom: 4px;\n}\n\n.nox-h1 {\n  font-size: 1.5em;\n  color: var(--aurora-blue);\n}\n\n.nox-h2 {\n  font-size: 1.3em;\n  color: var(--aurora-purple);\n}\n\n.nox-h3 {\n  font-size: 1.2em;\n  color: var(--aurora-cyan);\n}\n\n.nox-h4 {\n  font-size: 1.1em;\n  color: var(--aurora-green);\n}\n\n.nox-h5 {\n  font-size: 1.05em;\n  color: var(--aurora-pink);\n}\n\n.nox-h6 {\n  font-size: 1em;\n  color: var(--aurora-orange);\n}\n\n/* Paragraphs */\n.nox-paragraph {\n  margin: 8px 0;\n  line-height: 1.6;\n}\n\n/* Text Formatting */\n.nox-strong {\n  font-weight: 600;\n  color: var(--aurora-blue);\n}\n\n.nox-emphasis {\n  font-style: italic;\n  color: var(--aurora-purple);\n}\n\n/* Inline Code */\n.nox-inline-code {\n  background: rgba(139, 92, 246, 0.1);\n  border: 1px solid rgba(139, 92, 246, 0.3);\n  border-radius: 4px;\n  padding: 2px 6px;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 0.9em;\n  color: var(--aurora-purple);\n}\n\n/* Code Blocks */\n.nox-code-block {\n  margin: 12px 0;\n  border-radius: 8px;\n  overflow: hidden;\n  background: rgba(15, 23, 42, 0.95);\n  border: 1px solid var(--aurora-blue);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n.nox-code-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 12px;\n  background: linear-gradient(90deg, \n    rgba(76, 154, 255, 0.1), \n    rgba(139, 92, 246, 0.1));\n  border-bottom: 1px solid rgba(76, 154, 255, 0.3);\n}\n\n.nox-code-language {\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--aurora-blue);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.nox-copy-btn {\n  background: transparent;\n  border: 1px solid var(--aurora-blue);\n  border-radius: 4px;\n  padding: 4px 8px;\n  color: var(--aurora-blue);\n  cursor: pointer;\n  font-size: 10px;\n  transition: all 0.2s ease;\n}\n\n.nox-copy-btn:hover {\n  background: var(--aurora-blue);\n  color: white;\n  transform: scale(1.05);\n}\n\n.nox-copy-btn:active {\n  transform: scale(0.95);\n}\n\n.nox-code-content {\n  margin: 0;\n  padding: 12px;\n  background: rgba(15, 23, 42, 1);\n  overflow-x: auto;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 13px;\n  line-height: 1.4;\n}\n\n.nox-code-content code {\n  background: none;\n  padding: 0;\n  border: none;\n  color: inherit;\n}\n\n/* Syntax Highlighting - Aurora Theme */\n.hljs {\n  background: transparent !important;\n  color: #e2e8f0;\n}\n\n.hljs-keyword,\n.hljs-selector-tag,\n.hljs-built_in {\n  color: var(--aurora-blue);\n}\n\n.hljs-string,\n.hljs-attr {\n  color: var(--aurora-green);\n}\n\n.hljs-number,\n.hljs-literal {\n  color: var(--aurora-orange);\n}\n\n.hljs-comment,\n.hljs-quote {\n  color: #64748b;\n  font-style: italic;\n}\n\n.hljs-function,\n.hljs-title {\n  color: var(--aurora-purple);\n}\n\n.hljs-variable,\n.hljs-name {\n  color: var(--aurora-cyan);\n}\n\n.hljs-type,\n.hljs-class {\n  color: var(--aurora-pink);\n}\n\n/* Lists */\n.nox-unordered-list,\n.nox-ordered-list {\n  margin: 8px 0;\n  padding-left: 20px;\n}\n\n.nox-list-item {\n  margin: 4px 0;\n  line-height: 1.5;\n}\n\n.nox-unordered-list .nox-list-item {\n  list-style-type: none;\n  position: relative;\n}\n\n.nox-unordered-list .nox-list-item::before {\n  content: '•';\n  color: var(--aurora-blue);\n  font-weight: bold;\n  position: absolute;\n  left: -15px;\n}\n\n.nox-ordered-list {\n  counter-reset: list-counter;\n}\n\n.nox-ordered-list .nox-list-item {\n  counter-increment: list-counter;\n  list-style-type: none;\n  position: relative;\n}\n\n.nox-ordered-list .nox-list-item::before {\n  content: counter(list-counter) '.';\n  color: var(--aurora-purple);\n  font-weight: 600;\n  position: absolute;\n  left: -20px;\n}\n\n/* Blockquotes */\n.nox-blockquote {\n  margin: 12px 0;\n  padding: 12px 16px;\n  border-left: 4px solid var(--aurora-blue);\n  background: linear-gradient(90deg,\n    rgba(76, 154, 255, 0.05),\n    rgba(76, 154, 255, 0.02));\n  border-radius: 0 8px 8px 0;\n  font-style: italic;\n  color: var(--text-secondary);\n}\n\n/* Tables */\n.nox-table-container {\n  margin: 12px 0;\n  overflow-x: auto;\n  border-radius: 8px;\n  border: 1px solid var(--aurora-blue);\n}\n\n.nox-table {\n  width: 100%;\n  border-collapse: collapse;\n  background: rgba(15, 23, 42, 0.5);\n}\n\n.nox-table-header {\n  background: linear-gradient(90deg,\n    rgba(76, 154, 255, 0.2),\n    rgba(139, 92, 246, 0.2));\n}\n\n.nox-table th,\n.nox-table td {\n  padding: 8px 12px;\n  text-align: left;\n  border-bottom: 1px solid rgba(76, 154, 255, 0.2);\n}\n\n.nox-table th {\n  font-weight: 600;\n  color: var(--aurora-blue);\n  font-size: 12px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.nox-table td {\n  color: var(--text-primary);\n  font-size: 13px;\n}\n\n.nox-table tr:hover {\n  background: rgba(76, 154, 255, 0.05);\n}\n\n/* Links */\n.nox-link {\n  color: var(--aurora-cyan);\n  text-decoration: none;\n  border-bottom: 1px solid transparent;\n  transition: all 0.2s ease;\n}\n\n.nox-link:hover {\n  color: var(--aurora-blue);\n  border-bottom-color: var(--aurora-blue);\n}\n\n/* Error Fallback */\n.nox-error {\n  background: rgba(255, 107, 53, 0.1);\n  border: 1px solid rgba(255, 107, 53, 0.3);\n  border-radius: 6px;\n  padding: 8px 12px;\n  color: var(--aurora-orange);\n  font-family: monospace;\n  font-size: 12px;\n}\n\n/* Scrollbar for code blocks */\n.nox-code-content::-webkit-scrollbar {\n  height: 6px;\n}\n\n.nox-code-content::-webkit-scrollbar-track {\n  background: rgba(15, 23, 42, 0.5);\n}\n\n.nox-code-content::-webkit-scrollbar-thumb {\n  background: var(--aurora-blue);\n  border-radius: 3px;\n}\n\n.nox-code-content::-webkit-scrollbar-thumb:hover {\n  background: var(--aurora-purple);\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/webview/markdown-styles.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"/**\\n * 🦊 Nox Enterprise Markdown Styles\\n * Aurora-themed styling for rendered markdown content\\n */\\n\\n/* Markdown Container */\\n.nox-markdown {\\n  line-height: 1.6;\\n  color: var(--text-primary);\\n  font-family: var(--vscode-font-family);\\n}\\n\\n/* Headings with Aurora Colors */\\n.nox-heading {\\n  margin: 16px 0 8px 0;\\n  font-weight: 600;\\n  line-height: 1.3;\\n  border-bottom: 1px solid rgba(76, 154, 255, 0.2);\\n  padding-bottom: 4px;\\n}\\n\\n.nox-h1 {\\n  font-size: 1.5em;\\n  color: var(--aurora-blue);\\n}\\n\\n.nox-h2 {\\n  font-size: 1.3em;\\n  color: var(--aurora-purple);\\n}\\n\\n.nox-h3 {\\n  font-size: 1.2em;\\n  color: var(--aurora-cyan);\\n}\\n\\n.nox-h4 {\\n  font-size: 1.1em;\\n  color: var(--aurora-green);\\n}\\n\\n.nox-h5 {\\n  font-size: 1.05em;\\n  color: var(--aurora-pink);\\n}\\n\\n.nox-h6 {\\n  font-size: 1em;\\n  color: var(--aurora-orange);\\n}\\n\\n/* Paragraphs */\\n.nox-paragraph {\\n  margin: 8px 0;\\n  line-height: 1.6;\\n}\\n\\n/* Text Formatting */\\n.nox-strong {\\n  font-weight: 600;\\n  color: var(--aurora-blue);\\n}\\n\\n.nox-emphasis {\\n  font-style: italic;\\n  color: var(--aurora-purple);\\n}\\n\\n/* Inline Code */\\n.nox-inline-code {\\n  background: rgba(139, 92, 246, 0.1);\\n  border: 1px solid rgba(139, 92, 246, 0.3);\\n  border-radius: 4px;\\n  padding: 2px 6px;\\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\\n  font-size: 0.9em;\\n  color: var(--aurora-purple);\\n}\\n\\n/* Code Blocks */\\n.nox-code-block {\\n  margin: 12px 0;\\n  border-radius: 8px;\\n  overflow: hidden;\\n  background: rgba(15, 23, 42, 0.95);\\n  border: 1px solid var(--aurora-blue);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\\n}\\n\\n.nox-code-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 8px 12px;\\n  background: linear-gradient(90deg, \\n    rgba(76, 154, 255, 0.1), \\n    rgba(139, 92, 246, 0.1));\\n  border-bottom: 1px solid rgba(76, 154, 255, 0.3);\\n}\\n\\n.nox-code-language {\\n  font-size: 11px;\\n  font-weight: 600;\\n  color: var(--aurora-blue);\\n  text-transform: uppercase;\\n  letter-spacing: 0.5px;\\n}\\n\\n.nox-copy-btn {\\n  background: transparent;\\n  border: 1px solid var(--aurora-blue);\\n  border-radius: 4px;\\n  padding: 4px 8px;\\n  color: var(--aurora-blue);\\n  cursor: pointer;\\n  font-size: 10px;\\n  transition: all 0.2s ease;\\n}\\n\\n.nox-copy-btn:hover {\\n  background: var(--aurora-blue);\\n  color: white;\\n  transform: scale(1.05);\\n}\\n\\n.nox-copy-btn:active {\\n  transform: scale(0.95);\\n}\\n\\n.nox-code-content {\\n  margin: 0;\\n  padding: 12px;\\n  background: rgba(15, 23, 42, 1);\\n  overflow-x: auto;\\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\\n  font-size: 13px;\\n  line-height: 1.4;\\n}\\n\\n.nox-code-content code {\\n  background: none;\\n  padding: 0;\\n  border: none;\\n  color: inherit;\\n}\\n\\n/* Syntax Highlighting - Aurora Theme */\\n.hljs {\\n  background: transparent !important;\\n  color: #e2e8f0;\\n}\\n\\n.hljs-keyword,\\n.hljs-selector-tag,\\n.hljs-built_in {\\n  color: var(--aurora-blue);\\n}\\n\\n.hljs-string,\\n.hljs-attr {\\n  color: var(--aurora-green);\\n}\\n\\n.hljs-number,\\n.hljs-literal {\\n  color: var(--aurora-orange);\\n}\\n\\n.hljs-comment,\\n.hljs-quote {\\n  color: #64748b;\\n  font-style: italic;\\n}\\n\\n.hljs-function,\\n.hljs-title {\\n  color: var(--aurora-purple);\\n}\\n\\n.hljs-variable,\\n.hljs-name {\\n  color: var(--aurora-cyan);\\n}\\n\\n.hljs-type,\\n.hljs-class {\\n  color: var(--aurora-pink);\\n}\\n\\n/* Lists */\\n.nox-unordered-list,\\n.nox-ordered-list {\\n  margin: 8px 0;\\n  padding-left: 20px;\\n}\\n\\n.nox-list-item {\\n  margin: 4px 0;\\n  line-height: 1.5;\\n}\\n\\n.nox-unordered-list .nox-list-item {\\n  list-style-type: none;\\n  position: relative;\\n}\\n\\n.nox-unordered-list .nox-list-item::before {\\n  content: '•';\\n  color: var(--aurora-blue);\\n  font-weight: bold;\\n  position: absolute;\\n  left: -15px;\\n}\\n\\n.nox-ordered-list {\\n  counter-reset: list-counter;\\n}\\n\\n.nox-ordered-list .nox-list-item {\\n  counter-increment: list-counter;\\n  list-style-type: none;\\n  position: relative;\\n}\\n\\n.nox-ordered-list .nox-list-item::before {\\n  content: counter(list-counter) '.';\\n  color: var(--aurora-purple);\\n  font-weight: 600;\\n  position: absolute;\\n  left: -20px;\\n}\\n\\n/* Blockquotes */\\n.nox-blockquote {\\n  margin: 12px 0;\\n  padding: 12px 16px;\\n  border-left: 4px solid var(--aurora-blue);\\n  background: linear-gradient(90deg,\\n    rgba(76, 154, 255, 0.05),\\n    rgba(76, 154, 255, 0.02));\\n  border-radius: 0 8px 8px 0;\\n  font-style: italic;\\n  color: var(--text-secondary);\\n}\\n\\n/* Tables */\\n.nox-table-container {\\n  margin: 12px 0;\\n  overflow-x: auto;\\n  border-radius: 8px;\\n  border: 1px solid var(--aurora-blue);\\n}\\n\\n.nox-table {\\n  width: 100%;\\n  border-collapse: collapse;\\n  background: rgba(15, 23, 42, 0.5);\\n}\\n\\n.nox-table-header {\\n  background: linear-gradient(90deg,\\n    rgba(76, 154, 255, 0.2),\\n    rgba(139, 92, 246, 0.2));\\n}\\n\\n.nox-table th,\\n.nox-table td {\\n  padding: 8px 12px;\\n  text-align: left;\\n  border-bottom: 1px solid rgba(76, 154, 255, 0.2);\\n}\\n\\n.nox-table th {\\n  font-weight: 600;\\n  color: var(--aurora-blue);\\n  font-size: 12px;\\n  text-transform: uppercase;\\n  letter-spacing: 0.5px;\\n}\\n\\n.nox-table td {\\n  color: var(--text-primary);\\n  font-size: 13px;\\n}\\n\\n.nox-table tr:hover {\\n  background: rgba(76, 154, 255, 0.05);\\n}\\n\\n/* Links */\\n.nox-link {\\n  color: var(--aurora-cyan);\\n  text-decoration: none;\\n  border-bottom: 1px solid transparent;\\n  transition: all 0.2s ease;\\n}\\n\\n.nox-link:hover {\\n  color: var(--aurora-blue);\\n  border-bottom-color: var(--aurora-blue);\\n}\\n\\n/* Error Fallback */\\n.nox-error {\\n  background: rgba(255, 107, 53, 0.1);\\n  border: 1px solid rgba(255, 107, 53, 0.3);\\n  border-radius: 6px;\\n  padding: 8px 12px;\\n  color: var(--aurora-orange);\\n  font-family: monospace;\\n  font-size: 12px;\\n}\\n\\n/* Scrollbar for code blocks */\\n.nox-code-content::-webkit-scrollbar {\\n  height: 6px;\\n}\\n\\n.nox-code-content::-webkit-scrollbar-track {\\n  background: rgba(15, 23, 42, 0.5);\\n}\\n\\n.nox-code-content::-webkit-scrollbar-thumb {\\n  background: var(--aurora-blue);\\n  border-radius: 3px;\\n}\\n\\n.nox-code-content::-webkit-scrollbar-thumb:hover {\\n  background: var(--aurora-purple);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./markdown-styles.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./markdown-styles.css\";\n       export default content && content.locals ? content.locals : undefined;\n","/**\n * 🦊 Nox Webview Components\n * Enterprise-grade UI components for chat interface\n */\n\nimport { ChatMessage, CodeBlockProps, MessageComponentProps, VSCodeAPI } from './types';\nimport { NoxMarkdownRenderer } from './markdown-renderer';\n\n// VS Code API for streaming communication\ndeclare const acquireVsCodeApi: () => VSCodeAPI;\n\n/**\n * Message Component Factory\n */\nexport class MessageComponent {\n  \n  /**\n   * Create a message element with markdown rendering\n   */\n  static create(props: MessageComponentProps): HTMLElement {\n    const messageEl = document.createElement('div');\n    messageEl.className = `message ${props.message.type}`;\n    messageEl.setAttribute('data-message-id', props.message.id);\n\n    const contentEl = document.createElement('div');\n    contentEl.className = 'message-content';\n\n    // Use markdown rendering for assistant messages, plain text for user messages\n    if (props.message.type === 'assistant') {\n      const renderer = NoxMarkdownRenderer.getInstance();\n      const markdownContainer = document.createElement('div');\n      markdownContainer.className = 'nox-markdown';\n      markdownContainer.innerHTML = renderer.render(props.message.content);\n      contentEl.appendChild(markdownContainer);\n    } else {\n      // User messages remain as plain text for clean appearance\n      contentEl.textContent = props.message.content;\n    }\n\n    const metaEl = this.createMessageMeta(props.message);\n\n    messageEl.appendChild(contentEl);\n    messageEl.appendChild(metaEl);\n\n    return messageEl;\n  }\n\n  /**\n   * Create message metadata element with enhanced info and actions\n   */\n  static createMessageMeta(message: ChatMessage): HTMLElement {\n    const metaEl = document.createElement('div');\n    metaEl.className = 'message-meta';\n\n    // Create info section\n    const infoEl = document.createElement('div');\n    infoEl.className = 'message-info';\n\n    // Enhanced date/time formatting\n    const messageDate = new Date(message.timestamp);\n    const now = new Date();\n    const isToday = messageDate.toDateString() === now.toDateString();\n    const isYesterday = new Date(now.getTime() - 24 * 60 * 60 * 1000).toDateString() === messageDate.toDateString();\n\n    let timeText: string;\n    let dateText: string = '';\n\n    // Format time\n    const timeFormatted = messageDate.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n\n    // Format date based on recency\n    if (isToday) {\n      timeText = timeFormatted;\n    } else if (isYesterday) {\n      timeText = timeFormatted;\n      dateText = 'Yesterday';\n    } else {\n      timeText = timeFormatted;\n      dateText = messageDate.toLocaleDateString([], {\n        month: 'short',\n        day: 'numeric',\n        year: messageDate.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\n      });\n    }\n\n    // Time element\n    const timeEl = document.createElement('span');\n    timeEl.className = 'message-time';\n    timeEl.textContent = timeText;\n    timeEl.title = messageDate.toLocaleString(); // Full timestamp on hover\n    infoEl.appendChild(timeEl);\n\n    // Date element (if not today)\n    if (dateText) {\n      const dateEl = document.createElement('span');\n      dateEl.className = 'message-date';\n      dateEl.textContent = dateText;\n      dateEl.title = messageDate.toLocaleDateString();\n      infoEl.appendChild(dateEl);\n    }\n\n    // Assistant-specific metadata\n    if (message.type === 'assistant') {\n      // Provider badge\n      if (message.provider) {\n        const providerEl = document.createElement('span');\n        providerEl.className = 'message-provider';\n        providerEl.textContent = message.provider;\n        infoEl.appendChild(providerEl);\n      }\n\n      // Tokens badge\n      if (message.tokens) {\n        const tokensEl = document.createElement('span');\n        tokensEl.className = 'message-tokens';\n        tokensEl.textContent = `${message.tokens} tokens`;\n        infoEl.appendChild(tokensEl);\n      }\n\n      // Cost badge\n      if (message.cost) {\n        const costEl = document.createElement('span');\n        costEl.className = 'message-cost';\n        costEl.textContent = `$${message.cost.toFixed(4)}`;\n        infoEl.appendChild(costEl);\n      }\n\n      // Model info (smaller, less prominent)\n      if (message.model) {\n        const modelEl = document.createElement('span');\n        modelEl.className = 'message-model';\n        modelEl.textContent = message.model;\n        modelEl.style.fontSize = '8px';\n        modelEl.style.opacity = '0.6';\n        infoEl.appendChild(modelEl);\n      }\n    }\n\n    // Create actions section\n    const actionsEl = document.createElement('div');\n    actionsEl.className = 'message-actions';\n\n    // Copy button\n    const copyBtn = document.createElement('button');\n    copyBtn.className = 'message-action-btn copy';\n    copyBtn.textContent = '📋 Copy';\n    copyBtn.title = 'Copy message content';\n    copyBtn.onclick = () => this.copyMessageContent(message);\n    actionsEl.appendChild(copyBtn);\n\n    // Regenerate button (only for assistant messages)\n    if (message.type === 'assistant') {\n      const regenerateBtn = document.createElement('button');\n      regenerateBtn.className = 'message-action-btn regenerate';\n      regenerateBtn.textContent = '🔄 Regenerate';\n      regenerateBtn.title = 'Regenerate this response';\n      regenerateBtn.onclick = () => this.regenerateMessage(message);\n      actionsEl.appendChild(regenerateBtn);\n    }\n\n    // Delete button\n    const deleteBtn = document.createElement('button');\n    deleteBtn.className = 'message-action-btn delete';\n    deleteBtn.textContent = '🗑️ Delete';\n    deleteBtn.title = 'Delete this message';\n    deleteBtn.onclick = () => this.deleteMessage(message);\n    actionsEl.appendChild(deleteBtn);\n\n    metaEl.appendChild(infoEl);\n    metaEl.appendChild(actionsEl);\n\n    return metaEl;\n  }\n\n  /**\n   * Copy message content to clipboard\n   */\n  private static copyMessageContent(message: ChatMessage): void {\n    navigator.clipboard.writeText(message.content).then(() => {\n      // Show temporary feedback\n      const notification = document.createElement('div');\n      notification.textContent = '✅ Copied to clipboard';\n      notification.style.cssText = `\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: var(--aurora-green);\n        color: white;\n        padding: 8px 16px;\n        border-radius: 6px;\n        font-size: 12px;\n        z-index: 1000;\n        animation: fadeInOut 2s ease-in-out;\n      `;\n      document.body.appendChild(notification);\n      setTimeout(() => notification.remove(), 2000);\n    }).catch(err => {\n      console.error('Failed to copy text: ', err);\n    });\n  }\n\n  /**\n   * Regenerate assistant message\n   */\n  private static regenerateMessage(message: ChatMessage): void {\n    // Send message to extension to regenerate\n    // Note: Use the global vscode API that's already acquired\n    const vscode = (window as any).vscodeApi || (window as any).acquireVsCodeApi();\n    vscode.postMessage({\n      type: 'regenerateMessage',\n      messageId: message.id\n    });\n  }\n\n  /**\n   * Delete message\n   */\n  private static deleteMessage(message: ChatMessage): void {\n    // Show confirmation via extension instead of browser confirm (which is blocked in sandboxed webview)\n    const vscode = (window as any).vscodeApi || (window as any).acquireVsCodeApi();\n    vscode.postMessage({\n      type: 'confirmDelete',\n      messageId: message.id\n    });\n  }\n}\n\n/**\n * Code Block Component (placeholder for Phase 4)\n */\nexport class CodeBlockComponent {\n  \n  static create(props: CodeBlockProps): HTMLElement {\n    const codeBlockEl = document.createElement('div');\n    codeBlockEl.className = 'code-block';\n    \n    const preEl = document.createElement('pre');\n    const codeEl = document.createElement('code');\n    codeEl.textContent = props.code;\n    codeEl.className = `language-${props.language}`;\n    \n    preEl.appendChild(codeEl);\n    codeBlockEl.appendChild(preEl);\n    \n    if (props.copyable) {\n      const copyBtn = this.createCopyButton(props.code);\n      codeBlockEl.appendChild(copyBtn);\n    }\n    \n    return codeBlockEl;\n  }\n  \n  private static createCopyButton(code: string): HTMLElement {\n    const copyBtn = document.createElement('button');\n    copyBtn.className = 'copy-btn';\n    copyBtn.textContent = '📋';\n    copyBtn.title = 'Copy code';\n    \n    copyBtn.addEventListener('click', () => {\n      navigator.clipboard.writeText(code).then(() => {\n        copyBtn.textContent = '✅';\n        setTimeout(() => {\n          copyBtn.textContent = '📋';\n        }, 2000);\n      });\n    });\n    \n    return copyBtn;\n  }\n}\n\n/**\n * Provider Selector Component\n */\nexport class ProviderSelectorComponent {\n  \n  static create(\n    currentProvider: string,\n    providers: Record<string, any>,\n    onProviderChange: (provider: string) => void\n  ): HTMLElement {\n    const selectorEl = document.createElement('div');\n    selectorEl.className = 'provider-selector';\n\n    const labelEl = document.createElement('label');\n    labelEl.textContent = '🤖 Provider:';\n    labelEl.setAttribute('for', 'providerSelect');\n\n    const selectEl = document.createElement('select');\n    selectEl.id = 'providerSelect';\n    selectEl.className = 'provider-dropdown';\n\n    // Add provider options\n    Object.entries(providers).forEach(([providerId, provider]) => {\n      const optionEl = document.createElement('option');\n      optionEl.value = providerId;\n      optionEl.textContent = provider.name;\n      if (providerId === currentProvider) {\n        optionEl.selected = true;\n      }\n      selectEl.appendChild(optionEl);\n    });\n\n    // Add event listener\n    selectEl.addEventListener('change', () => {\n      onProviderChange(selectEl.value);\n    });\n\n    const statusEl = document.createElement('div');\n    statusEl.className = 'provider-status';\n    statusEl.id = 'providerStatus';\n\n    const indicatorEl = document.createElement('span');\n    indicatorEl.className = 'status-indicator';\n    indicatorEl.id = 'statusIndicator';\n    indicatorEl.textContent = '●';\n\n    const textEl = document.createElement('span');\n    textEl.className = 'status-text';\n    textEl.id = 'statusText';\n    textEl.textContent = 'Ready';\n\n    statusEl.appendChild(indicatorEl);\n    statusEl.appendChild(textEl);\n\n    selectorEl.appendChild(labelEl);\n    selectorEl.appendChild(selectEl);\n    selectorEl.appendChild(statusEl);\n\n    return selectorEl;\n  }\n}\n\n/**\n * Model Selector Component\n */\nexport class ModelSelectorComponent {\n  \n  static create(\n    currentModel: string,\n    models: string[],\n    onModelChange: (model: string) => void\n  ): HTMLElement {\n    const selectorEl = document.createElement('div');\n    selectorEl.className = 'model-selector';\n\n    const labelEl = document.createElement('label');\n    labelEl.textContent = '🧠 Model:';\n    labelEl.setAttribute('for', 'modelSelect');\n\n    const selectEl = document.createElement('select');\n    selectEl.id = 'modelSelect';\n    selectEl.className = 'model-dropdown';\n\n    // Add model options\n    models.forEach(model => {\n      const optionEl = document.createElement('option');\n      optionEl.value = model;\n      optionEl.textContent = this.getModelDisplayName(model);\n      if (model === currentModel) {\n        optionEl.selected = true;\n      }\n      selectEl.appendChild(optionEl);\n    });\n\n    // Add event listener\n    selectEl.addEventListener('change', () => {\n      onModelChange(selectEl.value);\n    });\n\n    selectorEl.appendChild(labelEl);\n    selectorEl.appendChild(selectEl);\n\n    return selectorEl;\n  }\n\n  private static getModelDisplayName(model: string): string {\n    const modelNames: Record<string, string> = {\n      'claude-sonnet-4-5-20250929': 'Claude Sonnet 4.5',\n      'claude-sonnet-4-20250514': 'Claude Sonnet 4',\n      'claude-3-5-haiku-20241022': 'Claude Haiku 3.5',\n      'claude-3-haiku-20240307': 'Claude Haiku 3',\n      'gpt-4': 'GPT-4',\n      'gpt-4-turbo': 'GPT-4 Turbo',\n      'gpt-3.5-turbo': 'GPT-3.5 Turbo',\n      'deepseek-chat': 'DeepSeek Chat',\n      'deepseek-coder': 'DeepSeek Coder',\n      'ollama': 'Ollama',\n      'lm-studio': 'LM Studio'\n    };\n    return modelNames[model] || model;\n  }\n}\n\n/**\n * Thinking Indicator Component\n */\nexport class ThinkingIndicatorComponent {\n  \n  static create(): HTMLElement {\n    const thinkingEl = document.createElement('div');\n    thinkingEl.className = 'thinking-indicator';\n    thinkingEl.id = 'thinkingIndicator';\n    thinkingEl.style.display = 'none';\n\n    const contentEl = document.createElement('div');\n    contentEl.className = 'thinking-content';\n\n    const foxEl = document.createElement('span');\n    foxEl.className = 'fox-thinking';\n    foxEl.textContent = '🦊';\n\n    const dotsEl = document.createElement('div');\n    dotsEl.className = 'thinking-dots';\n    for (let i = 0; i < 3; i++) {\n      const dotEl = document.createElement('span');\n      dotsEl.appendChild(dotEl);\n    }\n\n    const textEl = document.createElement('span');\n    textEl.className = 'thinking-text';\n    textEl.textContent = 'Thinking...';\n\n    contentEl.appendChild(foxEl);\n    contentEl.appendChild(dotsEl);\n    contentEl.appendChild(textEl);\n    thinkingEl.appendChild(contentEl);\n\n    return thinkingEl;\n  }\n}\n\n/**\n * Smart streaming buffer for natural typing speed\n */\nclass StreamingBuffer {\n  private buffer: string = '';\n  private timer: NodeJS.Timeout | null = null;\n  private messageId: string;\n  private onFlush: (content: string) => void;\n  public isStopped: boolean = false; // NEW: Track stopped state\n\n  // Speed presets for natural typing experience\n  private static readonly SPEED_PRESETS = {\n    slow: { delay: 150, minChunk: 1, maxChunk: 2 },     // Very readable, careful\n    medium: { delay: 80, minChunk: 1, maxChunk: 4 },    // Natural typing, slower\n    fast: { delay: 40, minChunk: 2, maxChunk: 6 },      // Quick but smooth\n    instant: { delay: 0, minChunk: 999, maxChunk: 999 } // Current behavior\n  };\n\n  private currentSpeed: keyof typeof StreamingBuffer.SPEED_PRESETS = 'medium';\n\n  constructor(messageId: string, onFlush: (content: string) => void) {\n    this.messageId = messageId;\n    this.onFlush = onFlush;\n  }\n\n  /**\n   * Add chunk to buffer with smart batching\n   */\n  addChunk(chunk: string): void {\n    // NEW: Stop processing if buffer is stopped\n    if (this.isStopped) {\n      console.log(`🛑 Buffer stopped - ignoring chunk for message: ${this.messageId}`);\n      return;\n    }\n\n    this.buffer += chunk;\n\n    const preset = StreamingBuffer.SPEED_PRESETS[this.currentSpeed];\n\n    // For instant mode, flush immediately\n    if (preset.delay === 0) {\n      this.flushBuffer();\n      return;\n    }\n\n    // Batch chunks for smooth display\n    if (this.buffer.length >= preset.minChunk && !this.timer) {\n      this.scheduleFlush(preset.delay);\n    } else if (this.buffer.length >= preset.maxChunk) {\n      // Force flush if buffer gets too large\n      this.flushBuffer();\n    }\n  }\n\n  /**\n   * Schedule buffer flush with natural timing\n   */\n  private scheduleFlush(delay: number): void {\n    // NEW: Don't schedule if stopped\n    if (this.isStopped) {\n      return;\n    }\n\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n\n    this.timer = setTimeout(() => {\n      // NEW: Check stopped state before flushing\n      if (!this.isStopped) {\n        this.flushBuffer();\n      }\n      this.timer = null;\n    }, delay);\n  }\n\n  /**\n   * Flush buffer to display\n   */\n  private flushBuffer(): void {\n    if (this.buffer.trim()) {\n      this.onFlush(this.buffer);\n      this.buffer = '';\n    }\n\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n  }\n\n  /**\n   * Force complete flush (for stream end)\n   */\n  complete(): void {\n    this.flushBuffer();\n  }\n\n  /**\n   * Clean up resources\n   */\n  destroy(): void {\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n    this.buffer = '';\n  }\n\n  /**\n   * Set streaming speed\n   */\n  setSpeed(speed: keyof typeof StreamingBuffer.SPEED_PRESETS): void {\n    this.currentSpeed = speed;\n  }\n\n  /**\n   * NEW: Stop buffer processing immediately\n   */\n  stop(): void {\n    console.log(`🛑 Stopping buffer for message: ${this.messageId}`);\n    this.isStopped = true;\n\n    // Clear any pending timer\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n\n    // Flush any remaining content immediately\n    if (this.buffer.length > 0) {\n      this.flushBuffer();\n    }\n  }\n\n  /**\n   * NEW: Check if buffer is stopped\n   */\n  isBufferStopped(): boolean {\n    return this.isStopped;\n  }\n}\n\n/**\n * Streaming Message Component\n * Handles real-time streaming AI responses with progress indicators\n */\nexport class StreamingMessageComponent {\n  private static activeBuffers = new Map<string, StreamingBuffer>();\n  private static globalSpeed: keyof typeof StreamingBuffer['SPEED_PRESETS'] = 'medium';\n  private static userHasScrolled = false;\n  private static lastScrollTime = 0;\n  private static markdownRenderTimers = new Map<string, NodeJS.Timeout>();\n  private static lastMarkdownRender = new Map<string, number>();\n  private static autoScrollDisabled = false; // User can disable auto-scroll completely\n\n  /**\n   * Create a streaming message element with progress indicators and stop button\n   */\n  static create(messageId: string): HTMLElement {\n    const messageEl = document.createElement('div');\n    messageEl.className = 'message assistant streaming';\n    messageEl.setAttribute('data-message-id', messageId);\n    messageEl.setAttribute('data-streaming', 'true');\n\n    // Message header with status and stop button\n    const headerEl = document.createElement('div');\n    headerEl.className = 'streaming-header';\n\n    const statusEl = document.createElement('span');\n    statusEl.className = 'streaming-status';\n    statusEl.innerHTML = '🤖 Assistant <span class=\"streaming-badge\">STREAMING</span>';\n\n    const stopBtn = document.createElement('button');\n    stopBtn.className = 'stream-stop-btn';\n    stopBtn.innerHTML = '⏹️ Stop';\n    stopBtn.title = 'Stop generating response';\n    stopBtn.onclick = () => this.stopStreaming(messageId);\n\n    headerEl.appendChild(statusEl);\n    headerEl.appendChild(stopBtn);\n\n    // Content area with streaming text and cursor\n    const contentEl = document.createElement('div');\n    contentEl.className = 'message-content streaming-content';\n\n    const textEl = document.createElement('div');\n    textEl.className = 'streaming-text nox-markdown';\n    textEl.textContent = ''; // Start empty\n\n    const cursorEl = document.createElement('span');\n    cursorEl.className = 'streaming-cursor';\n    cursorEl.textContent = '█';\n\n    contentEl.appendChild(textEl);\n    contentEl.appendChild(cursorEl);\n\n    // Progress bar section\n    const progressEl = document.createElement('div');\n    progressEl.className = 'streaming-progress';\n    progressEl.innerHTML = `\n      <div class=\"progress-info\">\n        <span class=\"progress-text\">🔄 Generating response...</span>\n        <span class=\"token-count\">0 tokens</span>\n      </div>\n      <div class=\"progress-bar\">\n        <div class=\"progress-fill\"></div>\n      </div>\n    `;\n\n    messageEl.appendChild(headerEl);\n    messageEl.appendChild(contentEl);\n    messageEl.appendChild(progressEl);\n\n    return messageEl;\n  }\n\n  /**\n   * Update streaming message content with new chunk using smart buffering\n   */\n  static updateContent(messageId: string, chunk: string, tokens?: number): void {\n    const messageEl = document.querySelector(`[data-message-id=\"${messageId}\"]`);\n    if (!messageEl || !messageEl.hasAttribute('data-streaming')) return;\n\n    // Get or create buffer for this message\n    let buffer = this.activeBuffers.get(messageId);\n    if (!buffer) {\n      buffer = new StreamingBuffer(messageId, (content: string) => {\n        this.flushContentToDisplay(messageId, content);\n      });\n      buffer.setSpeed(this.globalSpeed); // Use global speed setting\n      this.activeBuffers.set(messageId, buffer);\n    }\n\n    // If buffer is stopped, don't process new chunks (stream was stopped by user)\n    if (buffer.isStopped) {\n      console.log(`🛑 Buffer is stopped - ignoring chunk for message: ${messageId}`);\n      return;\n    }\n\n    // Add chunk to buffer for natural typing speed\n    buffer.addChunk(chunk);\n\n    // Update token count and progress (less frequently for better performance)\n    if (tokens && Math.random() < 0.3) { // Update ~30% of the time to reduce flicker\n      this.updateProgress(messageId, tokens);\n    }\n  }\n\n  /**\n   * Flush buffered content to display (called by StreamingBuffer)\n   */\n  private static flushContentToDisplay(messageId: string, content: string): void {\n    const messageEl = document.querySelector(`[data-message-id=\"${messageId}\"]`);\n    if (!messageEl || !messageEl.hasAttribute('data-streaming')) return;\n\n    const textEl = messageEl.querySelector('.streaming-text') as HTMLElement;\n    if (!textEl) return;\n\n    // PURE SEQUENTIAL STREAMING: Only append text, NO markdown rendering during streaming\n    // This ensures perfect line-by-line, character-by-character streaming\n    textEl.textContent += content;\n\n    // NO markdown rendering during streaming - this causes the chaos!\n    // Markdown will only be rendered when streaming completes\n\n    // ONLY expand container - NO auto-scroll logic during streaming\n    this.expandContainerOnly(messageEl as HTMLElement, textEl);\n  }\n\n  /**\n   * TEMPORARILY DISABLED FOR TESTING: Schedule smart markdown rendering\n   */\n  private static scheduleSmartMarkdownRender(messageId: string, textEl: HTMLElement): void {\n    // DISABLED FOR TESTING: No markdown rendering during streaming\n    // This will help us isolate if the chaos is caused by markdown rendering\n    // or by something else in the streaming process\n    console.log('🧪 TESTING: Markdown rendering call blocked');\n  }\n\n  /**\n   * TEMPORARILY DISABLED FOR TESTING: Render markdown safely\n   */\n  private static renderMarkdownSafely(messageId: string, textEl: HTMLElement): void {\n    // DISABLED FOR TESTING: No markdown rendering\n    console.log('🧪 TESTING: Markdown rendering blocked');\n  }\n\n  /**\n   * Update progress indicators\n   */\n  private static updateProgress(messageId: string, tokens: number): void {\n    const messageEl = document.querySelector(`[data-message-id=\"${messageId}\"]`);\n    if (!messageEl) return;\n\n    const tokenEl = messageEl.querySelector('.token-count') as HTMLElement;\n    const progressFill = messageEl.querySelector('.progress-fill') as HTMLElement;\n\n    if (tokenEl && tokens) {\n      tokenEl.textContent = `${tokens} tokens`;\n    }\n\n    // Update progress bar (estimate based on tokens)\n    if (progressFill && tokens) {\n      // Rough estimate: assume 4000 max tokens, show progress\n      const estimatedProgress = Math.min((tokens / 4000) * 100, 95); // Cap at 95% until complete\n      progressFill.style.width = `${estimatedProgress}%`;\n    }\n  }\n\n  /**\n   * Complete streaming and convert to regular message\n   */\n  static completeStreaming(messageId: string, finalMessage: ChatMessage): void {\n    const messageEl = document.querySelector(`[data-message-id=\"${messageId}\"]`);\n    if (!messageEl || !messageEl.hasAttribute('data-streaming')) return;\n\n    // Complete and clean up buffer\n    const buffer = this.activeBuffers.get(messageId);\n    if (buffer) {\n      buffer.complete(); // Flush any remaining content\n      buffer.destroy();  // Clean up resources\n      this.activeBuffers.delete(messageId);\n    }\n\n    // Clean up markdown render timers\n    const timer = this.markdownRenderTimers.get(messageId);\n    if (timer) {\n      clearTimeout(timer);\n      this.markdownRenderTimers.delete(messageId);\n    }\n    this.lastMarkdownRender.delete(messageId);\n\n    // TEMPORARILY DISABLED: Final markdown render for testing\n    // const textEl = messageEl.querySelector('.streaming-text') as HTMLElement;\n    // if (textEl && finalMessage.content) {\n    //   const renderer = NoxMarkdownRenderer.getInstance();\n    //   textEl.innerHTML = renderer.render(finalMessage.content);\n    // }\n\n    // FOR TESTING: Keep as plain text to see if chaos still happens\n    console.log('🧪 TESTING: Markdown rendering disabled to isolate streaming chaos issue');\n\n    // Remove streaming attributes and classes\n    messageEl.removeAttribute('data-streaming');\n    messageEl.classList.remove('streaming');\n\n    // OPTIONAL: Scroll to bottom only if user was following along\n    // This is gentle and only happens once when streaming completes\n    this.optionalScrollToBottomOnComplete();\n\n    // Re-enable auto-scroll for next streaming session\n    this.autoScrollDisabled = false;\n\n    // Remove streaming-specific elements\n    const headerEl = messageEl.querySelector('.streaming-header');\n    const progressEl = messageEl.querySelector('.streaming-progress');\n    const cursorEl = messageEl.querySelector('.streaming-cursor');\n\n    if (headerEl) headerEl.remove();\n    if (progressEl) progressEl.remove();\n    if (cursorEl) cursorEl.remove();\n\n    // Update content with final rendered markdown\n    const contentEl = messageEl.querySelector('.message-content');\n    if (contentEl) {\n      contentEl.className = 'message-content'; // Remove streaming class\n\n      const textEl = contentEl.querySelector('.streaming-text');\n      if (textEl) {\n        textEl.className = 'nox-markdown'; // Remove streaming class\n\n        // Final markdown render\n        const renderer = NoxMarkdownRenderer.getInstance();\n        textEl.innerHTML = renderer.render(finalMessage.content);\n      }\n    }\n\n    // Add final message metadata\n    const metaEl = MessageComponent.createMessageMeta(finalMessage);\n    messageEl.appendChild(metaEl);\n\n    // Update message ID to match final message\n    messageEl.setAttribute('data-message-id', finalMessage.id);\n\n    // Hide scroll indicator when streaming completes\n    this.hideScrollIndicator();\n  }\n\n  /**\n   * NEW: Stop streaming buffer immediately\n   */\n  static stopStreamingBuffer(messageId: string): void {\n    const buffer = this.activeBuffers.get(messageId);\n    if (buffer) {\n      console.log(`🛑 Stopping streaming buffer for message: ${messageId}`);\n      buffer.stop();\n    } else {\n      console.warn(`🛑 No active buffer found for message: ${messageId}`);\n    }\n  }\n\n  /**\n   * NEW: Update stop/continue button state with immediate visual feedback\n   */\n  private static updateStopButtonState(messageId: string, state: 'stopping' | 'stopped' | 'continuing'): void {\n    const messageEl = document.querySelector(`[data-message-id=\"${messageId}\"]`);\n    if (!messageEl) {\n      console.warn(`🛑 Message element not found for: ${messageId}`);\n      return;\n    }\n\n    const stopBtn = messageEl.querySelector('.stream-stop-btn, .stream-continue-btn') as HTMLButtonElement;\n    const progressText = messageEl.querySelector('.progress-text') as HTMLElement;\n    const cursorEl = messageEl.querySelector('.streaming-cursor') as HTMLElement;\n\n    if (!stopBtn) {\n      console.warn(`🛑 Stop button not found for: ${messageId}`);\n      return;\n    }\n\n    console.log(`🛑 Updating button state to: ${state} for message: ${messageId}`);\n\n    switch (state) {\n      case 'stopping':\n        stopBtn.disabled = true;\n        stopBtn.innerHTML = '⏸️ Stopping...';\n        stopBtn.title = 'Stopping generation...';\n        if (progressText) {\n          progressText.textContent = '⏸️ Stopping generation...';\n        }\n        // Hide cursor immediately\n        if (cursorEl) {\n          cursorEl.style.display = 'none';\n        }\n        // Stop any progress animations\n        const progressContainer = messageEl.querySelector('.progress-container') as HTMLElement;\n        if (progressContainer) {\n          progressContainer.style.display = 'none';\n        }\n        break;\n\n      case 'stopped':\n        stopBtn.disabled = false;\n        stopBtn.innerHTML = '▶️ Continue';\n        stopBtn.title = 'Continue generating response';\n        stopBtn.className = 'stream-continue-btn';\n        stopBtn.onclick = () => this.continueStreaming(messageId);\n        if (progressText) {\n          progressText.textContent = '⏸️ Generation stopped - Click Continue to resume';\n        }\n        // Keep cursor hidden\n        if (cursorEl) {\n          cursorEl.style.display = 'none';\n        }\n        break;\n\n      case 'continuing':\n        stopBtn.disabled = true;\n        stopBtn.innerHTML = '⏳ Resuming...';\n        stopBtn.title = 'Resuming generation...';\n        stopBtn.className = 'stream-stop-btn'; // Will change back to stop when streaming resumes\n        if (progressText) {\n          progressText.textContent = '⏳ Resuming generation...';\n        }\n        // Show cursor again\n        if (cursorEl) {\n          cursorEl.style.display = 'inline';\n        }\n        break;\n    }\n  }\n\n  /**\n   * Stop streaming request\n   */\n  private static stopStreaming(messageId: string): void {\n    try {\n      console.log(`🛑 FRONTEND: Stop streaming requested for message: ${messageId}`);\n\n      // NEW: Stop buffer processing immediately\n      this.stopStreamingBuffer(messageId);\n\n      // NEW: Update UI immediately to show stopping state\n      this.updateStopButtonState(messageId, 'stopping');\n\n      const vscode = (window as any).vscodeApi || (window as any).acquireVsCodeApi();\n      console.log(`🛑 FRONTEND: Sending streamStop message to backend for: ${messageId}`);\n\n      vscode.postMessage({\n        type: 'streamStop',\n        messageId: messageId\n      });\n\n      console.log(`🛑 FRONTEND: streamStop message sent for: ${messageId}`);\n\n    } catch (error) {\n      console.error('🛑 FRONTEND: Failed to stop streaming:', error);\n    }\n  }\n\n  /**\n   * Handle streaming error\n   */\n  static handleStreamingError(messageId: string, error: string): void {\n    const messageEl = document.querySelector(`[data-message-id=\"${messageId}\"]`);\n    if (!messageEl || !messageEl.hasAttribute('data-streaming')) return;\n\n    // Clean up buffer on error\n    const buffer = this.activeBuffers.get(messageId);\n    if (buffer) {\n      buffer.complete(); // Flush any remaining content\n      buffer.destroy();  // Clean up resources\n      this.activeBuffers.delete(messageId);\n    }\n\n    // Clean up markdown render timers\n    const timer = this.markdownRenderTimers.get(messageId);\n    if (timer) {\n      clearTimeout(timer);\n      this.markdownRenderTimers.delete(messageId);\n    }\n    this.lastMarkdownRender.delete(messageId);\n\n    // Update progress to show error\n    const progressText = messageEl.querySelector('.progress-text') as HTMLElement;\n    const stopBtn = messageEl.querySelector('.stream-stop-btn') as HTMLButtonElement;\n\n    if (progressText) {\n      progressText.innerHTML = '❌ Error occurred during streaming';\n      progressText.style.color = '#ef4444';\n    }\n\n    if (stopBtn) {\n      stopBtn.style.display = 'none';\n    }\n\n    // Add error message to content\n    const textEl = messageEl.querySelector('.streaming-text') as HTMLElement;\n    if (textEl) {\n      textEl.innerHTML += `<div class=\"streaming-error\">❌ ${error}</div>`;\n    }\n  }\n\n  /**\n   * ⏹️ Handle stream stopped - Update UI to show stopped state with continue option\n   */\n  static handleStreamStopped(messageId: string, partialContent?: string): void {\n    const messageEl = document.querySelector(`[data-message-id=\"${messageId}\"]`);\n    if (!messageEl || !messageEl.hasAttribute('data-streaming')) return;\n\n    console.log('⏹️ Handling stream stopped for message:', messageId);\n\n    // NEW: Stop buffer processing and clean up\n    this.stopStreamingBuffer(messageId);\n\n    // Flush any remaining content in buffer\n    const buffer = this.activeBuffers.get(messageId);\n    if (buffer) {\n      buffer.complete(); // Flush remaining content\n      // Don't destroy buffer yet - we might need to continue\n    }\n\n    // NEW: Update button state to stopped with continue option\n    this.updateStopButtonState(messageId, 'stopped');\n\n    // Update status to show stopped state\n    const statusEl = messageEl.querySelector('.streaming-status');\n    if (statusEl) {\n      statusEl.innerHTML = '🤖 Assistant <span class=\"streaming-badge stopped\">STOPPED</span>';\n    }\n\n    // Mark message as stopped (but still streaming-capable)\n    messageEl.setAttribute('data-streaming-stopped', 'true');\n\n    console.log('⏹️ Stream stopped UI updated for message:', messageId);\n  }\n\n  /**\n   * ▶️ Continue streaming request\n   */\n  private static continueStreaming(messageId: string): void {\n    try {\n      console.log(`▶️ Continue streaming requested for message: ${messageId}`);\n\n      // NEW: Update UI immediately to show continuing state\n      this.updateStopButtonState(messageId, 'continuing');\n\n      // Update status to show streaming again\n      const messageEl = document.querySelector(`[data-message-id=\"${messageId}\"]`);\n      if (messageEl) {\n        const statusEl = messageEl.querySelector('.streaming-status');\n        if (statusEl) {\n          statusEl.innerHTML = '🤖 Assistant <span class=\"streaming-badge\">STREAMING</span>';\n        }\n\n        // Remove stopped attribute\n        messageEl.removeAttribute('data-streaming-stopped');\n      }\n\n      // Reset buffer's stopped state so it can process new chunks\n      const buffer = this.activeBuffers.get(messageId);\n      if (buffer) {\n        buffer.isStopped = false;\n        console.log(`🔄 Resetting stopped buffer for explicit continue: ${messageId}`);\n      }\n\n      const vscode = (window as any).vscodeApi || (window as any).acquireVsCodeApi();\n      vscode.postMessage({\n        type: 'streamContinue',\n        messageId: messageId\n      });\n\n    } catch (error) {\n      console.error('Failed to continue streaming:', error);\n    }\n  }\n\n  /**\n   * SIMPLE: Only expand container, NO scroll interference during streaming\n   */\n  private static expandContainerOnly(messageEl: HTMLElement, textEl: HTMLElement): void {\n    // Force height recalculation to accommodate new content\n    messageEl.style.height = 'auto';\n    textEl.style.height = 'auto';\n\n    // That's it! No scroll logic, no interference, just let the container grow\n    // User has complete scroll freedom during streaming\n  }\n\n  /**\n   * OPTIONAL: Gentle scroll to bottom only when streaming completes\n   */\n  private static optionalScrollToBottomOnComplete(): void {\n    const messagesContainer = document.getElementById('messagesContainer');\n    if (!messagesContainer) return;\n\n    const scrollTop = messagesContainer.scrollTop;\n    const scrollHeight = messagesContainer.scrollHeight;\n    const clientHeight = messagesContainer.clientHeight;\n\n    // Only scroll if user was already near the bottom (within 200px)\n    // This suggests they were following along\n    const wasNearBottom = (scrollTop + clientHeight) >= (scrollHeight - 200);\n\n    if (wasNearBottom && !this.userHasScrolled) {\n      // Gentle scroll to show the complete response\n      messagesContainer.scrollTop = messagesContainer.scrollHeight;\n      console.log('📜 Gentle scroll to bottom - streaming complete');\n    } else {\n      console.log('🛑 User was reading elsewhere - no scroll interference');\n    }\n  }\n\n  /**\n   * Setup scroll listener to detect user scroll intent\n   */\n  private static setupScrollListener(): void {\n    const messagesContainer = document.getElementById('messagesContainer');\n    if (messagesContainer && !messagesContainer.hasAttribute('data-scroll-listener')) {\n      messagesContainer.setAttribute('data-scroll-listener', 'true');\n\n      messagesContainer.addEventListener('scroll', () => {\n        this.userHasScrolled = true;\n        this.lastScrollTime = Date.now();\n      });\n    }\n  }\n\n  /**\n   * Ensure streaming content is visible and container expands properly\n   * NEVER hold the page hostage - respect user scroll freedom\n   */\n  private static ensureContentVisible(messageEl: HTMLElement, textEl: HTMLElement): void {\n    // Force height recalculation\n    messageEl.style.height = 'auto';\n\n    // Ensure the text container expands\n    textEl.style.height = 'auto';\n\n    // Setup scroll listener if not already done\n    this.setupScrollListener();\n\n    // MINIMAL auto-scroll: only if user is actively following at the very bottom\n    const messagesContainer = document.getElementById('messagesContainer');\n    if (messagesContainer) {\n      const scrollTop = messagesContainer.scrollTop;\n      const scrollHeight = messagesContainer.scrollHeight;\n      const clientHeight = messagesContainer.clientHeight;\n\n      // Much longer grace period - if user scrolled in last 5 seconds, leave them alone\n      const recentlyScrolled = this.userHasScrolled && (Date.now() - this.lastScrollTime) < 5000;\n\n      // Very strict bottom detection - only auto-scroll if user is RIGHT at the bottom\n      const isRightAtBottom = (scrollTop + clientHeight) >= (scrollHeight - 5);\n\n      // RESPECT USER FREEDOM: No auto-scroll if disabled or user has scrolled\n      if (!this.autoScrollDisabled && isRightAtBottom && !recentlyScrolled) {\n        // User is actively following along - gentle scroll to show new content\n        messagesContainer.scrollTop = messagesContainer.scrollHeight;\n        this.hideScrollIndicator();\n      } else {\n        // User has scrolled up or wants to read - RESPECT THEIR FREEDOM\n        // Show indicator but DON'T force scroll\n        this.showScrollIndicator();\n\n        // If user scrolled up significantly, disable auto-scroll for this session\n        if (recentlyScrolled && (scrollHeight - scrollTop - clientHeight) > 100) {\n          this.autoScrollDisabled = true;\n          console.log('🛑 Auto-scroll disabled - user wants to read freely');\n        }\n      }\n    }\n  }\n\n  /**\n   * Show scroll indicator when user scrolls up during streaming\n   */\n  private static showScrollIndicator(): void {\n    let indicator = document.getElementById('streamScrollIndicator');\n    if (!indicator) {\n      indicator = document.createElement('div');\n      indicator.id = 'streamScrollIndicator';\n      indicator.className = 'scroll-indicator';\n      indicator.innerHTML = 'New content below';\n      indicator.onclick = () => this.scrollToBottom();\n      document.body.appendChild(indicator);\n    }\n    indicator.classList.add('visible');\n  }\n\n  /**\n   * Hide scroll indicator\n   */\n  private static hideScrollIndicator(): void {\n    const indicator = document.getElementById('streamScrollIndicator');\n    if (indicator) {\n      indicator.classList.remove('visible');\n    }\n  }\n\n  /**\n   * Scroll to bottom and hide indicator\n   */\n  private static scrollToBottom(): void {\n    const messagesContainer = document.getElementById('messagesContainer');\n    if (messagesContainer) {\n      messagesContainer.scrollTop = messagesContainer.scrollHeight;\n    }\n    this.hideScrollIndicator();\n  }\n\n  /**\n   * Set global streaming speed for all new streams\n   */\n  static setStreamingSpeed(speed: 'slow' | 'medium' | 'fast' | 'instant'): void {\n    this.globalSpeed = speed;\n\n    // Update existing active buffers\n    this.activeBuffers.forEach(buffer => {\n      buffer.setSpeed(speed);\n    });\n\n    console.log(`🌊 Streaming speed set to: ${speed}`);\n  }\n\n  /**\n   * Get current streaming speed\n   */\n  static getStreamingSpeed(): string {\n    return this.globalSpeed;\n  }\n\n  /**\n   * Get available streaming speeds with descriptions\n   */\n  static getAvailableSpeeds(): Array<{value: string, label: string, description: string}> {\n    return [\n      { value: 'slow', label: 'Slow', description: 'Very readable, like careful typing (120ms)' },\n      { value: 'medium', label: 'Medium', description: 'Natural typing speed (60ms)' },\n      { value: 'fast', label: 'Fast', description: 'Quick but smooth (30ms)' },\n      { value: 'instant', label: 'Instant', description: 'No delay, current behavior' }\n    ];\n  }\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/**\n * 🦊 Nox Enterprise Chat Interface Styles\n * Complete Aurora-themed styling for VS Code sidebar chat\n */\n\n/* Aurora Theme Variables */\n/* 🎨 CRITICAL FIX: Removed hardcoded Aurora color fallback values to prevent CSS from overriding theme persistence.\n   Theme-specific values are ONLY set via:\n   1. Embedded CSS in HTML head with !important flags (on initial load)\n   2. JavaScript injection with setProperty(..., 'important') (on theme changes)\n\n   This :root selector now ONLY contains VS Code integration variables and button references.\n   Aurora color variables are set ONLY by JavaScript to ensure theme persistence works correctly. */\n:root {\n  /* Aurora Theme Colors - Set by JavaScript on load and theme changes */\n  /* NO VS Code variables - complete Aurora control */\n\n  /* Backgrounds */\n  --bg-primary: #0a0e27;\n  --bg-secondary: #1a1f3a;\n  --bg-tertiary: rgba(20, 30, 48, 0.9);\n  --bg-surface: rgba(30, 41, 59, 0.8);\n\n  /* Text Colors */\n  --text-primary: #e2e8f0;\n  --text-secondary: #94a3b8;\n  --text-muted: #64748b;\n\n  /* Input & Borders */\n  --input-bg: rgba(30, 41, 59, 0.8);\n  --input-border: rgba(76, 154, 255, 0.3);\n  --border-color: rgba(76, 154, 255, 0.2);\n\n  /* Button Colors - Reference aurora colors which will be set by JavaScript */\n  --button-bg: var(--aurora-blue);\n  --button-hover: var(--aurora-purple);\n}\n\n/* Reset and Base */\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\n    Ubuntu, Cantarell, sans-serif;\n  font-size: 13px;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  height: 100vh;\n  overflow: hidden;\n}\n\n/* Aurora Background (Theme-Aware) */\n.aurora-bg {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(\n    45deg,\n    var(--aurora-anim-1, rgba(76, 154, 255, 0.1)) 0%,\n    var(--aurora-anim-2, rgba(139, 92, 246, 0.1)) 25%,\n    var(--aurora-anim-3, rgba(16, 185, 129, 0.1)) 50%,\n    var(--aurora-anim-4, rgba(244, 114, 182, 0.1)) 75%,\n    var(--aurora-anim-5, rgba(6, 182, 212, 0.1)) 100%\n  );\n  background-size: 400% 400%;\n  animation: aurora-flow 15s ease-in-out infinite;\n  pointer-events: none;\n  z-index: -1;\n}\n\n@keyframes aurora-flow {\n  0%,\n  100% {\n    background-position: 0% 50%;\n  }\n  50% {\n    background-position: 100% 50%;\n  }\n}\n\n/* Main Container */\n.chat-container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  position: relative;\n}\n\n/* Provider Controls Header (Collapsible) */\n.provider-controls {\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--aurora-blue);\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  backdrop-filter: blur(10px);\n  overflow: hidden;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  max-height: 500px; /* Default expanded state */\n}\n\n.provider-controls.collapsed {\n  max-height: 0;\n  padding: 0 12px;\n  border-bottom: none;\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.provider-selector,\n.model-selector {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 12px;\n}\n\n.provider-selector label,\n.model-selector label {\n  color: var(--aurora-blue);\n  font-weight: 600;\n  min-width: 60px;\n}\n\n.provider-dropdown,\n.model-dropdown {\n  flex: 1;\n  background: var(--bg-surface);\n  border: 1px solid var(--aurora-blue);\n  border-radius: 6px;\n  color: var(--text-primary);\n  padding: 4px 8px;\n  font-size: 11px;\n  outline: none;\n  transition: all 0.2s ease;\n}\n\n.provider-dropdown:focus,\n.model-dropdown:focus {\n  border-color: var(--aurora-purple);\n  box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);\n}\n\n.provider-status {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 10px;\n}\n\n.status-indicator {\n  font-size: 8px;\n  color: var(--aurora-green);\n}\n\n.status-indicator.error {\n  color: var(--status-error, #ef4444);\n}\n\n.status-indicator.warning {\n  color: var(--status-warning, #f59e0b);\n}\n\n.status-text {\n  color: var(--text-secondary);\n}\n\n/* Enhanced Cost Tracker */\n.cost-tracker {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 8px;\n  font-size: 11px;\n  color: var(--text-secondary);\n  padding: 8px;\n  background: linear-gradient(\n    135deg,\n    rgba(76, 154, 255, 0.05),\n    rgba(139, 92, 246, 0.05)\n  );\n  border: 1px solid rgba(139, 92, 246, 0.2);\n  border-radius: 8px;\n  margin-bottom: 8px;\n}\n\n.cost-info,\n.token-info {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2px;\n  padding: 4px;\n  border-radius: 6px;\n  background: rgba(255, 255, 255, 0.02);\n}\n\n.cost-label,\n.token-label {\n  font-size: 9px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  opacity: 0.8;\n}\n\n.cost-value {\n  color: var(--aurora-green);\n  font-weight: 700;\n  font-size: 12px;\n}\n\n.token-value {\n  color: var(--aurora-cyan);\n  font-weight: 700;\n  font-size: 12px;\n}\n\n/* Session Summary */\n.session-summary {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 10px;\n  color: var(--text-secondary);\n  padding: 4px 8px;\n  background: rgba(16, 185, 129, 0.1);\n  border-radius: 4px;\n  margin-top: 4px;\n}\n\n.session-messages {\n  color: var(--aurora-blue);\n  font-weight: 600;\n}\n\n/* Messages Container */\n.messages-container {\n  flex: 1;\n  overflow-y: auto;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  position: relative; /* For scroll indicator positioning */\n}\n\n.messages-container::-webkit-scrollbar {\n  width: 6px;\n}\n\n.messages-container::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.messages-container::-webkit-scrollbar-thumb {\n  background: var(--aurora-blue);\n  border-radius: 3px;\n}\n\n/* Welcome Message */\n.welcome-message {\n  text-align: center;\n  padding: 20px 10px;\n  background: linear-gradient(\n    135deg,\n    rgba(76, 154, 255, 0.1),\n    rgba(139, 92, 246, 0.1)\n  );\n  border-radius: 12px;\n  border: 1px solid rgba(76, 154, 255, 0.2);\n}\n\n.fox-welcome {\n  font-size: 24px;\n  margin-bottom: 8px;\n}\n\n.welcome-title {\n  color: var(--aurora-blue);\n  font-weight: 600;\n  margin-bottom: 4px;\n}\n\n.welcome-subtitle {\n  color: var(--text-secondary);\n  font-size: 11px;\n}\n\n/* Enhanced Messages */\n.message {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 12px;\n  border-radius: 12px;\n  position: relative;\n  margin-bottom: 8px;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n\n.message:hover {\n  border-color: rgba(76, 154, 255, 0.3);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.message.user {\n  background: linear-gradient(\n    135deg,\n    rgba(244, 114, 182, 0.15),\n    rgba(139, 92, 246, 0.08)\n  );\n  border-left: 4px solid var(--aurora-pink);\n  margin-left: 16px;\n  margin-right: 0;\n}\n\n.message.assistant {\n  background: linear-gradient(\n    135deg,\n    rgba(16, 185, 129, 0.15),\n    rgba(76, 154, 255, 0.08)\n  );\n  border-left: 4px solid var(--aurora-green);\n  margin-left: 0;\n  margin-right: 16px;\n}\n\n.message-content {\n  color: var(--text-primary);\n  line-height: 1.5;\n  font-size: 13px;\n  word-wrap: break-word;\n}\n\n.message-meta {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 10px;\n  color: var(--text-secondary);\n  margin-top: 6px;\n  padding-top: 6px;\n  border-top: 1px solid rgba(139, 92, 246, 0.15);\n  background: rgba(0, 0, 0, 0.1);\n  padding: 4px 8px;\n  border-radius: 6px;\n  margin: 6px -4px -4px -4px;\n}\n\n/* Message Actions */\n.message-actions {\n  display: flex;\n  gap: 4px;\n  opacity: 1;\n  transition: opacity 0.2s ease;\n}\n\n.message:hover .message-actions {\n  opacity: 1;\n}\n\n.message-action-btn {\n  background: rgba(76, 154, 255, 0.1);\n  border: 1px solid rgba(76, 154, 255, 0.3);\n  border-radius: 4px;\n  padding: 2px 6px;\n  font-size: 9px;\n  color: var(--aurora-blue);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.message-action-btn:hover {\n  background: rgba(76, 154, 255, 0.2);\n  border-color: var(--aurora-blue);\n  transform: scale(1.05);\n}\n\n.message-action-btn.copy {\n  color: var(--aurora-green);\n  border-color: rgba(16, 185, 129, 0.3);\n  background: rgba(16, 185, 129, 0.1);\n}\n\n.message-action-btn.copy:hover {\n  background: rgba(16, 185, 129, 0.2);\n  border-color: var(--aurora-green);\n}\n\n.message-action-btn.regenerate {\n  color: var(--aurora-orange);\n  border-color: rgba(255, 107, 53, 0.3);\n  background: rgba(255, 107, 53, 0.1);\n}\n\n.message-action-btn.regenerate:hover {\n  background: rgba(255, 107, 53, 0.2);\n  border-color: var(--aurora-orange);\n}\n\n.message-action-btn.delete {\n  color: var(--aurora-pink);\n  border-color: rgba(244, 114, 182, 0.3);\n  background: rgba(244, 114, 182, 0.1);\n}\n\n.message-action-btn.delete:hover {\n  background: rgba(244, 114, 182, 0.2);\n  border-color: var(--aurora-pink);\n}\n\n/* Enhanced Message Info */\n.message-info {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.message-cost {\n  color: var(--aurora-green);\n  font-weight: 700;\n  background: rgba(16, 185, 129, 0.1);\n  padding: 1px 4px;\n  border-radius: 3px;\n  font-size: 9px;\n}\n\n.message-tokens {\n  color: var(--aurora-cyan);\n  font-weight: 600;\n  background: rgba(6, 182, 212, 0.1);\n  padding: 1px 4px;\n  border-radius: 3px;\n  font-size: 9px;\n}\n\n.message-provider {\n  color: var(--aurora-blue);\n  font-weight: 600;\n  background: rgba(76, 154, 255, 0.1);\n  padding: 1px 4px;\n  border-radius: 3px;\n  font-size: 9px;\n}\n\n.message-time {\n  color: var(--text-secondary);\n  font-size: 9px;\n  opacity: 0.8;\n  font-weight: 500;\n}\n\n.message-date {\n  color: var(--aurora-blue);\n  font-size: 8px;\n  opacity: 0.9;\n  font-weight: 600;\n  background: rgba(76, 154, 255, 0.1);\n  padding: 1px 4px;\n  border-radius: 3px;\n  margin-left: 4px;\n  border: 1px solid rgba(76, 154, 255, 0.2);\n}\n\n/* Input Area */\n.input-container {\n  padding: 12px;\n  background: var(--bg-secondary);\n  border-top: 1px solid var(--aurora-blue);\n  backdrop-filter: blur(10px);\n}\n\n.input-wrapper {\n  display: flex;\n  gap: 8px;\n  align-items: flex-end;\n}\n\n/* Input field container with inline mic button */\n.input-field-container {\n  flex: 1;\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.message-input {\n  flex: 1;\n  background: var(--bg-surface);\n  border: 1px solid var(--aurora-blue);\n  border-radius: 8px;\n  color: var(--text-primary);\n  padding: 8px 40px 8px 12px; /* Extra padding on right for mic button */\n  font-size: 13px;\n  line-height: 1.4;\n  resize: none;\n  outline: none;\n  transition: all 0.2s ease;\n  min-height: 36px;\n  max-height: 120px;\n}\n\n.message-input:focus {\n  border-color: var(--aurora-purple);\n  box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);\n}\n\n.send-button {\n  background: var(--button-bg);\n  border: none;\n  border-radius: 6px;\n  color: white;\n  padding: 8px 12px;\n  font-size: 12px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-width: 60px;\n}\n\n.send-button:hover {\n  background: var(--button-hover);\n  transform: translateY(-1px);\n}\n\n.send-button:active {\n  transform: translateY(0);\n}\n\n.send-button:disabled {\n  background: rgba(76, 154, 255, 0.3);\n  cursor: not-allowed;\n  transform: none;\n}\n\n/* 🎤 Professional Inline Microphone Button */\n.mic-button-inline {\n  position: absolute;\n  right: 8px;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: var(--aurora-blue);\n  padding: 6px;\n  cursor: pointer;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n}\n\n.mic-button-inline:hover {\n  background: rgba(76, 154, 255, 0.1);\n  color: var(--aurora-cyan);\n  transform: translateY(-50%) scale(1.1);\n}\n\n.mic-button-inline:active {\n  transform: translateY(-50%) scale(0.95);\n}\n\n.mic-button-inline.recording {\n  color: #ef4444;\n  background: rgba(239, 68, 68, 0.1);\n  /* No animation - static button */\n}\n\n.mic-button-inline.recording:hover {\n  color: #dc2626;\n  background: rgba(239, 68, 68, 0.2);\n  transform: translateY(-50%) scale(1.05);\n}\n\n.mic-button-inline:disabled {\n  color: rgba(76, 154, 255, 0.3);\n  cursor: not-allowed;\n  transform: translateY(-50%);\n}\n\n.mic-button-inline:disabled:hover {\n  background: transparent;\n  transform: translateY(-50%);\n}\n\n.mic-icon {\n  transition: all 0.2s ease;\n}\n\n/* Icon toggle for recording state */\n.mic-button-inline .mic-icon {\n  display: block;\n}\n\n.mic-button-inline .stop-icon {\n  display: none;\n}\n\n.mic-button-inline.recording .mic-icon {\n  display: none;\n}\n\n.mic-button-inline.recording .stop-icon {\n  display: block !important;\n  color: #ff0000 !important;\n  position: relative !important;\n  top: 0 !important;\n  left: 0 !important;\n  transform: none !important;\n  /* Bright red hollow square outline - no fill for transparent center */\n}\n\n/* Button animation removed - using static icons with pulsing dots animation instead */\n\n/* 🎤 Voice Recording Modal */\n.voice-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.8);\n  display: none;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.voice-modal-content {\n  background: var(--bg-primary);\n  border: 2px solid var(--aurora-blue);\n  border-radius: 16px;\n  padding: 32px;\n  text-align: center;\n  min-width: 300px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n}\n\n.voice-modal-icon {\n  font-size: 48px;\n  margin-bottom: 16px;\n  animation: pulse-modal 1.5s infinite;\n}\n\n.voice-modal-text {\n  color: var(--text-primary);\n  font-size: 18px;\n  font-weight: 600;\n  margin-bottom: 24px;\n}\n\n.voice-modal-animation {\n  position: relative;\n  width: 80px;\n  height: 80px;\n  margin: 0 auto 24px;\n}\n\n.pulse-ring {\n  position: absolute;\n  border: 2px solid var(--aurora-blue);\n  border-radius: 50%;\n  width: 100%;\n  height: 100%;\n  animation: pulse-ring 1.5s infinite;\n}\n\n.pulse-ring:nth-child(2) {\n  animation-delay: 0.5s;\n}\n\n.pulse-ring:nth-child(3) {\n  animation-delay: 1s;\n}\n\n.voice-modal-stop {\n  background: #ef4444;\n  border: none;\n  border-radius: 8px;\n  color: white;\n  padding: 12px 24px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.voice-modal-stop:hover {\n  background: #dc2626;\n  transform: translateY(-1px);\n}\n\n@keyframes pulse-modal {\n  0%,\n  100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.1);\n  }\n}\n\n@keyframes pulse-ring {\n  0% {\n    transform: scale(0.8);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(1.4);\n    opacity: 0;\n  }\n}\n\n/* 🎤 Native Voice Button (positioned next to mic button) */\n.native-voice-button-inline {\n  position: absolute;\n  right: 36px; /* Position to the left of the mic button */\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: var(--aurora-green);\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n}\n\n.native-voice-button-inline:hover {\n  background: rgba(34, 197, 94, 0.1);\n  color: var(--aurora-cyan);\n  transform: translateY(-50%) scale(1.1);\n}\n\n.native-voice-button-inline:active {\n  transform: translateY(-50%) scale(0.95);\n}\n\n.voice-icon {\n  transition: all 0.2s ease;\n}\n\n/* 🎤 Voice Recording Animation (inside input field) */\n.input-field-container {\n  position: relative;\n}\n\n.voice-recording-animation {\n  position: absolute;\n  left: 12px;\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n  gap: 3px;\n  align-items: center;\n  z-index: 2;\n  pointer-events: none;\n}\n\n.pulse-dot {\n  width: 4px;\n  height: 4px;\n  background: #ef4444;\n  border-radius: 50%;\n  animation: pulse-dot 1.4s infinite ease-in-out;\n}\n\n.pulse-dot:nth-child(1) {\n  animation-delay: 0s;\n}\n\n.pulse-dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.pulse-dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes pulse-dot {\n  0%,\n  80%,\n  100% {\n    transform: scale(0.8);\n    opacity: 0.5;\n  }\n  40% {\n    transform: scale(1.2);\n    opacity: 1;\n  }\n}\n\n/* Adjust input padding when recording to make room for animation */\n.message-input.recording {\n  padding-left: 32px;\n}\n\n/* Voice Error Message */\n.voice-error-message {\n  margin-top: 8px;\n  padding: 8px 12px;\n  background: rgba(239, 68, 68, 0.1);\n  border: 1px solid rgba(239, 68, 68, 0.3);\n  border-radius: 6px;\n  animation: slideInFromTop 0.3s ease-out;\n}\n\n.error-content {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 12px;\n  color: #ef4444;\n}\n\n.error-icon {\n  flex-shrink: 0;\n  width: 16px;\n  height: 16px;\n}\n\n.error-text {\n  flex: 1;\n  line-height: 1.4;\n}\n\n.error-action {\n  background: #ef4444;\n  color: white;\n  border: none;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  cursor: pointer;\n  transition: background 0.2s ease;\n}\n\n.error-action:hover {\n  background: #dc2626;\n}\n\n@keyframes slideInFromTop {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Thinking Indicator */\n.thinking-indicator {\n  display: none;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: linear-gradient(\n    135deg,\n    rgba(139, 92, 246, 0.1),\n    rgba(76, 154, 255, 0.05)\n  );\n  border-radius: 8px;\n  border-left: 3px solid var(--aurora-purple);\n  margin-left: 20px;\n  margin-right: 0;\n  font-size: 12px;\n  color: var(--text-secondary);\n}\n\n.thinking-indicator.show {\n  display: flex;\n}\n\n.thinking-dots {\n  display: flex;\n  gap: 2px;\n}\n\n.thinking-dot {\n  width: 4px;\n  height: 4px;\n  background: var(--aurora-purple);\n  border-radius: 50%;\n  animation: thinking-pulse 1.4s ease-in-out infinite both;\n}\n\n.thinking-dot:nth-child(1) {\n  animation-delay: -0.32s;\n}\n.thinking-dot:nth-child(2) {\n  animation-delay: -0.16s;\n}\n.thinking-dot:nth-child(3) {\n  animation-delay: 0;\n}\n\n@keyframes thinking-pulse {\n  0%,\n  80%,\n  100% {\n    transform: scale(0.8);\n    opacity: 0.5;\n  }\n  40% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n/* Enhanced Animations */\n@keyframes fadeInOut {\n  0% {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  10% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n  90% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n  100% {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n}\n\n@keyframes slideInFromRight {\n  from {\n    opacity: 0;\n    transform: translateX(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes slideInFromLeft {\n  from {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes scaleIn {\n  from {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n/* Message Animations */\n.message.user {\n  animation: slideInFromRight 0.3s ease-out;\n}\n\n.message.assistant {\n  animation: slideInFromLeft 0.3s ease-out;\n}\n\n/* Cost Tracker Animation */\n.cost-tracker {\n  animation: scaleIn 0.2s ease-out;\n}\n\n/* Session Summary Animation */\n.session-summary {\n  animation: slideInFromLeft 0.3s ease-out;\n}\n\n/* Button Hover Effects */\n.send-button:hover {\n  background: var(--button-hover);\n  transform: translateY(-1px) scale(1.02);\n  box-shadow: 0 4px 12px rgba(76, 154, 255, 0.3);\n}\n\n.message-input:focus {\n  border-color: var(--aurora-purple);\n  box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);\n  transform: scale(1.005);\n}\n\n/* Notification Animation */\n.notification {\n  animation: fadeInOut 3s ease-in-out;\n}\n\n/* ========================================\n   🌊 STREAMING MESSAGE STYLES\n   ======================================== */\n\n/* Streaming Message Container */\n.message.streaming {\n  border-left: 3px solid var(--aurora-blue);\n  background: linear-gradient(\n    135deg,\n    rgba(76, 154, 255, 0.05),\n    rgba(139, 92, 246, 0.05)\n  );\n  border-radius: 12px;\n  overflow: visible; /* Allow content to expand beyond container */\n  height: auto; /* Allow dynamic height expansion */\n  min-height: auto; /* Remove any minimum height restrictions */\n  animation: streamingPulse 2s ease-in-out infinite;\n}\n\n@keyframes streamingPulse {\n  0%,\n  100% {\n    box-shadow: 0 0 0 0 rgba(76, 154, 255, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 0 4px rgba(76, 154, 255, 0.1);\n  }\n}\n\n/* Streaming Header */\n.streaming-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 12px;\n  background: linear-gradient(\n    135deg,\n    rgba(139, 92, 246, 0.15),\n    rgba(76, 154, 255, 0.1)\n  );\n  border-bottom: 1px solid rgba(139, 92, 246, 0.2);\n  font-size: 12px;\n}\n\n.streaming-status {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 600;\n  color: var(--aurora-blue);\n}\n\n.streaming-badge {\n  background: linear-gradient(135deg, var(--aurora-blue), var(--aurora-purple));\n  color: white;\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 9px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  animation: badgePulse 1.5s ease-in-out infinite;\n}\n\n@keyframes badgePulse {\n  0%,\n  100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.7;\n  }\n}\n\n/* Stopped Badge */\n.streaming-badge.stopped {\n  background: linear-gradient(135deg, #f59e0b, #d97706);\n  animation: none; /* No pulsing for stopped state */\n}\n\n/* Stop Button */\n.stream-stop-btn {\n  background: linear-gradient(135deg, #ef4444, #dc2626);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 4px 8px;\n  font-size: 10px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.stream-stop-btn:hover {\n  background: linear-gradient(135deg, #dc2626, #b91c1c);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);\n}\n\n.stream-stop-btn:active {\n  transform: translateY(0);\n}\n\n.stream-stop-btn:disabled {\n  background: linear-gradient(135deg, #6b7280, #4b5563);\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n/* Continue Button */\n.stream-continue-btn {\n  background: linear-gradient(135deg, #10b981, #059669);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 4px 8px;\n  font-size: 10px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.stream-continue-btn:hover {\n  background: linear-gradient(135deg, #059669, #047857);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);\n}\n\n.stream-continue-btn:active {\n  transform: translateY(0);\n}\n\n.stream-continue-btn:disabled {\n  background: linear-gradient(135deg, #6b7280, #4b5563);\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n  padding: 4px 8px;\n  font-size: 10px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.stream-continue-btn:hover {\n  background: linear-gradient(135deg, #059669, #047857);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);\n}\n\n.stream-continue-btn:active {\n  transform: translateY(0);\n}\n\n.stream-continue-btn:disabled {\n  background: linear-gradient(135deg, #6b7280, #4b5563);\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n/* Streaming Content */\n.streaming-content {\n  position: relative;\n  padding: 12px;\n  min-height: 40px;\n  height: auto; /* Allow dynamic height expansion */\n  background: rgba(255, 255, 255, 0.02);\n  overflow: visible; /* Ensure content is visible */\n  flex-grow: 1; /* Allow content to expand within flex container */\n}\n\n.streaming-text {\n  line-height: 1.6;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  color: var(--text-primary);\n  margin-right: 20px; /* Space for cursor */\n  height: auto; /* Allow text height to expand */\n  overflow: visible; /* Ensure text is visible */\n  max-height: none; /* Remove any height restrictions */\n}\n\n/* Streaming Cursor */\n.streaming-cursor {\n  color: var(--aurora-blue);\n  font-weight: bold;\n  font-size: 14px;\n  animation: cursorBlink 1s infinite;\n  margin-left: 2px;\n  display: inline-block;\n}\n\n@keyframes cursorBlink {\n  0%,\n  50% {\n    opacity: 1;\n  }\n  51%,\n  100% {\n    opacity: 0;\n  }\n}\n\n/* Progress Section */\n.streaming-progress {\n  padding: 8px 12px;\n  background: linear-gradient(\n    135deg,\n    rgba(139, 92, 246, 0.08),\n    rgba(76, 154, 255, 0.05)\n  );\n  border-top: 1px solid rgba(139, 92, 246, 0.15);\n}\n\n.progress-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 6px;\n  font-size: 11px;\n  color: var(--text-secondary);\n}\n\n.progress-text {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-weight: 500;\n}\n\n.token-count {\n  background: rgba(139, 92, 246, 0.1);\n  color: var(--aurora-purple);\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-weight: 600;\n  font-size: 10px;\n}\n\n/* Progress Bar */\n.progress-bar {\n  height: 3px;\n  background: rgba(139, 92, 246, 0.2);\n  border-radius: 2px;\n  overflow: hidden;\n  position: relative;\n}\n\n.progress-fill {\n  height: 100%;\n  background: var(\n    --gradient-aurora,\n    linear-gradient(\n      90deg,\n      var(--aurora-blue, #4c9aff),\n      var(--aurora-purple, #8b5cf6),\n      var(--aurora-green, #10b981)\n    )\n  );\n  width: 0%;\n  transition: width 0.3s ease;\n  animation: progressShimmer 2s ease-in-out infinite;\n  position: relative;\n}\n\n@keyframes progressShimmer {\n  0%,\n  100% {\n    opacity: 0.8;\n    transform: scaleX(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scaleX(1.02);\n  }\n}\n\n/* Streaming Error */\n.streaming-error {\n  background: linear-gradient(\n    135deg,\n    rgba(239, 68, 68, 0.1),\n    rgba(220, 38, 38, 0.05)\n  );\n  border: 1px solid rgba(239, 68, 68, 0.3);\n  border-radius: 6px;\n  padding: 8px 12px;\n  margin-top: 8px;\n  color: #ef4444;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n/* ===== STREAMING TOGGLE ===== */\n.streaming-toggle-container {\n  padding: 8px 16px;\n  margin-bottom: 8px;\n  background: rgba(64, 224, 208, 0.05);\n  border: 1px solid rgba(64, 224, 208, 0.2);\n  border-radius: 8px;\n  backdrop-filter: blur(10px);\n}\n\n.streaming-toggle {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  cursor: pointer;\n  user-select: none;\n  font-size: 13px;\n  font-weight: 500;\n}\n\n.streaming-toggle input[type=\"checkbox\"] {\n  display: none;\n}\n\n.toggle-slider {\n  position: relative;\n  width: 44px;\n  height: 24px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 24px;\n  transition: all 0.3s ease;\n  border: 1px solid rgba(64, 224, 208, 0.3);\n}\n\n.toggle-slider::before {\n  content: \"\";\n  position: absolute;\n  top: 2px;\n  left: 2px;\n  width: 18px;\n  height: 18px;\n  background: linear-gradient(135deg, #40e0d0, #00ced1);\n  border-radius: 50%;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n.streaming-toggle input:checked + .toggle-slider {\n  background: rgba(64, 224, 208, 0.2);\n  border-color: #40e0d0;\n}\n\n.streaming-toggle input:checked + .toggle-slider::before {\n  transform: translateX(20px);\n  background: linear-gradient(135deg, #00ff7f, #40e0d0);\n  box-shadow: 0 2px 8px rgba(64, 224, 208, 0.4);\n}\n\n.toggle-label {\n  color: #40e0d0;\n  font-weight: 600;\n  text-shadow: 0 0 10px rgba(64, 224, 208, 0.3);\n}\n\n.streaming-toggle:hover .toggle-slider {\n  border-color: #40e0d0;\n  box-shadow: 0 0 10px rgba(64, 224, 208, 0.2);\n}\n\n.streaming-toggle:hover .toggle-label {\n  text-shadow: 0 0 15px rgba(64, 224, 208, 0.5);\n}\n\n/* Responsive Design for Streaming */\n@media (max-width: 768px) {\n  .streaming-header {\n    padding: 6px 8px;\n    font-size: 11px;\n  }\n\n  .stream-stop-btn,\n  .stream-continue-btn {\n    padding: 3px 6px;\n    font-size: 9px;\n  }\n\n  .streaming-content {\n    padding: 8px;\n  }\n\n  .streaming-progress {\n    padding: 6px 8px;\n  }\n\n  .progress-info {\n    font-size: 10px;\n  }\n}\n\n/* ========================================\n   SCROLL INDICATOR FOR STREAMING\n   ======================================== */\n\n/* Scroll Indicator for Streaming */\n.scroll-indicator {\n  position: fixed;\n  bottom: 80px;\n  right: 20px;\n  background: linear-gradient(135deg, var(--aurora-blue), var(--aurora-purple));\n  color: white;\n  padding: 8px 12px;\n  border-radius: 20px;\n  font-size: 11px;\n  font-weight: 500;\n  box-shadow: 0 4px 12px rgba(76, 154, 255, 0.3);\n  cursor: pointer;\n  transition: all 0.3s ease;\n  z-index: 1000;\n  opacity: 0;\n  transform: translateY(20px);\n  pointer-events: none;\n}\n\n.scroll-indicator.visible {\n  opacity: 1;\n  transform: translateY(0);\n  pointer-events: auto;\n}\n\n.scroll-indicator:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(76, 154, 255, 0.4);\n}\n\n.scroll-indicator::before {\n  content: \"⬇️\";\n  margin-right: 6px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/webview/enterprise-styles.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"/**\\n * 🦊 Nox Enterprise Chat Interface Styles\\n * Complete Aurora-themed styling for VS Code sidebar chat\\n */\\n\\n/* Aurora Theme Variables */\\n/* 🎨 CRITICAL FIX: Removed hardcoded Aurora color fallback values to prevent CSS from overriding theme persistence.\\n   Theme-specific values are ONLY set via:\\n   1. Embedded CSS in HTML head with !important flags (on initial load)\\n   2. JavaScript injection with setProperty(..., 'important') (on theme changes)\\n\\n   This :root selector now ONLY contains VS Code integration variables and button references.\\n   Aurora color variables are set ONLY by JavaScript to ensure theme persistence works correctly. */\\n:root {\\n  /* Aurora Theme Colors - Set by JavaScript on load and theme changes */\\n  /* NO VS Code variables - complete Aurora control */\\n\\n  /* Backgrounds */\\n  --bg-primary: #0a0e27;\\n  --bg-secondary: #1a1f3a;\\n  --bg-tertiary: rgba(20, 30, 48, 0.9);\\n  --bg-surface: rgba(30, 41, 59, 0.8);\\n\\n  /* Text Colors */\\n  --text-primary: #e2e8f0;\\n  --text-secondary: #94a3b8;\\n  --text-muted: #64748b;\\n\\n  /* Input & Borders */\\n  --input-bg: rgba(30, 41, 59, 0.8);\\n  --input-border: rgba(76, 154, 255, 0.3);\\n  --border-color: rgba(76, 154, 255, 0.2);\\n\\n  /* Button Colors - Reference aurora colors which will be set by JavaScript */\\n  --button-bg: var(--aurora-blue);\\n  --button-hover: var(--aurora-purple);\\n}\\n\\n/* Reset and Base */\\n* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n\\nbody {\\n  font-family: -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Oxygen,\\n    Ubuntu, Cantarell, sans-serif;\\n  font-size: 13px;\\n  background: var(--bg-primary);\\n  color: var(--text-primary);\\n  height: 100vh;\\n  overflow: hidden;\\n}\\n\\n/* Aurora Background (Theme-Aware) */\\n.aurora-bg {\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: linear-gradient(\\n    45deg,\\n    var(--aurora-anim-1, rgba(76, 154, 255, 0.1)) 0%,\\n    var(--aurora-anim-2, rgba(139, 92, 246, 0.1)) 25%,\\n    var(--aurora-anim-3, rgba(16, 185, 129, 0.1)) 50%,\\n    var(--aurora-anim-4, rgba(244, 114, 182, 0.1)) 75%,\\n    var(--aurora-anim-5, rgba(6, 182, 212, 0.1)) 100%\\n  );\\n  background-size: 400% 400%;\\n  animation: aurora-flow 15s ease-in-out infinite;\\n  pointer-events: none;\\n  z-index: -1;\\n}\\n\\n@keyframes aurora-flow {\\n  0%,\\n  100% {\\n    background-position: 0% 50%;\\n  }\\n  50% {\\n    background-position: 100% 50%;\\n  }\\n}\\n\\n/* Main Container */\\n.chat-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100vh;\\n  position: relative;\\n}\\n\\n/* Provider Controls Header (Collapsible) */\\n.provider-controls {\\n  background: var(--bg-secondary);\\n  border-bottom: 1px solid var(--aurora-blue);\\n  padding: 12px;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n  backdrop-filter: blur(10px);\\n  overflow: hidden;\\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\\n  max-height: 500px; /* Default expanded state */\\n}\\n\\n.provider-controls.collapsed {\\n  max-height: 0;\\n  padding: 0 12px;\\n  border-bottom: none;\\n  opacity: 0;\\n  transform: translateY(-10px);\\n}\\n\\n.provider-selector,\\n.model-selector {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 12px;\\n}\\n\\n.provider-selector label,\\n.model-selector label {\\n  color: var(--aurora-blue);\\n  font-weight: 600;\\n  min-width: 60px;\\n}\\n\\n.provider-dropdown,\\n.model-dropdown {\\n  flex: 1;\\n  background: var(--bg-surface);\\n  border: 1px solid var(--aurora-blue);\\n  border-radius: 6px;\\n  color: var(--text-primary);\\n  padding: 4px 8px;\\n  font-size: 11px;\\n  outline: none;\\n  transition: all 0.2s ease;\\n}\\n\\n.provider-dropdown:focus,\\n.model-dropdown:focus {\\n  border-color: var(--aurora-purple);\\n  box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);\\n}\\n\\n.provider-status {\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n  font-size: 10px;\\n}\\n\\n.status-indicator {\\n  font-size: 8px;\\n  color: var(--aurora-green);\\n}\\n\\n.status-indicator.error {\\n  color: var(--status-error, #ef4444);\\n}\\n\\n.status-indicator.warning {\\n  color: var(--status-warning, #f59e0b);\\n}\\n\\n.status-text {\\n  color: var(--text-secondary);\\n}\\n\\n/* Enhanced Cost Tracker */\\n.cost-tracker {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  gap: 8px;\\n  font-size: 11px;\\n  color: var(--text-secondary);\\n  padding: 8px;\\n  background: linear-gradient(\\n    135deg,\\n    rgba(76, 154, 255, 0.05),\\n    rgba(139, 92, 246, 0.05)\\n  );\\n  border: 1px solid rgba(139, 92, 246, 0.2);\\n  border-radius: 8px;\\n  margin-bottom: 8px;\\n}\\n\\n.cost-info,\\n.token-info {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  gap: 2px;\\n  padding: 4px;\\n  border-radius: 6px;\\n  background: rgba(255, 255, 255, 0.02);\\n}\\n\\n.cost-label,\\n.token-label {\\n  font-size: 9px;\\n  text-transform: uppercase;\\n  letter-spacing: 0.5px;\\n  opacity: 0.8;\\n}\\n\\n.cost-value {\\n  color: var(--aurora-green);\\n  font-weight: 700;\\n  font-size: 12px;\\n}\\n\\n.token-value {\\n  color: var(--aurora-cyan);\\n  font-weight: 700;\\n  font-size: 12px;\\n}\\n\\n/* Session Summary */\\n.session-summary {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  font-size: 10px;\\n  color: var(--text-secondary);\\n  padding: 4px 8px;\\n  background: rgba(16, 185, 129, 0.1);\\n  border-radius: 4px;\\n  margin-top: 4px;\\n}\\n\\n.session-messages {\\n  color: var(--aurora-blue);\\n  font-weight: 600;\\n}\\n\\n/* Messages Container */\\n.messages-container {\\n  flex: 1;\\n  overflow-y: auto;\\n  padding: 12px;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n  position: relative; /* For scroll indicator positioning */\\n}\\n\\n.messages-container::-webkit-scrollbar {\\n  width: 6px;\\n}\\n\\n.messages-container::-webkit-scrollbar-track {\\n  background: transparent;\\n}\\n\\n.messages-container::-webkit-scrollbar-thumb {\\n  background: var(--aurora-blue);\\n  border-radius: 3px;\\n}\\n\\n/* Welcome Message */\\n.welcome-message {\\n  text-align: center;\\n  padding: 20px 10px;\\n  background: linear-gradient(\\n    135deg,\\n    rgba(76, 154, 255, 0.1),\\n    rgba(139, 92, 246, 0.1)\\n  );\\n  border-radius: 12px;\\n  border: 1px solid rgba(76, 154, 255, 0.2);\\n}\\n\\n.fox-welcome {\\n  font-size: 24px;\\n  margin-bottom: 8px;\\n}\\n\\n.welcome-title {\\n  color: var(--aurora-blue);\\n  font-weight: 600;\\n  margin-bottom: 4px;\\n}\\n\\n.welcome-subtitle {\\n  color: var(--text-secondary);\\n  font-size: 11px;\\n}\\n\\n/* Enhanced Messages */\\n.message {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n  padding: 12px;\\n  border-radius: 12px;\\n  position: relative;\\n  margin-bottom: 8px;\\n  transition: all 0.2s ease;\\n  border: 1px solid transparent;\\n}\\n\\n.message:hover {\\n  border-color: rgba(76, 154, 255, 0.3);\\n  transform: translateY(-1px);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n}\\n\\n.message.user {\\n  background: linear-gradient(\\n    135deg,\\n    rgba(244, 114, 182, 0.15),\\n    rgba(139, 92, 246, 0.08)\\n  );\\n  border-left: 4px solid var(--aurora-pink);\\n  margin-left: 16px;\\n  margin-right: 0;\\n}\\n\\n.message.assistant {\\n  background: linear-gradient(\\n    135deg,\\n    rgba(16, 185, 129, 0.15),\\n    rgba(76, 154, 255, 0.08)\\n  );\\n  border-left: 4px solid var(--aurora-green);\\n  margin-left: 0;\\n  margin-right: 16px;\\n}\\n\\n.message-content {\\n  color: var(--text-primary);\\n  line-height: 1.5;\\n  font-size: 13px;\\n  word-wrap: break-word;\\n}\\n\\n.message-meta {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  font-size: 10px;\\n  color: var(--text-secondary);\\n  margin-top: 6px;\\n  padding-top: 6px;\\n  border-top: 1px solid rgba(139, 92, 246, 0.15);\\n  background: rgba(0, 0, 0, 0.1);\\n  padding: 4px 8px;\\n  border-radius: 6px;\\n  margin: 6px -4px -4px -4px;\\n}\\n\\n/* Message Actions */\\n.message-actions {\\n  display: flex;\\n  gap: 4px;\\n  opacity: 1;\\n  transition: opacity 0.2s ease;\\n}\\n\\n.message:hover .message-actions {\\n  opacity: 1;\\n}\\n\\n.message-action-btn {\\n  background: rgba(76, 154, 255, 0.1);\\n  border: 1px solid rgba(76, 154, 255, 0.3);\\n  border-radius: 4px;\\n  padding: 2px 6px;\\n  font-size: 9px;\\n  color: var(--aurora-blue);\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n}\\n\\n.message-action-btn:hover {\\n  background: rgba(76, 154, 255, 0.2);\\n  border-color: var(--aurora-blue);\\n  transform: scale(1.05);\\n}\\n\\n.message-action-btn.copy {\\n  color: var(--aurora-green);\\n  border-color: rgba(16, 185, 129, 0.3);\\n  background: rgba(16, 185, 129, 0.1);\\n}\\n\\n.message-action-btn.copy:hover {\\n  background: rgba(16, 185, 129, 0.2);\\n  border-color: var(--aurora-green);\\n}\\n\\n.message-action-btn.regenerate {\\n  color: var(--aurora-orange);\\n  border-color: rgba(255, 107, 53, 0.3);\\n  background: rgba(255, 107, 53, 0.1);\\n}\\n\\n.message-action-btn.regenerate:hover {\\n  background: rgba(255, 107, 53, 0.2);\\n  border-color: var(--aurora-orange);\\n}\\n\\n.message-action-btn.delete {\\n  color: var(--aurora-pink);\\n  border-color: rgba(244, 114, 182, 0.3);\\n  background: rgba(244, 114, 182, 0.1);\\n}\\n\\n.message-action-btn.delete:hover {\\n  background: rgba(244, 114, 182, 0.2);\\n  border-color: var(--aurora-pink);\\n}\\n\\n/* Enhanced Message Info */\\n.message-info {\\n  display: flex;\\n  gap: 8px;\\n  align-items: center;\\n  flex-wrap: wrap;\\n}\\n\\n.message-cost {\\n  color: var(--aurora-green);\\n  font-weight: 700;\\n  background: rgba(16, 185, 129, 0.1);\\n  padding: 1px 4px;\\n  border-radius: 3px;\\n  font-size: 9px;\\n}\\n\\n.message-tokens {\\n  color: var(--aurora-cyan);\\n  font-weight: 600;\\n  background: rgba(6, 182, 212, 0.1);\\n  padding: 1px 4px;\\n  border-radius: 3px;\\n  font-size: 9px;\\n}\\n\\n.message-provider {\\n  color: var(--aurora-blue);\\n  font-weight: 600;\\n  background: rgba(76, 154, 255, 0.1);\\n  padding: 1px 4px;\\n  border-radius: 3px;\\n  font-size: 9px;\\n}\\n\\n.message-time {\\n  color: var(--text-secondary);\\n  font-size: 9px;\\n  opacity: 0.8;\\n  font-weight: 500;\\n}\\n\\n.message-date {\\n  color: var(--aurora-blue);\\n  font-size: 8px;\\n  opacity: 0.9;\\n  font-weight: 600;\\n  background: rgba(76, 154, 255, 0.1);\\n  padding: 1px 4px;\\n  border-radius: 3px;\\n  margin-left: 4px;\\n  border: 1px solid rgba(76, 154, 255, 0.2);\\n}\\n\\n/* Input Area */\\n.input-container {\\n  padding: 12px;\\n  background: var(--bg-secondary);\\n  border-top: 1px solid var(--aurora-blue);\\n  backdrop-filter: blur(10px);\\n}\\n\\n.input-wrapper {\\n  display: flex;\\n  gap: 8px;\\n  align-items: flex-end;\\n}\\n\\n/* Input field container with inline mic button */\\n.input-field-container {\\n  flex: 1;\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.message-input {\\n  flex: 1;\\n  background: var(--bg-surface);\\n  border: 1px solid var(--aurora-blue);\\n  border-radius: 8px;\\n  color: var(--text-primary);\\n  padding: 8px 40px 8px 12px; /* Extra padding on right for mic button */\\n  font-size: 13px;\\n  line-height: 1.4;\\n  resize: none;\\n  outline: none;\\n  transition: all 0.2s ease;\\n  min-height: 36px;\\n  max-height: 120px;\\n}\\n\\n.message-input:focus {\\n  border-color: var(--aurora-purple);\\n  box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);\\n}\\n\\n.send-button {\\n  background: var(--button-bg);\\n  border: none;\\n  border-radius: 6px;\\n  color: white;\\n  padding: 8px 12px;\\n  font-size: 12px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  min-width: 60px;\\n}\\n\\n.send-button:hover {\\n  background: var(--button-hover);\\n  transform: translateY(-1px);\\n}\\n\\n.send-button:active {\\n  transform: translateY(0);\\n}\\n\\n.send-button:disabled {\\n  background: rgba(76, 154, 255, 0.3);\\n  cursor: not-allowed;\\n  transform: none;\\n}\\n\\n/* 🎤 Professional Inline Microphone Button */\\n.mic-button-inline {\\n  position: absolute;\\n  right: 8px;\\n  top: 50%;\\n  transform: translateY(-50%);\\n  background: transparent;\\n  border: none;\\n  color: var(--aurora-blue);\\n  padding: 6px;\\n  cursor: pointer;\\n  border-radius: 4px;\\n  transition: all 0.2s ease;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  z-index: 10;\\n}\\n\\n.mic-button-inline:hover {\\n  background: rgba(76, 154, 255, 0.1);\\n  color: var(--aurora-cyan);\\n  transform: translateY(-50%) scale(1.1);\\n}\\n\\n.mic-button-inline:active {\\n  transform: translateY(-50%) scale(0.95);\\n}\\n\\n.mic-button-inline.recording {\\n  color: #ef4444;\\n  background: rgba(239, 68, 68, 0.1);\\n  /* No animation - static button */\\n}\\n\\n.mic-button-inline.recording:hover {\\n  color: #dc2626;\\n  background: rgba(239, 68, 68, 0.2);\\n  transform: translateY(-50%) scale(1.05);\\n}\\n\\n.mic-button-inline:disabled {\\n  color: rgba(76, 154, 255, 0.3);\\n  cursor: not-allowed;\\n  transform: translateY(-50%);\\n}\\n\\n.mic-button-inline:disabled:hover {\\n  background: transparent;\\n  transform: translateY(-50%);\\n}\\n\\n.mic-icon {\\n  transition: all 0.2s ease;\\n}\\n\\n/* Icon toggle for recording state */\\n.mic-button-inline .mic-icon {\\n  display: block;\\n}\\n\\n.mic-button-inline .stop-icon {\\n  display: none;\\n}\\n\\n.mic-button-inline.recording .mic-icon {\\n  display: none;\\n}\\n\\n.mic-button-inline.recording .stop-icon {\\n  display: block !important;\\n  color: #ff0000 !important;\\n  position: relative !important;\\n  top: 0 !important;\\n  left: 0 !important;\\n  transform: none !important;\\n  /* Bright red hollow square outline - no fill for transparent center */\\n}\\n\\n/* Button animation removed - using static icons with pulsing dots animation instead */\\n\\n/* 🎤 Voice Recording Modal */\\n.voice-modal {\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: rgba(0, 0, 0, 0.8);\\n  display: none;\\n  justify-content: center;\\n  align-items: center;\\n  z-index: 1000;\\n}\\n\\n.voice-modal-content {\\n  background: var(--bg-primary);\\n  border: 2px solid var(--aurora-blue);\\n  border-radius: 16px;\\n  padding: 32px;\\n  text-align: center;\\n  min-width: 300px;\\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\\n}\\n\\n.voice-modal-icon {\\n  font-size: 48px;\\n  margin-bottom: 16px;\\n  animation: pulse-modal 1.5s infinite;\\n}\\n\\n.voice-modal-text {\\n  color: var(--text-primary);\\n  font-size: 18px;\\n  font-weight: 600;\\n  margin-bottom: 24px;\\n}\\n\\n.voice-modal-animation {\\n  position: relative;\\n  width: 80px;\\n  height: 80px;\\n  margin: 0 auto 24px;\\n}\\n\\n.pulse-ring {\\n  position: absolute;\\n  border: 2px solid var(--aurora-blue);\\n  border-radius: 50%;\\n  width: 100%;\\n  height: 100%;\\n  animation: pulse-ring 1.5s infinite;\\n}\\n\\n.pulse-ring:nth-child(2) {\\n  animation-delay: 0.5s;\\n}\\n\\n.pulse-ring:nth-child(3) {\\n  animation-delay: 1s;\\n}\\n\\n.voice-modal-stop {\\n  background: #ef4444;\\n  border: none;\\n  border-radius: 8px;\\n  color: white;\\n  padding: 12px 24px;\\n  font-size: 14px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n}\\n\\n.voice-modal-stop:hover {\\n  background: #dc2626;\\n  transform: translateY(-1px);\\n}\\n\\n@keyframes pulse-modal {\\n  0%,\\n  100% {\\n    transform: scale(1);\\n  }\\n  50% {\\n    transform: scale(1.1);\\n  }\\n}\\n\\n@keyframes pulse-ring {\\n  0% {\\n    transform: scale(0.8);\\n    opacity: 1;\\n  }\\n  100% {\\n    transform: scale(1.4);\\n    opacity: 0;\\n  }\\n}\\n\\n/* 🎤 Native Voice Button (positioned next to mic button) */\\n.native-voice-button-inline {\\n  position: absolute;\\n  right: 36px; /* Position to the left of the mic button */\\n  top: 50%;\\n  transform: translateY(-50%);\\n  background: transparent;\\n  border: none;\\n  color: var(--aurora-green);\\n  cursor: pointer;\\n  padding: 4px;\\n  border-radius: 4px;\\n  transition: all 0.2s ease;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  z-index: 10;\\n}\\n\\n.native-voice-button-inline:hover {\\n  background: rgba(34, 197, 94, 0.1);\\n  color: var(--aurora-cyan);\\n  transform: translateY(-50%) scale(1.1);\\n}\\n\\n.native-voice-button-inline:active {\\n  transform: translateY(-50%) scale(0.95);\\n}\\n\\n.voice-icon {\\n  transition: all 0.2s ease;\\n}\\n\\n/* 🎤 Voice Recording Animation (inside input field) */\\n.input-field-container {\\n  position: relative;\\n}\\n\\n.voice-recording-animation {\\n  position: absolute;\\n  left: 12px;\\n  top: 50%;\\n  transform: translateY(-50%);\\n  display: flex;\\n  gap: 3px;\\n  align-items: center;\\n  z-index: 2;\\n  pointer-events: none;\\n}\\n\\n.pulse-dot {\\n  width: 4px;\\n  height: 4px;\\n  background: #ef4444;\\n  border-radius: 50%;\\n  animation: pulse-dot 1.4s infinite ease-in-out;\\n}\\n\\n.pulse-dot:nth-child(1) {\\n  animation-delay: 0s;\\n}\\n\\n.pulse-dot:nth-child(2) {\\n  animation-delay: 0.2s;\\n}\\n\\n.pulse-dot:nth-child(3) {\\n  animation-delay: 0.4s;\\n}\\n\\n@keyframes pulse-dot {\\n  0%,\\n  80%,\\n  100% {\\n    transform: scale(0.8);\\n    opacity: 0.5;\\n  }\\n  40% {\\n    transform: scale(1.2);\\n    opacity: 1;\\n  }\\n}\\n\\n/* Adjust input padding when recording to make room for animation */\\n.message-input.recording {\\n  padding-left: 32px;\\n}\\n\\n/* Voice Error Message */\\n.voice-error-message {\\n  margin-top: 8px;\\n  padding: 8px 12px;\\n  background: rgba(239, 68, 68, 0.1);\\n  border: 1px solid rgba(239, 68, 68, 0.3);\\n  border-radius: 6px;\\n  animation: slideInFromTop 0.3s ease-out;\\n}\\n\\n.error-content {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 12px;\\n  color: #ef4444;\\n}\\n\\n.error-icon {\\n  flex-shrink: 0;\\n  width: 16px;\\n  height: 16px;\\n}\\n\\n.error-text {\\n  flex: 1;\\n  line-height: 1.4;\\n}\\n\\n.error-action {\\n  background: #ef4444;\\n  color: white;\\n  border: none;\\n  padding: 4px 8px;\\n  border-radius: 4px;\\n  font-size: 11px;\\n  cursor: pointer;\\n  transition: background 0.2s ease;\\n}\\n\\n.error-action:hover {\\n  background: #dc2626;\\n}\\n\\n@keyframes slideInFromTop {\\n  from {\\n    opacity: 0;\\n    transform: translateY(-10px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n}\\n\\n/* Thinking Indicator */\\n.thinking-indicator {\\n  display: none;\\n  align-items: center;\\n  gap: 8px;\\n  padding: 8px 12px;\\n  background: linear-gradient(\\n    135deg,\\n    rgba(139, 92, 246, 0.1),\\n    rgba(76, 154, 255, 0.05)\\n  );\\n  border-radius: 8px;\\n  border-left: 3px solid var(--aurora-purple);\\n  margin-left: 20px;\\n  margin-right: 0;\\n  font-size: 12px;\\n  color: var(--text-secondary);\\n}\\n\\n.thinking-indicator.show {\\n  display: flex;\\n}\\n\\n.thinking-dots {\\n  display: flex;\\n  gap: 2px;\\n}\\n\\n.thinking-dot {\\n  width: 4px;\\n  height: 4px;\\n  background: var(--aurora-purple);\\n  border-radius: 50%;\\n  animation: thinking-pulse 1.4s ease-in-out infinite both;\\n}\\n\\n.thinking-dot:nth-child(1) {\\n  animation-delay: -0.32s;\\n}\\n.thinking-dot:nth-child(2) {\\n  animation-delay: -0.16s;\\n}\\n.thinking-dot:nth-child(3) {\\n  animation-delay: 0;\\n}\\n\\n@keyframes thinking-pulse {\\n  0%,\\n  80%,\\n  100% {\\n    transform: scale(0.8);\\n    opacity: 0.5;\\n  }\\n  40% {\\n    transform: scale(1);\\n    opacity: 1;\\n  }\\n}\\n\\n/* Enhanced Animations */\\n@keyframes fadeInOut {\\n  0% {\\n    opacity: 0;\\n    transform: translateY(-10px);\\n  }\\n  10% {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n  90% {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n  100% {\\n    opacity: 0;\\n    transform: translateY(-10px);\\n  }\\n}\\n\\n@keyframes slideInFromRight {\\n  from {\\n    opacity: 0;\\n    transform: translateX(20px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateX(0);\\n  }\\n}\\n\\n@keyframes slideInFromLeft {\\n  from {\\n    opacity: 0;\\n    transform: translateX(-20px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateX(0);\\n  }\\n}\\n\\n@keyframes scaleIn {\\n  from {\\n    opacity: 0;\\n    transform: scale(0.9);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: scale(1);\\n  }\\n}\\n\\n/* Message Animations */\\n.message.user {\\n  animation: slideInFromRight 0.3s ease-out;\\n}\\n\\n.message.assistant {\\n  animation: slideInFromLeft 0.3s ease-out;\\n}\\n\\n/* Cost Tracker Animation */\\n.cost-tracker {\\n  animation: scaleIn 0.2s ease-out;\\n}\\n\\n/* Session Summary Animation */\\n.session-summary {\\n  animation: slideInFromLeft 0.3s ease-out;\\n}\\n\\n/* Button Hover Effects */\\n.send-button:hover {\\n  background: var(--button-hover);\\n  transform: translateY(-1px) scale(1.02);\\n  box-shadow: 0 4px 12px rgba(76, 154, 255, 0.3);\\n}\\n\\n.message-input:focus {\\n  border-color: var(--aurora-purple);\\n  box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);\\n  transform: scale(1.005);\\n}\\n\\n/* Notification Animation */\\n.notification {\\n  animation: fadeInOut 3s ease-in-out;\\n}\\n\\n/* ========================================\\n   🌊 STREAMING MESSAGE STYLES\\n   ======================================== */\\n\\n/* Streaming Message Container */\\n.message.streaming {\\n  border-left: 3px solid var(--aurora-blue);\\n  background: linear-gradient(\\n    135deg,\\n    rgba(76, 154, 255, 0.05),\\n    rgba(139, 92, 246, 0.05)\\n  );\\n  border-radius: 12px;\\n  overflow: visible; /* Allow content to expand beyond container */\\n  height: auto; /* Allow dynamic height expansion */\\n  min-height: auto; /* Remove any minimum height restrictions */\\n  animation: streamingPulse 2s ease-in-out infinite;\\n}\\n\\n@keyframes streamingPulse {\\n  0%,\\n  100% {\\n    box-shadow: 0 0 0 0 rgba(76, 154, 255, 0.3);\\n  }\\n  50% {\\n    box-shadow: 0 0 0 4px rgba(76, 154, 255, 0.1);\\n  }\\n}\\n\\n/* Streaming Header */\\n.streaming-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 8px 12px;\\n  background: linear-gradient(\\n    135deg,\\n    rgba(139, 92, 246, 0.15),\\n    rgba(76, 154, 255, 0.1)\\n  );\\n  border-bottom: 1px solid rgba(139, 92, 246, 0.2);\\n  font-size: 12px;\\n}\\n\\n.streaming-status {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-weight: 600;\\n  color: var(--aurora-blue);\\n}\\n\\n.streaming-badge {\\n  background: linear-gradient(135deg, var(--aurora-blue), var(--aurora-purple));\\n  color: white;\\n  padding: 2px 6px;\\n  border-radius: 4px;\\n  font-size: 9px;\\n  font-weight: 700;\\n  text-transform: uppercase;\\n  letter-spacing: 0.5px;\\n  animation: badgePulse 1.5s ease-in-out infinite;\\n}\\n\\n@keyframes badgePulse {\\n  0%,\\n  100% {\\n    opacity: 1;\\n  }\\n  50% {\\n    opacity: 0.7;\\n  }\\n}\\n\\n/* Stopped Badge */\\n.streaming-badge.stopped {\\n  background: linear-gradient(135deg, #f59e0b, #d97706);\\n  animation: none; /* No pulsing for stopped state */\\n}\\n\\n/* Stop Button */\\n.stream-stop-btn {\\n  background: linear-gradient(135deg, #ef4444, #dc2626);\\n  color: white;\\n  border: none;\\n  border-radius: 6px;\\n  padding: 4px 8px;\\n  font-size: 10px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n}\\n\\n.stream-stop-btn:hover {\\n  background: linear-gradient(135deg, #dc2626, #b91c1c);\\n  transform: translateY(-1px);\\n  box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);\\n}\\n\\n.stream-stop-btn:active {\\n  transform: translateY(0);\\n}\\n\\n.stream-stop-btn:disabled {\\n  background: linear-gradient(135deg, #6b7280, #4b5563);\\n  cursor: not-allowed;\\n  transform: none;\\n  box-shadow: none;\\n}\\n\\n/* Continue Button */\\n.stream-continue-btn {\\n  background: linear-gradient(135deg, #10b981, #059669);\\n  color: white;\\n  border: none;\\n  border-radius: 6px;\\n  padding: 4px 8px;\\n  font-size: 10px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n}\\n\\n.stream-continue-btn:hover {\\n  background: linear-gradient(135deg, #059669, #047857);\\n  transform: translateY(-1px);\\n  box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);\\n}\\n\\n.stream-continue-btn:active {\\n  transform: translateY(0);\\n}\\n\\n.stream-continue-btn:disabled {\\n  background: linear-gradient(135deg, #6b7280, #4b5563);\\n  cursor: not-allowed;\\n  transform: none;\\n  box-shadow: none;\\n  padding: 4px 8px;\\n  font-size: 10px;\\n  font-weight: 500;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n}\\n\\n.stream-continue-btn:hover {\\n  background: linear-gradient(135deg, #059669, #047857);\\n  transform: translateY(-1px);\\n  box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);\\n}\\n\\n.stream-continue-btn:active {\\n  transform: translateY(0);\\n}\\n\\n.stream-continue-btn:disabled {\\n  background: linear-gradient(135deg, #6b7280, #4b5563);\\n  cursor: not-allowed;\\n  transform: none;\\n  box-shadow: none;\\n}\\n\\n/* Streaming Content */\\n.streaming-content {\\n  position: relative;\\n  padding: 12px;\\n  min-height: 40px;\\n  height: auto; /* Allow dynamic height expansion */\\n  background: rgba(255, 255, 255, 0.02);\\n  overflow: visible; /* Ensure content is visible */\\n  flex-grow: 1; /* Allow content to expand within flex container */\\n}\\n\\n.streaming-text {\\n  line-height: 1.6;\\n  white-space: pre-wrap;\\n  word-wrap: break-word;\\n  color: var(--text-primary);\\n  margin-right: 20px; /* Space for cursor */\\n  height: auto; /* Allow text height to expand */\\n  overflow: visible; /* Ensure text is visible */\\n  max-height: none; /* Remove any height restrictions */\\n}\\n\\n/* Streaming Cursor */\\n.streaming-cursor {\\n  color: var(--aurora-blue);\\n  font-weight: bold;\\n  font-size: 14px;\\n  animation: cursorBlink 1s infinite;\\n  margin-left: 2px;\\n  display: inline-block;\\n}\\n\\n@keyframes cursorBlink {\\n  0%,\\n  50% {\\n    opacity: 1;\\n  }\\n  51%,\\n  100% {\\n    opacity: 0;\\n  }\\n}\\n\\n/* Progress Section */\\n.streaming-progress {\\n  padding: 8px 12px;\\n  background: linear-gradient(\\n    135deg,\\n    rgba(139, 92, 246, 0.08),\\n    rgba(76, 154, 255, 0.05)\\n  );\\n  border-top: 1px solid rgba(139, 92, 246, 0.15);\\n}\\n\\n.progress-info {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 6px;\\n  font-size: 11px;\\n  color: var(--text-secondary);\\n}\\n\\n.progress-text {\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n  font-weight: 500;\\n}\\n\\n.token-count {\\n  background: rgba(139, 92, 246, 0.1);\\n  color: var(--aurora-purple);\\n  padding: 2px 6px;\\n  border-radius: 4px;\\n  font-weight: 600;\\n  font-size: 10px;\\n}\\n\\n/* Progress Bar */\\n.progress-bar {\\n  height: 3px;\\n  background: rgba(139, 92, 246, 0.2);\\n  border-radius: 2px;\\n  overflow: hidden;\\n  position: relative;\\n}\\n\\n.progress-fill {\\n  height: 100%;\\n  background: var(\\n    --gradient-aurora,\\n    linear-gradient(\\n      90deg,\\n      var(--aurora-blue, #4c9aff),\\n      var(--aurora-purple, #8b5cf6),\\n      var(--aurora-green, #10b981)\\n    )\\n  );\\n  width: 0%;\\n  transition: width 0.3s ease;\\n  animation: progressShimmer 2s ease-in-out infinite;\\n  position: relative;\\n}\\n\\n@keyframes progressShimmer {\\n  0%,\\n  100% {\\n    opacity: 0.8;\\n    transform: scaleX(1);\\n  }\\n  50% {\\n    opacity: 1;\\n    transform: scaleX(1.02);\\n  }\\n}\\n\\n/* Streaming Error */\\n.streaming-error {\\n  background: linear-gradient(\\n    135deg,\\n    rgba(239, 68, 68, 0.1),\\n    rgba(220, 38, 38, 0.05)\\n  );\\n  border: 1px solid rgba(239, 68, 68, 0.3);\\n  border-radius: 6px;\\n  padding: 8px 12px;\\n  margin-top: 8px;\\n  color: #ef4444;\\n  font-size: 12px;\\n  font-weight: 500;\\n}\\n\\n/* ===== STREAMING TOGGLE ===== */\\n.streaming-toggle-container {\\n  padding: 8px 16px;\\n  margin-bottom: 8px;\\n  background: rgba(64, 224, 208, 0.05);\\n  border: 1px solid rgba(64, 224, 208, 0.2);\\n  border-radius: 8px;\\n  backdrop-filter: blur(10px);\\n}\\n\\n.streaming-toggle {\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n  cursor: pointer;\\n  user-select: none;\\n  font-size: 13px;\\n  font-weight: 500;\\n}\\n\\n.streaming-toggle input[type=\\\"checkbox\\\"] {\\n  display: none;\\n}\\n\\n.toggle-slider {\\n  position: relative;\\n  width: 44px;\\n  height: 24px;\\n  background: rgba(255, 255, 255, 0.1);\\n  border-radius: 24px;\\n  transition: all 0.3s ease;\\n  border: 1px solid rgba(64, 224, 208, 0.3);\\n}\\n\\n.toggle-slider::before {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 2px;\\n  left: 2px;\\n  width: 18px;\\n  height: 18px;\\n  background: linear-gradient(135deg, #40e0d0, #00ced1);\\n  border-radius: 50%;\\n  transition: all 0.3s ease;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n}\\n\\n.streaming-toggle input:checked + .toggle-slider {\\n  background: rgba(64, 224, 208, 0.2);\\n  border-color: #40e0d0;\\n}\\n\\n.streaming-toggle input:checked + .toggle-slider::before {\\n  transform: translateX(20px);\\n  background: linear-gradient(135deg, #00ff7f, #40e0d0);\\n  box-shadow: 0 2px 8px rgba(64, 224, 208, 0.4);\\n}\\n\\n.toggle-label {\\n  color: #40e0d0;\\n  font-weight: 600;\\n  text-shadow: 0 0 10px rgba(64, 224, 208, 0.3);\\n}\\n\\n.streaming-toggle:hover .toggle-slider {\\n  border-color: #40e0d0;\\n  box-shadow: 0 0 10px rgba(64, 224, 208, 0.2);\\n}\\n\\n.streaming-toggle:hover .toggle-label {\\n  text-shadow: 0 0 15px rgba(64, 224, 208, 0.5);\\n}\\n\\n/* Responsive Design for Streaming */\\n@media (max-width: 768px) {\\n  .streaming-header {\\n    padding: 6px 8px;\\n    font-size: 11px;\\n  }\\n\\n  .stream-stop-btn,\\n  .stream-continue-btn {\\n    padding: 3px 6px;\\n    font-size: 9px;\\n  }\\n\\n  .streaming-content {\\n    padding: 8px;\\n  }\\n\\n  .streaming-progress {\\n    padding: 6px 8px;\\n  }\\n\\n  .progress-info {\\n    font-size: 10px;\\n  }\\n}\\n\\n/* ========================================\\n   SCROLL INDICATOR FOR STREAMING\\n   ======================================== */\\n\\n/* Scroll Indicator for Streaming */\\n.scroll-indicator {\\n  position: fixed;\\n  bottom: 80px;\\n  right: 20px;\\n  background: linear-gradient(135deg, var(--aurora-blue), var(--aurora-purple));\\n  color: white;\\n  padding: 8px 12px;\\n  border-radius: 20px;\\n  font-size: 11px;\\n  font-weight: 500;\\n  box-shadow: 0 4px 12px rgba(76, 154, 255, 0.3);\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n  z-index: 1000;\\n  opacity: 0;\\n  transform: translateY(20px);\\n  pointer-events: none;\\n}\\n\\n.scroll-indicator.visible {\\n  opacity: 1;\\n  transform: translateY(0);\\n  pointer-events: auto;\\n}\\n\\n.scroll-indicator:hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 16px rgba(76, 154, 255, 0.4);\\n}\\n\\n.scroll-indicator::before {\\n  content: \\\"⬇️\\\";\\n  margin-right: 6px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/**\n * 🦊 Nox Webview Entry Point\n * Enterprise-grade webview bundle entry point\n */\n\n// Import enterprise styles (will be processed by webpack)\nimport './styles.css';\nimport './markdown-styles.css';\n\n// Import markdown test module\nimport { MarkdownTester } from './markdown-test';\nimport { NoxMarkdownRenderer, initializeCopyButtons } from './markdown-renderer';\n\n// Import types and components\nimport {\n  VSCodeAPI,\n  ChatMessage,\n  WebviewState,\n  BaseMessage,\n  SendMessageRequest,\n  SendStreamingMessageRequest,\n  ProviderChangeRequest,\n  ModelChangeRequest,\n  ClearHistoryRequest,\n  ReadyMessage,\n  GetProviderStatusRequest\n} from './types';\n\nimport {\n  MessageComponent,\n  ProviderSelectorComponent,\n  ModelSelectorComponent,\n  ThinkingIndicatorComponent,\n  StreamingMessageComponent\n} from './components';\n\n// VS Code API\ndeclare const acquireVsCodeApi: () => VSCodeAPI;\n\n/**\n * Main Nox Chat Application\n * Enterprise-grade chat interface with modular architecture\n */\nclass NoxChatApp {\n  private vscode: VSCodeAPI;\n  private state: WebviewState;\n  private debugMode: boolean = false;\n  private elements: {\n    messagesContainer?: HTMLElement;\n    messageInput?: HTMLTextAreaElement;\n    sendBtn?: HTMLButtonElement;\n    micBtn?: HTMLButtonElement;\n    voiceError?: HTMLElement;\n    thinkingIndicator?: HTMLElement;\n    providerControls?: HTMLElement;\n    sessionCost?: HTMLElement;\n    sessionTokens?: HTMLElement;\n    streamingToggle?: HTMLInputElement;\n  } = {};\n\n  // Speech Recognition properties\n  private speechRecognition: any = null;\n  private isRecording: boolean = false;\n  private speechSupported: boolean = false;\n  private permissionState: 'unknown' | 'granted' | 'denied' = 'unknown';\n\n  constructor() {\n    this.vscode = acquireVsCodeApi();\n    // Store vscode API globally so components can access it\n    (window as any).vscodeApi = this.vscode;\n    this.state = this.initializeState();\n    this.initialize();\n  }\n\n  private initializeState(): WebviewState {\n    return {\n      chatHistory: [],\n      sessionStats: {\n        totalTokens: 0,\n        totalCost: 0,\n        messageCount: 0,\n        startTime: new Date().toISOString()\n      },\n      currentProvider: 'anthropic',\n      currentModel: 'claude-sonnet-4-5-20250929',\n      isAIResponding: false\n    };\n  }\n\n  private initialize(): void {\n    // Test markdown libraries\n    this.testMarkdownLibraries();\n\n    // Wait for DOM to be ready\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', () => {\n        this.setupUI();\n      });\n    } else {\n      this.setupUI();\n    }\n  }\n\n  private testMarkdownLibraries(): void {\n    console.log('🧪 Testing markdown libraries...');\n    const testsPassed = MarkdownTester.runAllTests();\n\n    if (testsPassed) {\n      console.log('✅ All markdown libraries ready for enterprise use');\n    } else {\n      console.error('❌ Markdown library tests failed');\n    }\n  }\n\n  private setupUI(): void {\n    // Get DOM elements\n    this.elements.messagesContainer = document.getElementById('messagesContainer') as HTMLElement;\n    this.elements.messageInput = document.getElementById('messageInput') as HTMLTextAreaElement;\n    this.elements.sendBtn = document.getElementById('sendBtn') as HTMLButtonElement;\n    this.elements.micBtn = document.getElementById('micBtn') as HTMLButtonElement;\n    this.elements.voiceError = document.getElementById('voiceError') as HTMLElement;\n    this.elements.sessionCost = document.getElementById('sessionCost') as HTMLElement;\n    this.elements.sessionTokens = document.getElementById('sessionTokens') as HTMLElement;\n    this.elements.streamingToggle = document.getElementById('streamingToggle') as HTMLInputElement;\n\n    // Initialize speech recognition\n    this.initializeSpeechRecognition();\n\n    // Initialize copy button functionality\n    initializeCopyButtons();\n\n    // Setup event listeners\n    this.setupEventListeners();\n\n    // Setup message handling\n    this.setupMessageHandling();\n\n    // Request initial data from extension\n    this.sendMessage({ type: 'ready' });\n    this.sendMessage({ type: 'getVoiceStatus' });\n\n\n  }\n\n  private setupEventListeners(): void {\n    // Send button click\n    this.elements.sendBtn?.addEventListener('click', () => {\n      this.sendUserMessage();\n    });\n\n    // Microphone button click\n    this.elements.micBtn?.addEventListener('click', () => {\n      this.toggleVoiceRecording();\n    });\n\n    // Enter key to send (Shift+Enter for new line)\n    this.elements.messageInput?.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        this.sendUserMessage();\n      }\n    });\n\n    // Auto-resize textarea\n    this.elements.messageInput?.addEventListener('input', () => {\n      this.autoResizeTextarea();\n    });\n\n    // Provider change handler\n    const providerSelect = document.getElementById('providerSelect') as HTMLSelectElement;\n    providerSelect?.addEventListener('change', (e) => {\n      const target = e.target as HTMLSelectElement;\n      this.sendMessage({\n        type: 'changeProvider',\n        provider: target.value\n      } as ProviderChangeRequest);\n    });\n\n    // Model change handler\n    const modelSelect = document.getElementById('modelSelect') as HTMLSelectElement;\n    modelSelect?.addEventListener('change', (e) => {\n      const target = e.target as HTMLSelectElement;\n      this.sendMessage({\n        type: 'changeModel',\n        model: target.value\n      } as ModelChangeRequest);\n    });\n\n    // Header controls\n    this.setupHeaderControls();\n  }\n\n  private setupHeaderControls(): void {\n    // Header controls are now handled by VS Code native header\n    // Toggle functionality is handled via extension message in handleExtensionMessage()\n    console.log('🦊 Header controls setup - using VS Code native header');\n  }\n\n  private toggleProviderSection(): void {\n    console.log('🦊 Toggle provider section called');\n    const providerControls = document.getElementById('providerControls') as HTMLElement;\n\n    if (!providerControls) {\n      console.log('🦊 Provider controls element not found');\n      return;\n    }\n\n    const isCollapsed = providerControls.classList.contains('collapsed');\n    console.log('🦊 Current collapsed state:', isCollapsed);\n\n    if (isCollapsed) {\n      providerControls.classList.remove('collapsed');\n      console.log('🦊 Expanded provider section');\n    } else {\n      providerControls.classList.add('collapsed');\n      console.log('🦊 Collapsed provider section');\n    }\n\n    // Send the new state back to extension for button icon update\n    this.sendMessage({\n      type: 'providerSectionToggled',\n      collapsed: !isCollapsed\n    } as any);\n  }\n\n  private clearChat(): void {\n    // Clear the messages container\n    const messagesContainer = document.getElementById('messagesContainer');\n    if (messagesContainer) {\n      messagesContainer.innerHTML = `\n        <div class=\"welcome-message\">\n          <div class=\"fox-welcome\">🦊</div>\n          <div class=\"welcome-text\">\n            <h3>Welcome to Nox!</h3>\n            <p>Your clever AI coding fox is ready to help.</p>\n            <div class=\"bundled-indicator\">✨ Enterprise Bundle</div>\n          </div>\n        </div>\n      `;\n    }\n\n    // Reset session stats\n    this.resetSessionStats();\n\n    // Notify extension to clear chat history\n    this.sendMessage({ type: 'clearChat' });\n  }\n\n  private setupMessageHandling(): void {\n    window.addEventListener('message', (event) => {\n      this.handleExtensionMessage(event.data);\n    });\n  }\n\n  private sendMessage(message: BaseMessage): void {\n    this.vscode.postMessage(message);\n  }\n\n  /**\n   * 🎨 Handle CSS injection for Aurora theme animations\n   */\n  private handleCSSInjection(message: any): void {\n    try {\n      console.log('🎨 Applying Aurora theme CSS variables:', message.theme?.name);\n\n      // Execute the CSS injection script with !important flags\n      eval(message.script);\n\n      console.log('🎨 Aurora theme CSS injection successful');\n      console.log('🎨 Applied theme:', message.theme?.name);\n    } catch (error) {\n      console.error('🎨 Aurora theme CSS injection failed:', error);\n    }\n  }\n\n  /**\n   * 🎨 Handle theme change notifications\n   */\n  private handleThemeChanged(message: any): void {\n    try {\n      console.log('🎨 Theme changed:', message.theme?.name);\n\n      if (message.theme?.cssVariables) {\n        // Apply CSS variables from theme change\n        const root = document.documentElement;\n        const variables = message.theme.cssVariables;\n\n        // CRITICAL FIX: Apply CSS variables with 'important' flag to override bundled CSS defaults\n        Object.entries(variables).forEach(([property, value]) => {\n          root.style.setProperty(property, value as string, 'important');\n        });\n\n        // Trigger Aurora animation refresh\n        const auroraElements = document.querySelectorAll('.aurora-bg, .progress-fill');\n        auroraElements.forEach(el => {\n          const element = el as HTMLElement;\n          element.style.animation = 'none';\n          element.offsetHeight; // Trigger reflow\n          element.style.animation = '';\n        });\n\n        console.log('🎨 Theme change applied successfully:', message.theme.name);\n      }\n    } catch (error) {\n      console.error('🎨 Theme change failed:', error);\n    }\n  }\n\n  private sendUserMessage(): void {\n    const message = this.elements.messageInput?.value.trim();\n\n    if (!message || this.state.isAIResponding) {\n      return;\n    }\n\n    // Check if streaming is enabled\n    const isStreamingEnabled = this.elements.streamingToggle?.checked ?? true;\n\n    console.log(`🌊 Sending message with streaming: ${isStreamingEnabled}`);\n\n    // Send to extension (streaming or regular based on toggle)\n    const request = isStreamingEnabled\n      ? { type: 'sendStreamingMessage', content: message } as SendStreamingMessageRequest\n      : { type: 'sendMessage', content: message } as SendMessageRequest;\n\n    this.sendMessage(request);\n\n    // Clear input\n    if (this.elements.messageInput) {\n      this.elements.messageInput.value = '';\n      this.autoResizeTextarea();\n    }\n  }\n\n  private autoResizeTextarea(): void {\n    if (this.elements.messageInput) {\n      this.elements.messageInput.style.height = 'auto';\n      this.elements.messageInput.style.height =\n        Math.min(this.elements.messageInput.scrollHeight, 100) + 'px';\n    }\n  }\n\n  private handleExtensionMessage(message: any): void {\n    switch (message.type) {\n      case 'userMessage':\n        this.addMessage(message.message);\n        break;\n\n      case 'aiMessage':\n        this.addMessage(message.message);\n        this.updateSessionStats(message.message.tokens, message.message.cost);\n        this.state.isAIResponding = false;\n        break;\n\n      case 'aiThinking':\n        this.showThinking(message.thinking);\n        this.state.isAIResponding = message.thinking;\n        break;\n\n      case 'error':\n        this.showError(message.message);\n        this.state.isAIResponding = false;\n        break;\n\n      case 'clearMessages':\n        this.clearMessages();\n        this.resetSessionStats();\n        break;\n\n      case 'loadHistory':\n        this.loadHistory(message.history);\n        break;\n\n      case 'providerStatus':\n        this.updateProviderStatus(message);\n        break;\n\n      case 'messageDeleted':\n        this.removeMessage(message.messageId);\n        break;\n\n      case 'messageRegenerated':\n        this.replaceMessage(message.oldMessageId, message.newMessage);\n        break;\n\n      case 'toggleProviderSection':\n        this.toggleProviderSection();\n        break;\n\n      case 'insertVoiceText':\n        this.insertVoiceText(message.text);\n        break;\n\n      case 'showInlineRecording':\n        this.showInlineRecording(message.recording);\n        break;\n\n      case 'hideInlineRecording':\n        this.hideInlineRecording();\n        break;\n\n      case 'voiceStatus':\n        this.handleVoiceStatus(message.status);\n        break;\n\n      case 'confirmDelete':\n        this.handleConfirmDelete(message.messageId);\n        break;\n\n      // Streaming message handlers\n      case 'streamStart':\n        this.startStreamingMessage(message.messageId);\n        break;\n\n      case 'streamChunk':\n        this.updateStreamingMessage(message.messageId, message.chunk, message.tokens);\n        break;\n\n      case 'streamComplete':\n        this.completeStreamingMessage(message.messageId, message.finalMessage);\n        break;\n\n      case 'streamError':\n        this.handleStreamingError(message.messageId, message.error);\n        break;\n\n      case 'streamStopped':\n        this.handleStreamStopped(message.messageId, message.partialContent);\n        break;\n\n      case 'injectCSS':\n        // Handle CSS injection for Aurora theme animations\n        this.handleCSSInjection(message);\n        break;\n\n      case 'themeChanged':\n        // Handle theme change notifications\n        this.handleThemeChanged(message);\n        break;\n\n      case 'gitOperationResult':\n        this.handleGitOperationResult(message);\n        break;\n\n      case 'gitOperationError':\n        this.handleGitOperationError(message);\n        break;\n\n      case 'preferencesData':\n        // Update debug mode from preferences\n        this.debugMode = message.debugMode;\n        console.log('🐛 Debug mode updated:', this.debugMode);\n        break;\n\n      default:\n        console.warn('Unknown message type:', message.type);\n    }\n  }\n\n  /**\n   * 🎤 Trigger native voice input command\n   */\n  private triggerNativeVoiceInput(): void {\n    // Send message to extension to trigger native voice input command\n    this.sendMessage({\n      type: 'triggerNativeVoice'\n    });\n    console.log('🎤 Triggered native voice input command');\n  }\n\n  /**\n   * 🎤 Insert voice text into input field\n   */\n  private insertVoiceText(text: string): void {\n    if (this.elements.messageInput && text) {\n      // Insert the voice text into the input field\n      const currentValue = this.elements.messageInput.value;\n      const newValue = currentValue ? `${currentValue} ${text}` : text;\n      this.elements.messageInput.value = newValue;\n\n      // Auto-resize the textarea\n      this.autoResizeTextarea();\n\n      // Focus the input field\n      this.elements.messageInput.focus();\n\n      // Position cursor at the end\n      this.elements.messageInput.setSelectionRange(newValue.length, newValue.length);\n\n      console.log('🎤 Voice text inserted:', text);\n    }\n  }\n\n  /**\n   * 🎤 Show inline voice recording animation\n   */\n  private showInlineRecording(recording: boolean): void {\n    // Show animation inside input field\n    const animation = document.getElementById('voiceRecordingAnimation');\n    if (animation) {\n      animation.style.display = 'flex';\n    }\n\n    // Add recording class to input for padding adjustment\n    const messageInput = document.getElementById('messageInput') as HTMLTextAreaElement;\n    if (messageInput) {\n      messageInput.classList.add('recording');\n      messageInput.placeholder = 'Listening...';\n    }\n\n    this.isRecording = recording;\n    this.updateMicButtonState();\n\n    console.log('🎤 Inline recording animation shown');\n  }\n\n  /**\n   * 🎤 Hide inline voice recording animation\n   */\n  private hideInlineRecording(): void {\n    // Hide animation\n    const animation = document.getElementById('voiceRecordingAnimation');\n    if (animation) {\n      animation.style.display = 'none';\n    }\n\n    // Remove recording class from input\n    const messageInput = document.getElementById('messageInput') as HTMLTextAreaElement;\n    if (messageInput) {\n      messageInput.classList.remove('recording');\n      messageInput.placeholder = 'Ask Nox anything about your code...';\n    }\n\n    this.isRecording = false;\n    this.updateMicButtonState();\n\n    console.log('🎤 Inline recording animation hidden');\n  }\n\n  /**\n   * 🎤 Stop voice recording from modal button\n   */\n  public stopVoiceRecording(): void {\n    if (this.isRecording) {\n      // Send stop message to extension\n      this.sendMessage({\n        type: 'stopVoiceRecording'\n      });\n      console.log('🎤 Stop voice recording requested from modal');\n    }\n  }\n\n  /**\n   * Remove a message from the chat\n   */\n  private removeMessage(messageId: string): void {\n    const messageEl = document.querySelector(`[data-message-id=\"${messageId}\"]`);\n    if (messageEl) {\n      messageEl.remove();\n      // Remove from state\n      this.state.chatHistory = this.state.chatHistory.filter(msg => msg.id !== messageId);\n    }\n  }\n\n  /**\n   * Replace a message with a new one (for regeneration)\n   */\n  private replaceMessage(oldMessageId: string, newMessage: ChatMessage): void {\n    const oldMessageEl = document.querySelector(`[data-message-id=\"${oldMessageId}\"]`);\n    if (oldMessageEl) {\n      const newMessageEl = MessageComponent.create({ message: newMessage });\n      oldMessageEl.parentNode?.replaceChild(newMessageEl, oldMessageEl);\n\n      // Update state\n      const index = this.state.chatHistory.findIndex(msg => msg.id === oldMessageId);\n      if (index !== -1) {\n        this.state.chatHistory[index] = newMessage;\n      }\n    }\n  }\n\n  /**\n   * Reset session statistics\n   */\n  private resetSessionStats(): void {\n    this.state.sessionStats = {\n      totalTokens: 0,\n      totalCost: 0,\n      messageCount: 0,\n      startTime: new Date().toISOString()\n    };\n\n    if (this.elements.sessionTokens) {\n      this.elements.sessionTokens.textContent = '0';\n    }\n\n    if (this.elements.sessionCost) {\n      this.elements.sessionCost.textContent = '$0.00';\n    }\n\n    // Remove session summary\n    const summaryEl = document.getElementById('sessionSummary');\n    if (summaryEl) {\n      summaryEl.remove();\n    }\n  }\n\n  private addMessage(message: ChatMessage): void {\n    if (!this.elements.messagesContainer) return;\n\n    const messageEl = MessageComponent.create({ message });\n    this.elements.messagesContainer.appendChild(messageEl);\n    this.scrollToBottom();\n\n    // Update state\n    this.state.chatHistory.push(message);\n  }\n\n  private showThinking(show: boolean): void {\n    if (!this.elements.thinkingIndicator) {\n      this.elements.thinkingIndicator = ThinkingIndicatorComponent.create();\n      this.elements.messagesContainer?.appendChild(this.elements.thinkingIndicator);\n    }\n\n    this.elements.thinkingIndicator.style.display = show ? 'flex' : 'none';\n    if (show) {\n      this.scrollToBottom();\n    }\n  }\n\n  private showError(error: string): void {\n    if (!this.elements.messagesContainer) return;\n\n    const errorEl = document.createElement('div');\n    errorEl.className = 'error-message';\n    errorEl.textContent = error;\n\n    this.elements.messagesContainer.appendChild(errorEl);\n    this.scrollToBottom();\n\n    // Auto-remove after 5 seconds\n    setTimeout(() => {\n      if (errorEl.parentNode) {\n        errorEl.parentNode.removeChild(errorEl);\n      }\n    }, 5000);\n  }\n\n  private clearMessages(): void {\n    if (!this.elements.messagesContainer) return;\n\n    // Keep welcome message, remove others\n    const welcomeMsg = this.elements.messagesContainer.querySelector('.welcome-message');\n    this.elements.messagesContainer.innerHTML = '';\n    if (welcomeMsg) {\n      this.elements.messagesContainer.appendChild(welcomeMsg);\n    }\n\n    this.state.chatHistory = [];\n  }\n\n  private loadHistory(history: ChatMessage[]): void {\n    this.clearMessages();\n    history.forEach(msg => this.addMessage(msg));\n    this.state.chatHistory = [...history];\n  }\n\n  private updateProviderStatus(data: any): void {\n    // Validate data structure with detailed logging\n    if (!data) {\n      console.warn('🦊 No data received for provider status');\n      return;\n    }\n\n    if (!data.currentProvider) {\n      console.warn('🦊 Missing currentProvider in data:', data);\n      console.warn('🦊 Available properties:', Object.keys(data));\n      return;\n    }\n\n    if (!data.providers) {\n      console.warn('🦊 Missing providers in data:', data);\n      return;\n    }\n\n    // First, populate the provider dropdown with all available providers\n    this.populateProviderDropdown(data.providers, data.currentProvider);\n\n    // Get current provider data\n    const currentProviderData = data.providers[data.currentProvider];\n    if (!currentProviderData) {\n      console.warn('🦊 No data found for current provider:', data.currentProvider);\n      return;\n    }\n\n    // Update model dropdown with current provider's models\n    this.updateModelDropdown(currentProviderData, data.currentModel);\n\n    // Update status indicator\n    const statusIndicator = document.getElementById('statusIndicator');\n    const statusText = document.getElementById('statusText');\n\n    if (statusIndicator && statusText) {\n      if (currentProviderData.hasApiKey) {\n        statusIndicator.className = 'status-indicator';\n        statusText.textContent = 'Ready';\n      } else {\n        statusIndicator.className = 'status-indicator error';\n        statusText.textContent = 'No API Key';\n      }\n    }\n  }\n\n  private populateProviderDropdown(providers: any, currentProvider: string): void {\n    const providerSelect = document.getElementById('providerSelect') as HTMLSelectElement;\n    if (!providerSelect) {\n      console.warn('🦊 Provider select element not found');\n      return;\n    }\n\n    // Clear existing options\n    providerSelect.innerHTML = '';\n\n    // Add options for each provider\n    Object.entries(providers).forEach(([providerId, providerData]: [string, any]) => {\n      const option = document.createElement('option');\n      option.value = providerId;\n      option.textContent = providerData.name || providerId;\n\n      if (providerId === currentProvider) {\n        option.selected = true;\n      }\n\n      providerSelect.appendChild(option);\n    });\n\n\n  }\n\n  private updateModelDropdown(provider: any, currentModel: string): void {\n    const modelSelect = document.getElementById('modelSelect') as HTMLSelectElement;\n    if (!modelSelect) return;\n\n    // Check if provider exists and has models\n    if (!provider || !provider.models || !Array.isArray(provider.models)) {\n      console.warn('🦊 Invalid provider data for model dropdown:', provider);\n      modelSelect.innerHTML = '<option value=\"\">No models available</option>';\n      return;\n    }\n\n    // Clear existing options\n    modelSelect.innerHTML = '';\n\n    // Add model options\n    provider.models.forEach((model: string) => {\n      const option = document.createElement('option');\n      option.value = model;\n      option.textContent = this.getModelDisplayName(model);\n      if (model === currentModel) {\n        option.selected = true;\n      }\n      modelSelect.appendChild(option);\n    });\n  }\n\n  private getModelDisplayName(model: string): string {\n    const modelNames: Record<string, string> = {\n      'claude-sonnet-4-5-20250929': 'Claude Sonnet 4.5',\n      'claude-sonnet-4-20250514': 'Claude Sonnet 4',\n      'claude-3-5-haiku-20241022': 'Claude Haiku 3.5',\n      'claude-3-haiku-20240307': 'Claude Haiku 3',\n      'gpt-4': 'GPT-4',\n      'gpt-4-turbo': 'GPT-4 Turbo',\n      'gpt-3.5-turbo': 'GPT-3.5 Turbo',\n      'deepseek-chat': 'DeepSeek Chat',\n      'deepseek-coder': 'DeepSeek Coder',\n      'ollama': 'Ollama',\n      'lm-studio': 'LM Studio'\n    };\n    return modelNames[model] || model;\n  }\n\n  private updateSessionStats(tokens: number = 0, cost: number = 0): void {\n    this.state.sessionStats.totalTokens += tokens;\n    this.state.sessionStats.totalCost += cost;\n    this.state.sessionStats.messageCount += 1;\n\n    if (this.elements.sessionTokens) {\n      this.elements.sessionTokens.textContent = this.state.sessionStats.totalTokens.toLocaleString();\n    }\n\n    if (this.elements.sessionCost) {\n      this.elements.sessionCost.textContent = '$' + this.state.sessionStats.totalCost.toFixed(4);\n    }\n\n    // Update session summary if it exists\n    this.updateSessionSummary();\n  }\n\n  /**\n   * Update session summary display\n   */\n  private updateSessionSummary(): void {\n    let summaryEl = document.getElementById('sessionSummary');\n    if (!summaryEl) {\n      // Create session summary element\n      summaryEl = document.createElement('div');\n      summaryEl.id = 'sessionSummary';\n      summaryEl.className = 'session-summary';\n\n      // Insert after cost tracker\n      const costTracker = document.getElementById('costTracker');\n      if (costTracker && costTracker.parentNode) {\n        costTracker.parentNode.insertBefore(summaryEl, costTracker.nextSibling);\n      }\n    }\n\n    const sessionDuration = this.getSessionDuration();\n    const avgCostPerMessage = this.state.sessionStats.messageCount > 0\n      ? (this.state.sessionStats.totalCost / this.state.sessionStats.messageCount).toFixed(4)\n      : '0.0000';\n\n    summaryEl.innerHTML = `\n      <span class=\"session-messages\">${this.state.sessionStats.messageCount} messages</span>\n      <span>•</span>\n      <span>${sessionDuration}</span>\n      <span>•</span>\n      <span>$${avgCostPerMessage}/msg avg</span>\n    `;\n  }\n\n  /**\n   * Get formatted session duration\n   */\n  private getSessionDuration(): string {\n    const startTime = new Date(this.state.sessionStats.startTime);\n    const now = new Date();\n    const diffMs = now.getTime() - startTime.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n\n    if (diffMins < 60) {\n      return `${diffMins}m`;\n    } else {\n      const hours = Math.floor(diffMins / 60);\n      const mins = diffMins % 60;\n      return `${hours}h ${mins}m`;\n    }\n  }\n\n  private scrollToBottom(): void {\n    setTimeout(() => {\n      if (this.elements.messagesContainer) {\n        this.elements.messagesContainer.scrollTop = this.elements.messagesContainer.scrollHeight;\n      }\n    }, 100);\n  }\n\n  /**\n   * 🎤 Initialize Web Speech API\n   */\n  private initializeSpeechRecognition(): void {\n    // Check for speech recognition support\n    const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\n\n    if (!SpeechRecognition) {\n      console.log('🎤 Speech recognition not supported in this browser');\n      this.speechSupported = false;\n      if (this.elements.micBtn) {\n        this.elements.micBtn.disabled = true;\n        this.elements.micBtn.title = 'Voice input not supported in this browser';\n      }\n      this.showVoiceError('Voice recognition is not supported in this browser. Please use a Chromium-based browser.', false);\n      return;\n    }\n\n    this.speechSupported = true;\n    this.speechRecognition = new SpeechRecognition();\n\n    // Configure speech recognition\n    this.speechRecognition.continuous = true;\n    this.speechRecognition.interimResults = true;\n    this.speechRecognition.lang = 'en-US';\n\n    // Event handlers\n    this.speechRecognition.onstart = () => {\n      console.log('🎤 Speech recognition started');\n      this.isRecording = true;\n      this.updateMicButtonState();\n    };\n\n    this.speechRecognition.onresult = (event: any) => {\n      let finalTranscript = '';\n      let interimTranscript = '';\n\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const transcript = event.results[i][0].transcript;\n        if (event.results[i].isFinal) {\n          finalTranscript += transcript;\n        } else {\n          interimTranscript += transcript;\n        }\n      }\n\n      // Update the input field with the transcript\n      if (this.elements.messageInput) {\n        const currentValue = this.elements.messageInput.value;\n        const newValue = currentValue + finalTranscript;\n        this.elements.messageInput.value = newValue;\n\n        // Show interim results as placeholder\n        if (interimTranscript) {\n          this.elements.messageInput.placeholder = `Listening: \"${interimTranscript}\"`;\n        }\n\n        this.autoResizeTextarea();\n      }\n    };\n\n    this.speechRecognition.onerror = (event: any) => {\n      console.error('🎤 Speech recognition error:', event.error);\n      this.isRecording = false;\n      this.updateMicButtonState();\n\n      let errorMessage = 'Voice recognition error';\n      let showPermissionButton = false;\n\n      switch (event.error) {\n        case 'no-speech':\n          errorMessage = 'No speech detected. Please try speaking clearly and try again.';\n          break;\n        case 'audio-capture':\n          errorMessage = 'Microphone not accessible. Please check your microphone connection.';\n          showPermissionButton = true;\n          this.permissionState = 'denied';\n          break;\n        case 'not-allowed':\n          errorMessage = '🔒 Microphone blocked by VS Code security. Click \"Enable Microphone\" for solutions.';\n          showPermissionButton = true;\n          this.permissionState = 'denied';\n          break;\n        case 'network':\n          errorMessage = 'Network error during voice recognition. Please check your connection.';\n          break;\n        case 'service-not-allowed':\n          errorMessage = 'Speech recognition service not available. Please try again later.';\n          break;\n        default:\n          errorMessage = `Voice recognition failed: ${event.error}. Please try again.`;\n      }\n\n      this.showVoiceError(errorMessage, showPermissionButton);\n    };\n\n    this.speechRecognition.onend = () => {\n      console.log('🎤 Speech recognition ended');\n      this.isRecording = false;\n      this.updateMicButtonState();\n\n      // Reset placeholder\n      if (this.elements.messageInput) {\n        this.elements.messageInput.placeholder = 'Ask Nox anything about your code...';\n      }\n    };\n\n    console.log('🎤 Speech recognition initialized successfully');\n\n    // Check if we're in VS Code webview and warn about limitations\n    if (typeof acquireVsCodeApi !== 'undefined') {\n      console.log('🎤 Running in VS Code webview - microphone access may be limited');\n    }\n  }\n\n  /**\n   * 🎤 Toggle voice recording - Mic button toggles between mic and stop icon\n   */\n  private async toggleVoiceRecording(): Promise<void> {\n    // Hide any previous error messages\n    this.hideVoiceError();\n\n    if (this.isRecording) {\n      // Stop recording (mic button shows stop icon, user clicked to stop)\n      this.sendMessage({\n        type: 'stopVoiceRecording'\n      });\n      console.log('🎤 Stop voice recording requested from mic button toggle');\n    } else {\n      // Start recording (mic button shows mic icon, user clicked to start)\n      this.startSimpleVoiceRecording();\n    }\n  }\n\n  /**\n   * 🎤 Update microphone button visual state based on settings and recording state\n   */\n  private updateMicButtonState(): void {\n    if (!this.elements.micBtn) return;\n\n    // Request current voice settings from extension\n    this.sendMessage({ type: 'getVoiceStatus' });\n  }\n\n  /**\n   * 🎤 Handle voice status response from extension\n   */\n  private handleVoiceStatus(status: any): void {\n    if (!status) return;\n\n    // Check if any engine is available\n    const hasValidEngine = status.engines.free || status.engines.openai || status.engines.google;\n\n    // Update mic button state\n    this.updateMicButtonWithSettings(status.enabled, hasValidEngine);\n  }\n\n  /**\n   * 🎤 Update mic button state with voice settings\n   */\n  private updateMicButtonWithSettings(voiceEnabled: boolean, hasValidEngine: boolean): void {\n    if (!this.elements.micBtn) return;\n\n    if (!voiceEnabled) {\n      // Voice is disabled in settings\n      this.elements.micBtn.disabled = true;\n      this.elements.micBtn.classList.remove('recording');\n      this.elements.micBtn.title = 'Voice input is disabled. Enable it in Nox Settings.';\n      return;\n    }\n\n    if (!hasValidEngine) {\n      // No valid voice engine configured\n      this.elements.micBtn.disabled = true;\n      this.elements.micBtn.classList.remove('recording');\n      this.elements.micBtn.title = 'No voice engine configured. Set up API keys in Nox Settings.';\n      return;\n    }\n\n    // Voice is enabled and has valid engine\n    this.elements.micBtn.disabled = false;\n\n    if (this.isRecording) {\n      // Recording state: show stop icon, red styling\n      this.elements.micBtn.classList.add('recording');\n      this.elements.micBtn.title = 'Stop recording (click to stop)';\n    } else {\n      // Idle state: show mic icon, normal styling\n      this.elements.micBtn.classList.remove('recording');\n      if (this.permissionState === 'denied') {\n        this.elements.micBtn.title = 'Microphone permission denied - click to enable';\n      } else {\n        this.elements.micBtn.title = 'Voice input (click to start recording)';\n      }\n    }\n  }\n\n  /**\n   * 🎤 Show voice recognition error with professional UI\n   */\n  private showVoiceError(message: string, showPermissionButton: boolean = false): void {\n    console.error('🎤 Voice error:', message);\n\n    if (!this.elements.voiceError) return;\n\n    const errorText = this.elements.voiceError.querySelector('.error-text');\n    const errorAction = this.elements.voiceError.querySelector('.error-action') as HTMLButtonElement;\n\n    if (errorText) {\n      errorText.textContent = message;\n    }\n\n    if (errorAction) {\n      if (showPermissionButton) {\n        errorAction.style.display = 'block';\n        errorAction.textContent = 'Enable Microphone';\n        errorAction.onclick = () => this.requestMicrophonePermission();\n      } else {\n        errorAction.style.display = 'none';\n      }\n    }\n\n    this.elements.voiceError.style.display = 'block';\n\n    // Auto-hide non-permission errors after 5 seconds\n    if (!showPermissionButton) {\n      setTimeout(() => {\n        this.hideVoiceError();\n      }, 5000);\n    }\n  }\n\n  /**\n   * 🎤 Hide voice error message\n   */\n  private hideVoiceError(): void {\n    if (this.elements.voiceError) {\n      this.elements.voiceError.style.display = 'none';\n    }\n  }\n\n  /**\n   * 🎤 Request microphone permission explicitly\n   */\n  private async requestMicrophonePermission(): Promise<void> {\n    try {\n      console.log('🎤 Requesting microphone permission...');\n\n      // Show immediate feedback\n      this.showVoiceError('🎤 Attempting to enable microphone access...', false);\n\n      // Method 1: Try getUserMedia with explicit permission request\n      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n        try {\n          console.log('🎤 Trying getUserMedia with explicit permission...');\n\n          // Request permission explicitly\n          const stream = await navigator.mediaDevices.getUserMedia({\n            audio: {\n              echoCancellation: true,\n              noiseSuppression: true,\n              autoGainControl: true\n            }\n          });\n\n          // Permission granted - clean up the stream\n          stream.getTracks().forEach(track => track.stop());\n\n          this.permissionState = 'granted';\n          this.hideVoiceError();\n          this.updateMicButtonState();\n\n          console.log('🎤 Microphone permission granted via getUserMedia');\n          this.showVoiceError('✅ Microphone access granted! Click the microphone button to start voice input.', false);\n\n          // Auto-hide success message after 3 seconds\n          setTimeout(() => this.hideVoiceError(), 3000);\n          return;\n\n        } catch (userMediaError: any) {\n          console.log('🎤 getUserMedia failed:', userMediaError.name, userMediaError.message);\n\n          if (userMediaError.name === 'NotAllowedError') {\n            // VS Code blocks webview microphone - use simple approach\n            this.showVoiceError('🔒 VS Code blocks microphone in webviews. Using extension backend instead...', false);\n            this.startSimpleVoiceRecording();\n            return;\n          }\n        }\n      }\n\n      // Method 2: Try direct speech recognition permission test\n      if (this.speechRecognition) {\n        try {\n          console.log('🎤 Testing speech recognition permission...');\n\n          // Create a promise to handle the permission test\n          const permissionTest = new Promise((resolve, reject) => {\n            const timeout = setTimeout(() => {\n              reject(new Error('Permission test timeout'));\n            }, 2000);\n\n            this.speechRecognition.onstart = () => {\n              clearTimeout(timeout);\n              this.speechRecognition.stop();\n              resolve('granted');\n            };\n\n            this.speechRecognition.onerror = (event: any) => {\n              clearTimeout(timeout);\n              reject(event);\n            };\n\n            this.speechRecognition.start();\n          });\n\n          await permissionTest;\n\n          this.permissionState = 'granted';\n          this.hideVoiceError();\n          this.updateMicButtonState();\n\n          console.log('🎤 Speech recognition permission test passed');\n          this.showVoiceError('✅ Voice recognition enabled! Click the microphone button to start.', false);\n\n          // Auto-hide success message after 3 seconds\n          setTimeout(() => this.hideVoiceError(), 3000);\n          return;\n\n        } catch (speechError: any) {\n          console.log('🎤 Speech recognition permission test failed:', speechError);\n        }\n      }\n\n      // Method 3: Use simple voice recording via extension\n      this.showVoiceError('🔒 VS Code blocks microphone in webviews. Using extension backend instead...', false);\n      this.startSimpleVoiceRecording();\n\n    } catch (error: any) {\n      console.error('🎤 Permission request failed:', error);\n      this.showVoiceError('🔒 VS Code blocks microphone in webviews. Using extension backend instead...', false);\n      this.startSimpleVoiceRecording();\n    }\n  }\n\n  /**\n   * 🎤 Start simple voice recording via extension backend\n   */\n  private startSimpleVoiceRecording(): void {\n    // Send message to extension to start voice recording\n    this.sendMessage({\n      type: 'startVoiceRecording'\n    });\n    console.log('🎤 Starting simple voice recording via extension');\n  }\n\n  /**\n   * Handle delete confirmation from user\n   */\n  private handleConfirmDelete(messageId: string): void {\n    // Show a visual confirmation in the UI instead of a modal\n    const messageEl = document.querySelector(`[data-message-id=\"${messageId}\"]`);\n    if (!messageEl) return;\n\n    // Find the delete button\n    const deleteBtn = messageEl.querySelector('.message-action-btn.delete') as HTMLButtonElement;\n    if (!deleteBtn) return;\n\n    // Change button appearance to show confirmation state\n    const originalText = deleteBtn.textContent;\n    deleteBtn.textContent = '🗑️ Confirm?';\n    deleteBtn.style.background = 'rgba(244, 114, 182, 0.3)';\n    deleteBtn.style.borderColor = 'var(--aurora-pink)';\n\n    // Create a cancel button\n    const cancelBtn = document.createElement('button');\n    cancelBtn.className = 'message-action-btn';\n    cancelBtn.textContent = '❌ Cancel';\n    cancelBtn.style.color = 'var(--aurora-blue)';\n    cancelBtn.style.borderColor = 'rgba(76, 154, 255, 0.3)';\n    cancelBtn.style.background = 'rgba(76, 154, 255, 0.1)';\n\n    // Insert cancel button next to delete button\n    deleteBtn.parentNode?.insertBefore(cancelBtn, deleteBtn.nextSibling);\n\n    // Handle confirm\n    const confirmHandler = () => {\n      this.sendMessage({\n        type: 'deleteMessage',\n        messageId: messageId\n      } as any);\n      deleteBtn.textContent = originalText;\n      deleteBtn.style.background = '';\n      deleteBtn.style.borderColor = '';\n      deleteBtn.onclick = () => this.handleConfirmDelete(messageId);\n      cancelBtn.remove();\n    };\n\n    // Handle cancel\n    const cancelHandler = () => {\n      deleteBtn.textContent = originalText;\n      deleteBtn.style.background = '';\n      deleteBtn.style.borderColor = '';\n      deleteBtn.onclick = () => this.handleConfirmDelete(messageId);\n      cancelBtn.remove();\n    };\n\n    deleteBtn.onclick = confirmHandler;\n    cancelBtn.onclick = cancelHandler;\n  }\n\n  /**\n   * 🌊 Start streaming message display\n   */\n  private startStreamingMessage(messageId: string): void {\n    if (!this.elements.messagesContainer) return;\n\n    // Hide thinking indicator if showing\n    this.showThinking(false);\n\n    // Create streaming message element\n    const streamingEl = StreamingMessageComponent.create(messageId);\n    this.elements.messagesContainer.appendChild(streamingEl);\n\n    // Set AI responding state\n    this.state.isAIResponding = true;\n\n    // Scroll to show new streaming message\n    this.scrollToBottom();\n\n    console.log('🌊 Started streaming message:', messageId);\n  }\n\n  /**\n   * 🌊 Update streaming message with new content chunk\n   */\n  private updateStreamingMessage(messageId: string, chunk: string, tokens?: number): void {\n    StreamingMessageComponent.updateContent(messageId, chunk, tokens);\n\n    // ✅ SCROLL FREEDOM FIX: No auto-scroll during streaming chunks\n    // User can now scroll freely while streaming continues at bottom\n    // Only scroll when streaming starts/completes, not on every chunk\n\n    if (this.debugMode) {\n      console.log('🌊 Updated streaming message:', messageId, 'chunk length:', chunk.length, 'tokens:', tokens);\n    }\n  }\n\n  /**\n   * 🌊 Complete streaming message and convert to regular message\n   */\n  private completeStreamingMessage(messageId: string, finalMessage: ChatMessage): void {\n    // Complete the streaming component\n    StreamingMessageComponent.completeStreaming(messageId, finalMessage);\n\n    // Update session stats\n    this.updateSessionStats(finalMessage.tokens, finalMessage.cost);\n\n    // Update state\n    this.state.isAIResponding = false;\n    this.state.chatHistory.push(finalMessage);\n\n    // Final scroll to show completed message\n    this.scrollToBottom();\n\n    console.log('🌊 Completed streaming message:', messageId, 'final tokens:', finalMessage.tokens);\n  }\n\n  /**\n   * 🌊 Handle streaming error\n   */\n  private handleStreamingError(messageId: string, error: string): void {\n    StreamingMessageComponent.handleStreamingError(messageId, error);\n\n    // Reset AI responding state\n    this.state.isAIResponding = false;\n\n    console.error('🌊 Streaming error for message:', messageId, error);\n  }\n\n  /**\n   * ⏹️ Handle stream stopped\n   */\n  private handleStreamStopped(messageId: string, partialContent?: string): void {\n    StreamingMessageComponent.handleStreamStopped(messageId, partialContent);\n\n    // Reset AI responding state\n    this.state.isAIResponding = false;\n\n    console.log('⏹️ Stream stopped for message:', messageId);\n  }\n\n  /**\n   * 🦊 Handle Git operation result\n   */\n  private handleGitOperationResult(message: any): void {\n    console.log('🦊 Git operation result:', message);\n\n    // Create a Git result message to display\n    const gitMessage: ChatMessage = {\n      id: `git-${Date.now()}`,\n      type: 'assistant',\n      content: this.formatGitResult(message.operation, message.result),\n      timestamp: new Date().toISOString(),\n      tokens: 0,\n      cost: 0\n    };\n\n    this.addMessage(gitMessage);\n    this.scrollToBottom();\n  }\n\n  /**\n   * 🦊 Handle Git operation error\n   */\n  private handleGitOperationError(message: any): void {\n    console.error('🦊 Git operation error:', message);\n\n    // Create a Git error message to display\n    const errorMessage: ChatMessage = {\n      id: `git-error-${Date.now()}`,\n      type: 'assistant',\n      content: `❌ **Git Operation Failed**\\n\\n**Operation**: ${message.operation.description}\\n\\n**Error**: ${message.error}`,\n      timestamp: new Date().toISOString(),\n      tokens: 0,\n      cost: 0\n    };\n\n    this.addMessage(errorMessage);\n    this.scrollToBottom();\n  }\n\n  /**\n   * 🦊 Format Git operation result for display\n   */\n  private formatGitResult(operation: any, result: any): string {\n    switch (operation.type) {\n      case 'git_status':\n        return this.formatGitStatus(result);\n      case 'git_commit':\n        return this.formatGitCommit(result);\n      case 'git_push':\n        return this.formatGitPush(result);\n      default:\n        return `✅ **${operation.description}**\\n\\n\\`\\`\\`json\\n${JSON.stringify(result, null, 2)}\\n\\`\\`\\``;\n    }\n  }\n\n  /**\n   * 🦊 Format Git status result\n   */\n  private formatGitStatus(result: any): string {\n    if (!result.success) {\n      return `❌ **Git Status Failed**\\n\\n${result.message || result.error}`;\n    }\n\n    const status = result.result;\n    let content = `📊 **Git Repository Status**\\n\\n`;\n\n    if (!status.isRepo) {\n      content += `❌ Not a Git repository`;\n      return content;\n    }\n\n    content += `🌿 **Branch**: ${status.branch}\\n`;\n    content += `📝 **Changes**: ${status.changes.length} file(s)\\n\\n`;\n\n    if (status.changes.length > 0) {\n      content += `**Modified Files:**\\n`;\n      for (const change of status.changes) {\n        const icon = change.status === 'M' ? '📝' : change.status === 'A' ? '➕' : change.status === 'D' ? '❌' : '❓';\n        content += `${icon} ${change.file} (${change.status})\\n`;\n      }\n    } else {\n      content += `✅ Working directory clean`;\n    }\n\n    return content;\n  }\n\n  /**\n   * 🦊 Format Git commit result\n   */\n  private formatGitCommit(result: any): string {\n    if (!result.success) {\n      return `❌ **Git Commit Failed**\\n\\n${result.message || result.error}`;\n    }\n\n    return `✅ **Commit Successful**\\n\\n**Hash**: \\`${result.result.hash}\\`\\n**Message**: ${result.result.message}\\n**Files**: ${result.result.files.length} file(s)`;\n  }\n\n  /**\n   * 🦊 Format Git push result\n   */\n  private formatGitPush(result: any): string {\n    if (!result.success) {\n      return `❌ **Git Push Failed**\\n\\n${result.message || result.error}`;\n    }\n\n    return `✅ **Push Successful**\\n\\n**Branch**: ${result.result.branch}\\n**Remote**: ${result.result.remote}`;\n  }\n}\n\n// Initialize the app when the script loads\nnew NoxChatApp();\n\n// Test markdown rendering on load\n\nconst renderer = NoxMarkdownRenderer.getInstance();\nconst testMarkdown = `\n# 🦊 Nox Markdown Test\n\nThis is a **bold** test with *italic* text and \\`inline code\\`.\n\n## Code Block Example\n\n\\`\\`\\`javascript\nfunction greet(name) {\n  console.log(\\`Hello, \\${name}! 🦊\\`);\n  return \\`Welcome to Nox!\\`;\n}\n\ngreet('Developer');\n\\`\\`\\`\n\n## Features\n\n- ✅ **Syntax highlighting** for 190+ languages\n- ✅ **Aurora theming** with beautiful colors\n- ✅ **Interactive code blocks** with copy buttons\n- ✅ **XSS protection** with DOMPurify\n\n> This is a blockquote with Aurora styling!\n\n[Visit Augment Code](https://augmentcode.com) for more enterprise tools.\n`;\n\nconst rendered = renderer.render(testMarkdown);\n\n","/**\n * 🦊 Nox Markdown Test Module\n * Test enterprise markdown libraries integration\n */\n\nimport { marked } from 'marked';\nimport hljs from 'highlight.js';\nimport DOMPurify from 'dompurify';\n\n/**\n * Test markdown rendering functionality\n */\nexport class MarkdownTester {\n  \n  /**\n   * Test basic markdown parsing\n   */\n  static testBasicMarkdown(): boolean {\n    try {\n      const testMarkdown = `\n# Test Header\nThis is **bold** and *italic* text.\n\n\\`\\`\\`javascript\nconsole.log('Hello, Nox!');\n\\`\\`\\`\n\n- List item 1\n- List item 2\n      `;\n      \n      const html = marked(testMarkdown);\n      console.log('✅ Marked.js basic test passed');\n      console.log('Generated HTML:', html);\n      return true;\n    } catch (error) {\n      console.error('❌ Marked.js test failed:', error);\n      return false;\n    }\n  }\n  \n  /**\n   * Test syntax highlighting\n   */\n  static testSyntaxHighlighting(): boolean {\n    try {\n      const code = `\nfunction greetNox() {\n  console.log('Hello from Nox! 🦊');\n  return 'Enterprise-grade AI coding';\n}\n      `;\n      \n      const highlighted = hljs.highlight(code, { language: 'javascript' });\n      console.log('✅ Highlight.js test passed');\n      console.log('Highlighted code:', highlighted.value);\n      return true;\n    } catch (error) {\n      console.error('❌ Highlight.js test failed:', error);\n      return false;\n    }\n  }\n  \n  /**\n   * Test XSS protection\n   */\n  static testXSSProtection(): boolean {\n    try {\n      const maliciousHTML = `\n        <script>alert('XSS Attack!');</script>\n        <img src=\"x\" onerror=\"alert('XSS!')\">\n        <p>Safe content</p>\n      `;\n      \n      const sanitized = DOMPurify.sanitize(maliciousHTML);\n      console.log('✅ DOMPurify test passed');\n      console.log('Sanitized HTML:', sanitized);\n      \n      // Should not contain script tags\n      const hasScript = sanitized.includes('<script>');\n      const hasOnerror = sanitized.includes('onerror');\n      \n      if (hasScript || hasOnerror) {\n        console.error('❌ DOMPurify failed to sanitize malicious content');\n        return false;\n      }\n      \n      return true;\n    } catch (error) {\n      console.error('❌ DOMPurify test failed:', error);\n      return false;\n    }\n  }\n  \n  /**\n   * Run all tests\n   */\n  static runAllTests(): boolean {\n    console.log('🦊 Running Nox Markdown Library Tests...');\n    \n    const results = [\n      this.testBasicMarkdown(),\n      this.testSyntaxHighlighting(),\n      this.testXSSProtection()\n    ];\n    \n    const allPassed = results.every(result => result);\n    \n    if (allPassed) {\n      console.log('🎉 All markdown library tests passed!');\n    } else {\n      console.error('❌ Some markdown library tests failed');\n    }\n    \n    return allPassed;\n  }\n}\n","/**\n * 🦊 Nox Enterprise Markdown Renderer\n * Aurora-themed markdown rendering with syntax highlighting\n */\n\nimport { marked, Renderer } from 'marked';\nimport hljs from 'highlight.js';\nimport DOMPurify from 'dompurify';\n\n/**\n * Enterprise Markdown Renderer with Aurora theming\n */\nexport class NoxMarkdownRenderer {\n  private static instance: NoxMarkdownRenderer;\n  private renderer: Renderer;\n  \n  private constructor() {\n    this.renderer = new Renderer();\n    this.setupCustomRenderers();\n    this.configureMarked();\n  }\n  \n  /**\n   * Get singleton instance\n   */\n  static getInstance(): NoxMarkdownRenderer {\n    if (!NoxMarkdownRenderer.instance) {\n      NoxMarkdownRenderer.instance = new NoxMarkdownRenderer();\n    }\n    return NoxMarkdownRenderer.instance;\n  }\n  \n  /**\n   * Setup custom Aurora-themed renderers\n   */\n  private setupCustomRenderers(): void {\n    // Custom heading renderer with Aurora colors\n    this.renderer.heading = (text: string, level: number): string => {\n      const colors = {\n        1: 'var(--aurora-blue)',\n        2: 'var(--aurora-purple)', \n        3: 'var(--aurora-cyan)',\n        4: 'var(--aurora-green)',\n        5: 'var(--aurora-pink)',\n        6: 'var(--aurora-orange)'\n      };\n      \n      const color = colors[level as keyof typeof colors] || 'var(--aurora-blue)';\n      const id = text.toLowerCase().replace(/[^\\w]+/g, '-');\n      \n      return `\n        <h${level} id=\"${id}\" class=\"nox-heading nox-h${level}\" style=\"color: ${color};\">\n          ${text}\n        </h${level}>\n      `;\n    };\n    \n    // Custom code block renderer with syntax highlighting\n    this.renderer.code = (code: string, language: string | undefined): string => {\n      const validLanguage = language && hljs.getLanguage(language) ? language : 'plaintext';\n      const highlighted = hljs.highlight(code, { language: validLanguage });\n      \n      return `\n        <div class=\"nox-code-block\" data-language=\"${validLanguage}\">\n          <div class=\"nox-code-header\">\n            <span class=\"nox-code-language\">${this.getLanguageDisplayName(validLanguage)}</span>\n            <button class=\"nox-copy-btn\" data-copy-target=\"code\" title=\"Copy code\">\n              <span class=\"copy-icon\">📋</span>\n            </button>\n          </div>\n          <pre class=\"nox-code-content\"><code class=\"hljs language-${validLanguage}\">${highlighted.value}</code></pre>\n        </div>\n      `;\n    };\n    \n    // Custom inline code renderer\n    this.renderer.codespan = (code: string): string => {\n      return `<code class=\"nox-inline-code\">${code}</code>`;\n    };\n    \n    // Custom list renderer with Aurora styling\n    this.renderer.list = (body: string, ordered: boolean): string => {\n      const tag = ordered ? 'ol' : 'ul';\n      const className = ordered ? 'nox-ordered-list' : 'nox-unordered-list';\n      return `<${tag} class=\"${className}\">${body}</${tag}>`;\n    };\n    \n    // Custom list item renderer\n    this.renderer.listitem = (text: string): string => {\n      return `<li class=\"nox-list-item\">${text}</li>`;\n    };\n    \n    // Custom blockquote renderer\n    this.renderer.blockquote = (quote: string): string => {\n      return `<blockquote class=\"nox-blockquote\">${quote}</blockquote>`;\n    };\n    \n    // Custom table renderer\n    this.renderer.table = (header: string, body: string): string => {\n      return `\n        <div class=\"nox-table-container\">\n          <table class=\"nox-table\">\n            <thead class=\"nox-table-header\">${header}</thead>\n            <tbody class=\"nox-table-body\">${body}</tbody>\n          </table>\n        </div>\n      `;\n    };\n    \n    // Custom link renderer with security\n    this.renderer.link = (href: string, title: string | null, text: string): string => {\n      const safeHref = DOMPurify.sanitize(href);\n      const safeTitle = title ? DOMPurify.sanitize(title) : '';\n      const titleAttr = safeTitle ? ` title=\"${safeTitle}\"` : '';\n      \n      return `<a href=\"${safeHref}\" class=\"nox-link\" target=\"_blank\" rel=\"noopener noreferrer\"${titleAttr}>${text}</a>`;\n    };\n    \n    // Custom paragraph renderer\n    this.renderer.paragraph = (text: string): string => {\n      return `<p class=\"nox-paragraph\">${text}</p>`;\n    };\n    \n    // Custom strong/bold renderer\n    this.renderer.strong = (text: string): string => {\n      return `<strong class=\"nox-strong\">${text}</strong>`;\n    };\n    \n    // Custom emphasis/italic renderer\n    this.renderer.em = (text: string): string => {\n      return `<em class=\"nox-emphasis\">${text}</em>`;\n    };\n  }\n  \n  /**\n   * Configure marked with our custom renderer\n   */\n  private configureMarked(): void {\n    marked.setOptions({\n      renderer: this.renderer,\n      gfm: true,\n      breaks: true\n    });\n  }\n  \n  /**\n   * Render markdown to HTML with Aurora theming\n   */\n  render(markdown: string): string {\n    try {\n      // First pass: marked.js processing\n      const html = marked(markdown);\n      \n      // Second pass: DOMPurify sanitization\n      const sanitized = DOMPurify.sanitize(html, {\n        ALLOWED_TAGS: [\n          'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n          'p', 'br', 'strong', 'em', 'code', 'pre',\n          'ul', 'ol', 'li', 'blockquote',\n          'table', 'thead', 'tbody', 'tr', 'th', 'td',\n          'a', 'div', 'span', 'button'\n        ],\n        ALLOWED_ATTR: [\n          'class', 'id', 'style', 'data-language',\n          'href', 'target', 'rel', 'title', 'onclick'\n        ],\n        ALLOWED_URI_REGEXP: /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i\n      });\n      \n      return sanitized;\n    } catch (error) {\n      console.error('🦊 Markdown rendering error:', error);\n      // Fallback to escaped plain text\n      return `<p class=\"nox-error\">Error rendering markdown: ${this.escapeHtml(markdown)}</p>`;\n    }\n  }\n  \n  /**\n   * Get display name for programming language\n   */\n  private getLanguageDisplayName(lang: string): string {\n    const languageNames: Record<string, string> = {\n      'javascript': 'JavaScript',\n      'typescript': 'TypeScript',\n      'python': 'Python',\n      'java': 'Java',\n      'csharp': 'C#',\n      'cpp': 'C++',\n      'c': 'C',\n      'rust': 'Rust',\n      'go': 'Go',\n      'php': 'PHP',\n      'ruby': 'Ruby',\n      'swift': 'Swift',\n      'kotlin': 'Kotlin',\n      'scala': 'Scala',\n      'html': 'HTML',\n      'css': 'CSS',\n      'scss': 'SCSS',\n      'json': 'JSON',\n      'xml': 'XML',\n      'yaml': 'YAML',\n      'markdown': 'Markdown',\n      'bash': 'Bash',\n      'shell': 'Shell',\n      'powershell': 'PowerShell',\n      'sql': 'SQL',\n      'dockerfile': 'Dockerfile',\n      'plaintext': 'Text'\n    };\n    \n    return languageNames[lang] || lang.charAt(0).toUpperCase() + lang.slice(1);\n  }\n  \n  /**\n   * Escape HTML for fallback rendering\n   */\n  private escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n}\n\n/**\n * Initialize copy button functionality with proper event listeners\n * This avoids CSP violations from inline onclick handlers\n */\nexport function initializeCopyButtons(): void {\n  // Set up event delegation for copy buttons\n  document.addEventListener('click', (event) => {\n    const target = event.target as HTMLElement;\n    const copyButton = target.closest('.nox-copy-btn') as HTMLButtonElement;\n\n    if (copyButton) {\n      event.preventDefault();\n      copyCodeToClipboard(copyButton);\n    }\n  });\n}\n\n/**\n * Copy code to clipboard functionality\n */\nfunction copyCodeToClipboard(button: HTMLButtonElement): void {\n  const codeBlock = button.closest('.nox-code-block');\n  const codeContent = codeBlock?.querySelector('code');\n\n  if (codeContent) {\n    const code = codeContent.textContent || '';\n\n    // Use the Clipboard API if available\n    if (navigator.clipboard && navigator.clipboard.writeText) {\n      navigator.clipboard.writeText(code).then(() => {\n        showCopySuccess(button);\n      }).catch(err => {\n        console.error('Failed to copy code with Clipboard API:', err);\n        fallbackCopyToClipboard(code, button);\n      });\n    } else {\n      // Fallback for older browsers or restricted contexts\n      fallbackCopyToClipboard(code, button);\n    }\n  }\n}\n\n/**\n * Fallback copy method for environments without Clipboard API\n */\nfunction fallbackCopyToClipboard(text: string, button: HTMLButtonElement): void {\n  const textArea = document.createElement('textarea');\n  textArea.value = text;\n  textArea.style.position = 'fixed';\n  textArea.style.left = '-999999px';\n  textArea.style.top = '-999999px';\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  try {\n    const successful = document.execCommand('copy');\n    if (successful) {\n      showCopySuccess(button);\n    } else {\n      showCopyError(button);\n    }\n  } catch (err) {\n    console.error('Fallback copy failed:', err);\n    showCopyError(button);\n  } finally {\n    document.body.removeChild(textArea);\n  }\n}\n\n/**\n * Show copy success feedback\n */\nfunction showCopySuccess(button: HTMLButtonElement): void {\n  const icon = button.querySelector('.copy-icon');\n  if (icon) {\n    const originalText = icon.textContent;\n    icon.textContent = '✅';\n    setTimeout(() => {\n      icon.textContent = originalText;\n    }, 2000);\n  }\n}\n\n/**\n * Show copy error feedback\n */\nfunction showCopyError(button: HTMLButtonElement): void {\n  const icon = button.querySelector('.copy-icon');\n  if (icon) {\n    const originalText = icon.textContent;\n    icon.textContent = '❌';\n    setTimeout(() => {\n      icon.textContent = originalText;\n    }, 2000);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknox_vscode\"] = self[\"webpackChunknox_vscode\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [96], () => (__webpack_require__(8025)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","undefined","___CSS_LOADER_EXPORT___","i","push","module","id","MessageComponent","create","props","messageEl","document","createElement","className","message","type","setAttribute","contentEl","renderer","NoxMarkdownRenderer","getInstance","markdownContainer","innerHTML","render","content","appendChild","textContent","metaEl","this","createMessageMeta","infoEl","messageDate","Date","timestamp","now","isToday","toDateString","isYesterday","getTime","timeText","dateText","timeFormatted","toLocaleTimeString","hour","minute","toLocaleDateString","month","day","year","getFullYear","timeEl","title","toLocaleString","dateEl","provider","providerEl","tokens","tokensEl","cost","costEl","toFixed","model","modelEl","style","fontSize","opacity","actionsEl","copyBtn","onclick","copyMessageContent","regenerateBtn","regenerateMessage","deleteBtn","deleteMessage","navigator","clipboard","writeText","then","notification","cssText","body","setTimeout","remove","catch","err","console","error","window","vscodeApi","acquireVsCodeApi","postMessage","messageId","codeBlockEl","preEl","codeEl","code","language","copyable","createCopyButton","addEventListener","currentProvider","providers","onProviderChange","selectorEl","labelEl","selectEl","Object","entries","forEach","providerId","optionEl","value","name","selected","statusEl","indicatorEl","textEl","currentModel","models","onModelChange","getModelDisplayName","thinkingEl","display","foxEl","dotsEl","dotEl","StreamingBuffer","constructor","onFlush","buffer","timer","isStopped","currentSpeed","addChunk","chunk","log","preset","SPEED_PRESETS","delay","length","minChunk","scheduleFlush","maxChunk","flushBuffer","clearTimeout","trim","complete","destroy","setSpeed","speed","stop","isBufferStopped","slow","medium","fast","instant","StreamingMessageComponent","headerEl","stopBtn","stopStreaming","cursorEl","progressEl","updateContent","querySelector","hasAttribute","activeBuffers","get","flushContentToDisplay","globalSpeed","set","Math","random","updateProgress","expandContainerOnly","scheduleSmartMarkdownRender","renderMarkdownSafely","tokenEl","progressFill","estimatedProgress","min","width","completeStreaming","finalMessage","delete","markdownRenderTimers","lastMarkdownRender","removeAttribute","classList","optionalScrollToBottomOnComplete","autoScrollDisabled","hideScrollIndicator","stopStreamingBuffer","warn","updateStopButtonState","state","progressText","disabled","progressContainer","continueStreaming","vscode","handleStreamingError","color","handleStreamStopped","partialContent","height","messagesContainer","getElementById","scrollTop","scrollHeight","clientHeight","userHasScrolled","setupScrollListener","lastScrollTime","ensureContentVisible","recentlyScrolled","isRightAtBottom","showScrollIndicator","indicator","scrollToBottom","add","setStreamingSpeed","getStreamingSpeed","getAvailableSpeeds","label","description","Map","NoxChatApp","debugMode","elements","speechRecognition","isRecording","speechSupported","permissionState","initializeState","initialize","chatHistory","sessionStats","totalTokens","totalCost","messageCount","startTime","toISOString","isAIResponding","testMarkdownLibraries","readyState","setupUI","MarkdownTester","runAllTests","messageInput","sendBtn","micBtn","voiceError","sessionCost","sessionTokens","streamingToggle","initializeSpeechRecognition","initializeCopyButtons","setupEventListeners","setupMessageHandling","sendMessage","sendUserMessage","toggleVoiceRecording","e","key","shiftKey","preventDefault","autoResizeTextarea","providerSelect","target","modelSelect","setupHeaderControls","toggleProviderSection","providerControls","isCollapsed","contains","collapsed","clearChat","resetSessionStats","event","handleExtensionMessage","data","handleCSSInjection","theme","eval","script","handleThemeChanged","cssVariables","root","documentElement","variables","property","setProperty","querySelectorAll","el","element","animation","offsetHeight","isStreamingEnabled","checked","request","addMessage","updateSessionStats","showThinking","thinking","showError","clearMessages","loadHistory","history","updateProviderStatus","removeMessage","replaceMessage","oldMessageId","newMessage","insertVoiceText","text","showInlineRecording","recording","hideInlineRecording","handleVoiceStatus","status","handleConfirmDelete","startStreamingMessage","updateStreamingMessage","completeStreamingMessage","handleGitOperationResult","handleGitOperationError","triggerNativeVoiceInput","currentValue","newValue","focus","setSelectionRange","placeholder","updateMicButtonState","stopVoiceRecording","filter","msg","oldMessageEl","newMessageEl","parentNode","replaceChild","index","findIndex","summaryEl","show","thinkingIndicator","ThinkingIndicatorComponent","errorEl","removeChild","welcomeMsg","keys","populateProviderDropdown","currentProviderData","updateModelDropdown","statusIndicator","statusText","hasApiKey","providerData","option","Array","isArray","updateSessionSummary","costTracker","insertBefore","nextSibling","sessionDuration","getSessionDuration","avgCostPerMessage","diffMs","diffMins","floor","SpeechRecognition","webkitSpeechRecognition","showVoiceError","continuous","interimResults","lang","onstart","onresult","finalTranscript","interimTranscript","resultIndex","results","transcript","isFinal","onerror","errorMessage","showPermissionButton","onend","hideVoiceError","startSimpleVoiceRecording","hasValidEngine","engines","free","openai","google","updateMicButtonWithSettings","enabled","voiceEnabled","errorText","errorAction","requestMicrophonePermission","mediaDevices","getUserMedia","audio","echoCancellation","noiseSuppression","autoGainControl","getTracks","track","userMediaError","permissionTest","Promise","resolve","reject","timeout","Error","start","speechError","originalText","background","borderColor","cancelBtn","streamingEl","gitMessage","formatGitResult","operation","result","formatGitStatus","formatGitCommit","formatGitPush","JSON","stringify","success","isRepo","branch","changes","change","file","hash","files","remote","testMarkdown","rendered","testBasicMarkdown","html","marked","testSyntaxHighlighting","highlighted","highlight","testXSSProtection","maliciousHTML","sanitized","sanitize","hasScript","includes","hasOnerror","allPassed","every","copyButton","closest","button","codeBlock","codeContent","showCopySuccess","fallbackCopyToClipboard","copyCodeToClipboard","Renderer","setupCustomRenderers","configureMarked","instance","heading","level","toLowerCase","replace","validLanguage","getLanguage","getLanguageDisplayName","codespan","list","ordered","tag","listitem","blockquote","quote","table","header","link","href","safeHref","safeTitle","paragraph","strong","em","setOptions","gfm","breaks","markdown","ALLOWED_TAGS","ALLOWED_ATTR","ALLOWED_URI_REGEXP","escapeHtml","charAt","toUpperCase","slice","div","textArea","position","left","top","select","execCommand","showCopyError","icon","__webpack_module_cache__","deferred","__webpack_require__","moduleId","cachedModule","exports","__webpack_modules__","call","m","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","nc","__webpack_exports__"],"sourceRoot":""}